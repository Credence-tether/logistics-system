id: moduleContainer
parentSlotId: '2'
definitionId: customReactApp
styles:
  xl:
    gridItem:
      x: 0
      y: 0
      w: 24
      h: 40
properties:
  name: moduleContainer
  heightMode: auto
  margin: false
  fileSystem:
    app/app.tsx: >
      import { useState, useEffect } from 'react';

      import { Navigation } from '@/components/Navigation';

      import { LoginPage } from '@/components/LoginPage';

      import { DashboardPage } from '@/components/DashboardPage';

      import { ShipmentsPage } from '@/components/ShipmentsPage';

      import { VehiclesPage } from '@/components/VehiclesPage';

      import { InventoryPage } from '@/components/InventoryPage';

      import { PerformancePage } from '@/components/PerformancePage';


      type Section = 'dashboard' | 'shipments' | 'vehicles' | 'inventory' |
      'performance';


      interface User {
        id: number;
        email: string;
        name: string;
        role: string;
      }


      function App() {
        const [activeSection, setActiveSection] = useState<Section>('dashboard');
        const [user, setUser] = useState<User | null>(null);
        const [isLoading, setIsLoading] = useState(true);

        useEffect(() => {
          const storedUser = localStorage.getItem('afghco_user');
          if (storedUser) {
            try {
              setUser(JSON.parse(storedUser));
            } catch (err) {
              console.error('Failed to parse stored user:', err);
              localStorage.removeItem('afghco_user');
            }
          }
          setIsLoading(false);
        }, []);

        const handleLoginSuccess = (userData: User) => {
          setUser(userData);
          localStorage.setItem('afghco_user', JSON.stringify(userData));
        };

        const handleLogout = () => {
          setUser(null);
          localStorage.removeItem('afghco_user');
          setActiveSection('dashboard');
        };

        const renderSection = () => {
          switch (activeSection) {
            case 'dashboard':
              return <DashboardPage />;
            case 'shipments':
              return <ShipmentsPage />;
            case 'vehicles':
              return <VehiclesPage />;
            case 'inventory':
              return <InventoryPage />;
            case 'performance':
              return <PerformancePage />;
            default:
              return <DashboardPage />;
          }
        };

        if (isLoading) {
          return (
            <div className="min-h-screen bg-[#0F172A] flex items-center justify-center">
              <div className="text-[#F1F5F9] text-xl">Loading...</div>
            </div>
          );
        }

        if (!user) {
          return <LoginPage onLoginSuccess={handleLoginSuccess} />;
        }

        return (
          <div className="min-h-screen bg-[#0F172A]">
            <Navigation 
              activeSection={activeSection} 
              onSectionChange={setActiveSection}
              onLogout={handleLogout}
              userName={user.name}
            />
            {renderSection()}
          </div>
        );
      }


      export default App;
    components/ui/button.tsx: |+
      import * as React from "react"
      import { Slot } from "@radix-ui/react-slot"
      import { cva, type VariantProps } from "class-variance-authority"

      import { cn } from "@/lib/utils"

      const buttonVariants = cva(
        "inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",
        {
          variants: {
            variant: {
              default:
                "bg-[#3B82F6] text-white shadow hover:bg-[#3B82F6]/90",
              destructive:
                "bg-[#EF4444] text-white shadow-sm hover:bg-[#EF4444]/90",
              outline:
                "border border-[#334155] bg-transparent text-[#F1F5F9] shadow-sm hover:bg-[#1E293B] hover:text-[#F1F5F9]",
              secondary:
                "bg-[#1E293B] text-[#F1F5F9] shadow-sm hover:bg-[#1E293B]/80",
              ghost: "text-[#F1F5F9] hover:bg-[#1E293B] hover:text-[#F1F5F9]",
              link: "text-[#3B82F6] underline-offset-4 hover:underline",
            },
            size: {
              default: "h-9 px-4 py-2",
              sm: "h-8 rounded-md px-3 text-xs",
              lg: "h-10 rounded-md px-8",
              icon: "h-9 w-9",
            },
          },
          defaultVariants: {
            variant: "default",
            size: "default",
          },
        }
      )

      export interface ButtonProps
        extends React.ButtonHTMLAttributes<HTMLButtonElement>,
          VariantProps<typeof buttonVariants> {
        asChild?: boolean
      }

      const Button = React.forwardRef<HTMLButtonElement, ButtonProps>(
        ({ className, variant, size, asChild = false, ...props }, ref) => {
          const Comp = asChild ? Slot : "button"
          return (
            <Comp
              className={cn(buttonVariants({ variant, size, className }))}
              ref={ref}
              {...props}
            />
          )
        }
      )
      Button.displayName = "Button"

      export { Button, buttonVariants }

    components/ui/card.tsx: >+
      import * as React from "react"


      import { cn } from "@/lib/utils"


      const Card = React.forwardRef<
        HTMLDivElement,
        React.HTMLAttributes<HTMLDivElement>
      >(({ className, ...props }, ref) => (
        <div
          ref={ref}
          className={cn(
            "rounded-lg border bg-card text-card-foreground shadow-sm",
            className,
          )}
          {...props}
        />
      ))

      Card.displayName = "Card"


      const CardHeader = React.forwardRef<
        HTMLDivElement,
        React.HTMLAttributes<HTMLDivElement>
      >(({ className, ...props }, ref) => (
        <div
          ref={ref}
          className={cn("flex flex-col space-y-1.5 p-6", className)}
          {...props}
        />
      ))

      CardHeader.displayName = "CardHeader"


      const CardTitle = React.forwardRef<
        HTMLParagraphElement,
        React.HTMLAttributes<HTMLHeadingElement>
      >(({ className, ...props }, ref) => (
        <h3
          ref={ref}
          className={cn(
            "text-2xl font-semibold leading-none tracking-tight",
            className,
          )}
          {...props}
        />
      ))

      CardTitle.displayName = "CardTitle"


      const CardDescription = React.forwardRef<
        HTMLParagraphElement,
        React.HTMLAttributes<HTMLParagraphElement>
      >(({ className, ...props }, ref) => (
        <p
          ref={ref}
          className={cn("text-sm text-muted-foreground", className)}
          {...props}
        />
      ))

      CardDescription.displayName = "CardDescription"


      const CardContent = React.forwardRef<
        HTMLDivElement,
        React.HTMLAttributes<HTMLDivElement>
      >(({ className, ...props }, ref) => (
        <div ref={ref} className={cn("p-6 pt-0", className)} {...props} />
      ))

      CardContent.displayName = "CardContent"


      const CardFooter = React.forwardRef<
        HTMLDivElement,
        React.HTMLAttributes<HTMLDivElement>
      >(({ className, ...props }, ref) => (
        <div
          ref={ref}
          className={cn("flex items-center p-6 pt-0", className)}
          {...props}
        />
      ))

      CardFooter.displayName = "CardFooter"


      export { Card, CardHeader, CardFooter, CardTitle, CardDescription,
      CardContent }

    lib/utils.ts: |
      import { clsx, type ClassValue } from 'clsx';
      import { twMerge } from 'tailwind-merge';

      export function cn(...inputs: ClassValue[]) {
        return twMerge(clsx(inputs));
      }
    package.json: |+
      {
        "name": "uib-module",
        "packageManager": "bun",
        "private": true,
        "version": "0.0.0",
        "type": "module",
        "scripts": {
          "lint": "eslint ."
        },
        "dependencies": {
          "@radix-ui/react-dialog": "^1.1.15",
          "@radix-ui/react-dropdown-menu": "^2.1.16",
          "@radix-ui/react-icons": "1.3.0",
          "@radix-ui/react-progress": "^1.1.7",
          "@radix-ui/react-select": "^2.2.6",
          "@radix-ui/react-separator": "^1.1.7",
          "@radix-ui/react-slot": "^1.2.3",
          "@uibakery/data": "0.0.11",
          "canvas-confetti": "1.9.3",
          "class-variance-authority": "0.7.0",
          "clsx": "2.1.1",
          "leaflet": "^1.9.4",
          "lucide-react": "0.446.0",
          "react": "18.3.1",
          "react-day-picker": "^9.7.0",
          "react-dom": "18.3.1",
          "react-icons": "~5.5.0",
          "react-leaflet": "^4.2.1",
          "recharts": "^2.14.1",
          "tailwind-merge": "2.5.2"
        },
        "devDependencies": {
          "@eslint/js": "9.11.1",
          "@types/leaflet": "^1.9.12",
          "@types/node": "22.7.3",
          "@types/react": "18.3.9",
          "@types/react-dom": "18.3.0",
          "autoprefixer": "10.4.20",
          "eslint": "9.11.1",
          "eslint-plugin-react-hooks": "5.1.0-rc.0",
          "eslint-plugin-react-refresh": "0.4.12",
          "globals": "15.9.0",
          "postcss": "8.4.47",
          "tailwindcss": "3.4.13",
          "typescript": "5.5.3",
          "typescript-eslint": "8.7.0"
        }
      }

    initial.md: >+
      # Requirements

      ## Summary

      A Logistics Dashboard application designed for logistics managers and
      operations teams to monitor and manage shipments, vehicles, inventory, and
      performance metrics in real-time. The application provides comprehensive
      data visualizations, interactive maps for vehicle tracking, and KPI
      summaries to optimize logistics operations and improve decision-making.
      Users can filter and drill down into detailed data to analyze shipment
      statuses, inventory levels, and overall logistics efficiency.


      ## Use cases

      - Dashboard Overview with Navigation and KPIs
        1) User lands on the main dashboard page with a navigation bar
        2) User sees key performance indicators (KPIs) displayed prominently in cards
        3) User views real-time data visualizations including line charts for shipment trends and bar graphs for inventory levels
        4) User can navigate between different sections using the navigation bar
        5) User applies filters to sort data by date, status, or location
        
      - Shipments Management
        1) User clicks on 'Shipments' in the navigation bar
        2) User views a table of all shipments with details like tracking number, status, origin, destination, and delivery date
        3) User filters shipments by status (In Transit, Delivered, Pending, Delayed)
        4) User clicks on a shipment row to view detailed information
        5) User sees a timeline visualization of shipment progress

      - Vehicle Tracking
        1) User navigates to 'Vehicles' section
        2) User sees an interactive map displaying current vehicle locations with markers
        3) User views vehicle routes and real-time positions
        4) User clicks on a vehicle marker to see vehicle details (ID, driver, status, current location)
        5) User filters vehicles by status (Active, Idle, Maintenance)

      - Inventory Management
        1) User accesses 'Inventory' section from navigation
        2) User views inventory levels displayed in bar charts and tables
        3) User sees stock status indicators (In Stock, Low Stock, Out of Stock)
        4) User filters inventory by location or category
        5) User clicks on inventory items for detailed information

      - Performance Metrics Analysis
        1) User navigates to 'Performance Metrics' section
        2) User views detailed analytics with multiple chart types (line, bar, pie)
        3) User sees metrics like on-time delivery rate, average delivery time, and fuel efficiency
        4) User applies date range filters to analyze trends over time
        5) User exports or downloads performance reports

      ## Plan

      ### Dashboard Overview with Navigation and KPIs

      1. [x] Create the main app shell with a responsive navigation bar
      containing links to Shipments, Vehicles, Inventory, and Performance
      Metrics sections

      2. [x] Implement a KPI summary section with cards displaying key metrics
      (Total Shipments, Active Vehicles, Inventory Items, On-Time Delivery Rate)

      3. [x] Create a line chart component showing shipment status trends over
      time using mock data

      4. [x] Build a bar chart component displaying inventory levels by category

      5. [x] Add filter controls (date picker, status dropdown, location
      dropdown) that update all visualizations

      6. [x] Implement responsive layout using Tailwind grid system for
      dashboard widgets

      7. [x] Add interactivity to charts for drill-down capabilities (click to
      see details)


      ### Shipments Management

      1. [x] Create a Shipments page component with a data table displaying
      shipment records

      2. [x] Generate mock data for shipments including tracking numbers,
      status, origin, destination, dates, and progress

      3. [x] Implement status filter dropdown with options (All, In Transit,
      Delivered, Pending, Delayed)

      4. [x] Add search functionality to find shipments by tracking number

      5. [x] Create a shipment detail modal/panel that opens when clicking a
      table row

      6. [x] Build a timeline visualization component showing shipment progress
      stages

      7. [x] Add date range filter to view shipments within specific periods


      ### Vehicle Tracking

      1. [x] Create a Vehicles page component with map integration

      2. [x] Implement an interactive map component displaying vehicle markers
      with current locations

      3. [x] Generate mock data for vehicles including vehicle ID, driver name,
      status, coordinates, and routes

      4. [x] Add vehicle markers to the map with different colors based on
      status (Active: green, Idle: yellow, Maintenance: red)

      5. [x] Create an info panel/tooltip that displays vehicle details when
      clicking on a marker

      6. [x] Implement route visualization showing planned paths on the map

      7. [x] Add a vehicle list sidebar with filtering options by status

      8. [x] Include real-time status updates simulation with mock data


      ### Inventory Management

      1. [x] Create an Inventory page component with data visualization and
      table views

      2. [x] Generate mock data for inventory items including product name,
      category, quantity, location, and status

      3. [x] Build a bar chart showing inventory levels by category

      4. [x] Create a data table displaying all inventory items with stock
      status indicators

      5. [x] Implement filtering by location and category using dropdowns

      6. [x] Add stock status badges (In Stock: green, Low Stock: yellow, Out of
      Stock: red)

      7. [x] Create an inventory detail modal showing item history and reorder
      information


      ### Performance Metrics Analysis

      1. [x] Create a Performance Metrics page component with comprehensive
      analytics

      2. [x] Generate mock performance data including on-time delivery rates,
      average delivery times, fuel efficiency, and cost metrics

      3. [x] Build multiple chart components (line chart for delivery trends,
      pie chart for shipment distribution, bar chart for vehicle performance)

      4. [x] Implement date range selector to filter metrics by time period

      5. [x] Create metric comparison cards showing current vs. previous period
      performance

      6. [x] Add a summary statistics panel with percentage changes and trend
      indicators

      7. [x] Implement export functionality to download performance reports as
      CSV or PDF

    components/ui/select.tsx: >+
      import * as React from "react"

      import * as SelectPrimitive from "@radix-ui/react-select"

      import { cn } from "@/lib/utils"

      import { CheckIcon, ChevronDownIcon, ChevronUpIcon } from
      "@radix-ui/react-icons"


      const Select = SelectPrimitive.Root


      const SelectGroup = SelectPrimitive.Group


      const SelectValue = SelectPrimitive.Value


      const SelectTrigger = React.forwardRef<
        React.ElementRef<typeof SelectPrimitive.Trigger>,
        React.ComponentPropsWithoutRef<typeof SelectPrimitive.Trigger>
      >(({ className, children, ...props }, ref) => (
        <SelectPrimitive.Trigger
          ref={ref}
          className={cn(
            "flex h-9 w-full items-center justify-between whitespace-nowrap rounded-md border border-input bg-transparent px-3 py-2 text-sm text-[#F1F5F9] shadow-sm ring-offset-background data-[placeholder]:text-[#94A3B8] focus:outline-none focus:ring-1 focus:ring-ring disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",
            className
          )}
          {...props}
        >
          {children}
          <SelectPrimitive.Icon asChild>
            <ChevronDownIcon className="h-4 w-4 text-[#94A3B8]" />
          </SelectPrimitive.Icon>
        </SelectPrimitive.Trigger>
      ))

      SelectTrigger.displayName = SelectPrimitive.Trigger.displayName


      const SelectScrollUpButton = React.forwardRef<
        React.ElementRef<typeof SelectPrimitive.ScrollUpButton>,
        React.ComponentPropsWithoutRef<typeof SelectPrimitive.ScrollUpButton>
      >(({ className, ...props }, ref) => (
        <SelectPrimitive.ScrollUpButton
          ref={ref}
          className={cn(
            "flex cursor-default items-center justify-center py-1",
            className
          )}
          {...props}
        >
          <ChevronUpIcon className="h-4 w-4" />
        </SelectPrimitive.ScrollUpButton>
      ))

      SelectScrollUpButton.displayName =
      SelectPrimitive.ScrollUpButton.displayName


      const SelectScrollDownButton = React.forwardRef<
        React.ElementRef<typeof SelectPrimitive.ScrollDownButton>,
        React.ComponentPropsWithoutRef<typeof SelectPrimitive.ScrollDownButton>
      >(({ className, ...props }, ref) => (
        <SelectPrimitive.ScrollDownButton
          ref={ref}
          className={cn(
            "flex cursor-default items-center justify-center py-1",
            className
          )}
          {...props}
        >
          <ChevronDownIcon className="h-4 w-4" />
        </SelectPrimitive.ScrollDownButton>
      ))

      SelectScrollDownButton.displayName =
        SelectPrimitive.ScrollDownButton.displayName

      const SelectContent = React.forwardRef<
        React.ElementRef<typeof SelectPrimitive.Content>,
        React.ComponentPropsWithoutRef<typeof SelectPrimitive.Content>
      >(({ className, children, position = "popper", ...props }, ref) => (
        <SelectPrimitive.Portal>
          <SelectPrimitive.Content
            ref={ref}
            className={cn(
              "relative z-50 max-h-[--radix-select-content-available-height] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border border-[#334155] bg-[#1E293B] text-[#F1F5F9] shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-select-content-transform-origin]",
              position === "popper" &&
                "data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",
              className
            )}
            position={position}
            {...props}
          >
            <SelectScrollUpButton />
            <SelectPrimitive.Viewport
              className={cn(
                "p-1",
                position === "popper" &&
                  "h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"
              )}
            >
              {children}
            </SelectPrimitive.Viewport>
            <SelectScrollDownButton />
          </SelectPrimitive.Content>
        </SelectPrimitive.Portal>
      ))

      SelectContent.displayName = SelectPrimitive.Content.displayName


      const SelectLabel = React.forwardRef<
        React.ElementRef<typeof SelectPrimitive.Label>,
        React.ComponentPropsWithoutRef<typeof SelectPrimitive.Label>
      >(({ className, ...props }, ref) => (
        <SelectPrimitive.Label
          ref={ref}
          className={cn("px-2 py-1.5 text-sm font-semibold", className)}
          {...props}
        />
      ))

      SelectLabel.displayName = SelectPrimitive.Label.displayName


      const SelectItem = React.forwardRef<
        React.ElementRef<typeof SelectPrimitive.Item>,
        React.ComponentPropsWithoutRef<typeof SelectPrimitive.Item>
      >(({ className, children, ...props }, ref) => (
        <SelectPrimitive.Item
          ref={ref}
          className={cn(
            "relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-2 pr-8 text-sm text-[#F1F5F9] outline-none focus:bg-[#0F172A] focus:text-[#F1F5F9] data-[disabled]:pointer-events-none data-[disabled]:opacity-50",
            className
          )}
          {...props}
        >
          <span className="absolute right-2 flex h-3.5 w-3.5 items-center justify-center">
            <SelectPrimitive.ItemIndicator>
              <CheckIcon className="h-4 w-4" />
            </SelectPrimitive.ItemIndicator>
          </span>
          <SelectPrimitive.ItemText>{children}</SelectPrimitive.ItemText>
        </SelectPrimitive.Item>
      ))

      SelectItem.displayName = SelectPrimitive.Item.displayName


      const SelectSeparator = React.forwardRef<
        React.ElementRef<typeof SelectPrimitive.Separator>,
        React.ComponentPropsWithoutRef<typeof SelectPrimitive.Separator>
      >(({ className, ...props }, ref) => (
        <SelectPrimitive.Separator
          ref={ref}
          className={cn("-mx-1 my-1 h-px bg-muted", className)}
          {...props}
        />
      ))

      SelectSeparator.displayName = SelectPrimitive.Separator.displayName


      export {
        Select,
        SelectGroup,
        SelectValue,
        SelectTrigger,
        SelectContent,
        SelectLabel,
        SelectItem,
        SelectSeparator,
        SelectScrollUpButton,
        SelectScrollDownButton,
      }

    components/ui/badge.tsx: |+

      import * as React from "react"
      import { cva, type VariantProps } from "class-variance-authority"

      import { cn } from "@/lib/utils"

      const badgeVariants = cva(
        "inline-flex items-center rounded-md border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",
        {
          variants: {
            variant: {
              default:
                "border-transparent bg-[#3B82F6] text-white shadow hover:bg-[#3B82F6]/80",
              secondary:
                "border-transparent bg-[#1E293B] text-[#F1F5F9] hover:bg-[#1E293B]/80",
              destructive:
                "border-transparent bg-[#EF4444] text-white shadow hover:bg-[#EF4444]/80",
              outline: "text-[#F1F5F9] border-[#334155]",
            },
          },
          defaultVariants: {
            variant: "default",
          },
        }
      )

      export interface BadgeProps
        extends React.HTMLAttributes<HTMLDivElement>,
          VariantProps<typeof badgeVariants> {}

      function Badge({ className, variant, ...props }: BadgeProps) {
        return (
          <div className={cn(badgeVariants({ variant }), className)} {...props} />
        )
      }

      export { Badge, badgeVariants }

    components/ui/separator.tsx: |+

      "use client"

      import * as React from "react"
      import * as SeparatorPrimitive from "@radix-ui/react-separator"

      import { cn } from "@/lib/utils"

      const Separator = React.forwardRef<
        React.ElementRef<typeof SeparatorPrimitive.Root>,
        React.ComponentPropsWithoutRef<typeof SeparatorPrimitive.Root>
      >(
        (
          { className, orientation = "horizontal", decorative = true, ...props },
          ref
        ) => (
          <SeparatorPrimitive.Root
            ref={ref}
            decorative={decorative}
            orientation={orientation}
            className={cn(
              "shrink-0 bg-border",
              orientation === "horizontal" ? "h-[1px] w-full" : "h-full w-[1px]",
              className
            )}
            {...props}
          />
        )
      )
      Separator.displayName = SeparatorPrimitive.Root.displayName

      export { Separator }

    components/ui/dropdown-menu.tsx: >+

      import * as React from "react"

      import * as DropdownMenuPrimitive from "@radix-ui/react-dropdown-menu"

      import { cn } from "@/lib/utils"

      import { CheckIcon, ChevronRightIcon, DotFilledIcon } from
      "@radix-ui/react-icons"


      const DropdownMenu = DropdownMenuPrimitive.Root


      const DropdownMenuTrigger = DropdownMenuPrimitive.Trigger


      const DropdownMenuGroup = DropdownMenuPrimitive.Group


      const DropdownMenuPortal = DropdownMenuPrimitive.Portal


      const DropdownMenuSub = DropdownMenuPrimitive.Sub


      const DropdownMenuRadioGroup = DropdownMenuPrimitive.RadioGroup


      const DropdownMenuSubTrigger = React.forwardRef<
        React.ElementRef<typeof DropdownMenuPrimitive.SubTrigger>,
        React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.SubTrigger> & {
          inset?: boolean
        }
      >(({ className, inset, children, ...props }, ref) => (
        <DropdownMenuPrimitive.SubTrigger
          ref={ref}
          className={cn(
            "flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",
            inset && "pl-8",
            className
          )}
          {...props}
        >
          {children}
          <ChevronRightIcon className="ml-auto" />
        </DropdownMenuPrimitive.SubTrigger>
      ))

      DropdownMenuSubTrigger.displayName =
        DropdownMenuPrimitive.SubTrigger.displayName

      const DropdownMenuSubContent = React.forwardRef<
        React.ElementRef<typeof DropdownMenuPrimitive.SubContent>,
        React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.SubContent>
      >(({ className, ...props }, ref) => (
        <DropdownMenuPrimitive.SubContent
          ref={ref}
          className={cn(
            "z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]",
            className
          )}
          {...props}
        />
      ))

      DropdownMenuSubContent.displayName =
        DropdownMenuPrimitive.SubContent.displayName

      const DropdownMenuContent = React.forwardRef<
        React.ElementRef<typeof DropdownMenuPrimitive.Content>,
        React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Content>
      >(({ className, sideOffset = 4, ...props }, ref) => (
        <DropdownMenuPrimitive.Portal>
          <DropdownMenuPrimitive.Content
            ref={ref}
            sideOffset={sideOffset}
            className={cn(
              "z-50 max-h-[var(--radix-dropdown-menu-content-available-height)] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md",
              "data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]",
              className
            )}
            {...props}
          />
        </DropdownMenuPrimitive.Portal>
      ))

      DropdownMenuContent.displayName =
      DropdownMenuPrimitive.Content.displayName


      const DropdownMenuItem = React.forwardRef<
        React.ElementRef<typeof DropdownMenuPrimitive.Item>,
        React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Item> & {
          inset?: boolean
        }
      >(({ className, inset, ...props }, ref) => (
        <DropdownMenuPrimitive.Item
          ref={ref}
          className={cn(
            "relative flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&>svg]:size-4 [&>svg]:shrink-0",
            inset && "pl-8",
            className
          )}
          {...props}
        />
      ))

      DropdownMenuItem.displayName = DropdownMenuPrimitive.Item.displayName


      const DropdownMenuCheckboxItem = React.forwardRef<
        React.ElementRef<typeof DropdownMenuPrimitive.CheckboxItem>,
        React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.CheckboxItem>
      >(({ className, children, checked, ...props }, ref) => (
        <DropdownMenuPrimitive.CheckboxItem
          ref={ref}
          className={cn(
            "relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",
            className
          )}
          checked={checked}
          {...props}
        >
          <span className="absolute left-2 flex h-3.5 w-3.5 items-center justify-center">
            <DropdownMenuPrimitive.ItemIndicator>
              <CheckIcon className="h-4 w-4" />
            </DropdownMenuPrimitive.ItemIndicator>
          </span>
          {children}
        </DropdownMenuPrimitive.CheckboxItem>
      ))

      DropdownMenuCheckboxItem.displayName =
        DropdownMenuPrimitive.CheckboxItem.displayName

      const DropdownMenuRadioItem = React.forwardRef<
        React.ElementRef<typeof DropdownMenuPrimitive.RadioItem>,
        React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.RadioItem>
      >(({ className, children, ...props }, ref) => (
        <DropdownMenuPrimitive.RadioItem
          ref={ref}
          className={cn(
            "relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",
            className
          )}
          {...props}
        >
          <span className="absolute left-2 flex h-3.5 w-3.5 items-center justify-center">
            <DropdownMenuPrimitive.ItemIndicator>
              <DotFilledIcon className="h-2 w-2 fill-current" />
            </DropdownMenuPrimitive.ItemIndicator>
          </span>
          {children}
        </DropdownMenuPrimitive.RadioItem>
      ))

      DropdownMenuRadioItem.displayName =
      DropdownMenuPrimitive.RadioItem.displayName


      const DropdownMenuLabel = React.forwardRef<
        React.ElementRef<typeof DropdownMenuPrimitive.Label>,
        React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Label> & {
          inset?: boolean
        }
      >(({ className, inset, ...props }, ref) => (
        <DropdownMenuPrimitive.Label
          ref={ref}
          className={cn(
            "px-2 py-1.5 text-sm font-semibold",
            inset && "pl-8",
            className
          )}
          {...props}
        />
      ))

      DropdownMenuLabel.displayName = DropdownMenuPrimitive.Label.displayName


      const DropdownMenuSeparator = React.forwardRef<
        React.ElementRef<typeof DropdownMenuPrimitive.Separator>,
        React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Separator>
      >(({ className, ...props }, ref) => (
        <DropdownMenuPrimitive.Separator
          ref={ref}
          className={cn("-mx-1 my-1 h-px bg-muted", className)}
          {...props}
        />
      ))

      DropdownMenuSeparator.displayName =
      DropdownMenuPrimitive.Separator.displayName


      const DropdownMenuShortcut = ({
        className,
        ...props
      }: React.HTMLAttributes<HTMLSpanElement>) => {
        return (
          <span
            className={cn("ml-auto text-xs tracking-widest opacity-60", className)}
            {...props}
          />
        )
      }

      DropdownMenuShortcut.displayName = "DropdownMenuShortcut"


      export {
        DropdownMenu,
        DropdownMenuTrigger,
        DropdownMenuContent,
        DropdownMenuItem,
        DropdownMenuCheckboxItem,
        DropdownMenuRadioItem,
        DropdownMenuLabel,
        DropdownMenuSeparator,
        DropdownMenuShortcut,
        DropdownMenuGroup,
        DropdownMenuPortal,
        DropdownMenuSub,
        DropdownMenuSubContent,
        DropdownMenuSubTrigger,
        DropdownMenuRadioGroup,
      }

    lib/types.ts: >
      export type ShipmentStatus = 'In Transit' | 'Delivered' | 'Pending' |
      'Delayed';

      export type VehicleStatus = 'Active' | 'Idle' | 'Maintenance';

      export type InventoryStatus = 'In Stock' | 'Low Stock' | 'Out of Stock';

      export type AlertType = 'shipment_delayed' | 'vehicle_maintenance' |
      'low_stock' | 'delivery_completed' | 'vehicle_idle' | 'high_priority';

      export type AlertSeverity = 'critical' | 'warning' | 'info';


      export interface User {
        id: number;
        email: string;
        name: string;
        role: string;
        created_at?: string;
      }


      export interface Alert {
        id: number;
        alert_type: AlertType;
        severity: AlertSeverity;
        title: string;
        message: string;
        entity_type?: 'shipment' | 'vehicle' | 'inventory' | 'general';
        entity_id?: number;
        is_read: boolean;
        is_dismissed: boolean;
        created_at: string;
        read_at?: string;
        dismissed_at?: string;
      }


      export interface VehicleGPSHistory {
        id: number;
        vehicle_id: number;
        latitude: number;
        longitude: number;
        location_address: string;
        speed?: number;
        heading?: number;
        recorded_at: string;
      }


      // Database schema (snake_case)

      export interface ShipmentDB {
        id: number;
        tracking_number: string;
        status: ShipmentStatus;
        origin: string;
        destination: string;
        departure_date: string;
        estimated_delivery: string;
        actual_delivery?: string;
        progress: number;
        created_at: string;
        updated_at: string;
      }


      // Component-friendly (camelCase) - for existing components

      export interface Shipment {
        id: string;
        trackingNumber: string;
        status: ShipmentStatus;
        origin: string;
        destination: string;
        departureDate: string;
        estimatedDelivery: string;
        actualDelivery?: string;
        progress: number;
      }


      export interface VehicleDB {
        id: number;
        vehicle_number: string;
        driver_name: string;
        status: VehicleStatus;
        latitude: number;
        longitude: number;
        location_address: string;
        current_load: number;
        max_capacity: number;
        created_at: string;
        updated_at: string;
      }


      export interface Vehicle {
        id: string;
        vehicleNumber: string;
        driver: string;
        status: VehicleStatus;
        location: {
          lat: number;
          lng: number;
          address: string;
        };
        currentLoad: number;
        maxCapacity: number;
      }


      export interface InventoryItemDB {
        id: number;
        product_name: string;
        category: string;
        quantity: number;
        location: string;
        status: InventoryStatus;
        reorder_level: number;
        last_restocked: string;
        created_at: string;
        updated_at: string;
      }


      export interface InventoryItem {
        id: string;
        productName: string;
        category: string;
        quantity: number;
        location: string;
        status: InventoryStatus;
        reorderLevel: number;
        lastRestocked: string;
      }


      export interface KPI {
        label: string;
        value: string | number;
        change: number;
        trend: 'up' | 'down' | 'neutral';
      }


      export interface ChartDataPoint {
        date: string;
        value: number;
        label?: string;
      }


      export interface ShipmentTrendData {
        date: string;
        inTransit: number;
        delivered: number;
        pending: number;
        delayed: number;
      }


      export interface PerformanceMetricDB {
        month: string;
        year: number;
        on_time_delivery: number;
        avg_delivery_time: number;
        fuel_efficiency: number;
        cost: number;
        created_at: string;
      }


      export interface PerformanceMetric {
        month: string;
        onTimeDelivery: number;
        avgDeliveryTime: number;
        fuelEfficiency: number;
        cost: number;
      }


      export interface VehiclePerformanceDB {
        vehicle_id: number;
        vehicle_number: string;
        deliveries: number;
        avg_speed: number;
        fuel_used: number;
        efficiency: number;
        recorded_at: string;
      }


      export interface VehiclePerformance {
        vehicleId: string;
        deliveries: number;
        avgSpeed: number;
        fuelUsed: number;
        efficiency: number;
      }


      export interface StatusDistributionData {
        name: string;
        value: number;
        color: string;
      }


      export interface ShipmentTimelineEvent {
        id: number;
        event_type: string;
        location: string;
        description?: string;
        event_date: string;
      }


      export interface InventoryHistoryEvent {
        id: number;
        action: string;
        quantity_change: number;
        location: string;
        event_date: string;
        created_at: string;
      }
    lib/mockData.ts: >
      import type { Shipment, Vehicle, InventoryItem, KPI, ShipmentTrendData,
      PerformanceMetric, VehiclePerformance } from './types';


      export const generateShipmentTrendData = (filters?: { status?: string;
      location?: string; dateRange?: string }): ShipmentTrendData[] => {
        const months = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct'];
        
        return months.map((month) => {
          const baseInTransit = Math.floor(Math.random() * 50) + 30;
          const baseDelivered = Math.floor(Math.random() * 80) + 60;
          const basePending = Math.floor(Math.random() * 20) + 10;
          const baseDelayed = Math.floor(Math.random() * 15) + 5;

          if (!filters || (filters.status === 'all' && filters.location === 'all' && filters.dateRange === '30days')) {
            return {
              date: month,
              inTransit: baseInTransit,
              delivered: baseDelivered,
              pending: basePending,
              delayed: baseDelayed,
            };
          }

          const multiplier = filters.status === 'Delivered' ? 1.5 : 
                             filters.status === 'In Transit' ? 1.3 : 
                             filters.status === 'Pending' ? 0.7 : 
                             filters.location !== 'all' ? 0.8 :
                             filters.dateRange === '7days' ? 0.6 :
                             filters.dateRange === '90days' ? 1.4 : 1;

          return {
            date: month,
            inTransit: Math.floor(baseInTransit * (filters.status === 'In Transit' ? multiplier : multiplier * 0.8)),
            delivered: Math.floor(baseDelivered * (filters.status === 'Delivered' ? multiplier : multiplier * 0.9)),
            pending: Math.floor(basePending * (filters.status === 'Pending' ? multiplier : multiplier * 0.7)),
            delayed: Math.floor(baseDelayed * (filters.status === 'Delayed' ? multiplier : multiplier * 0.6)),
          };
        });
      };


      export const generateInventoryData = (filters?: { status?: string;
      location?: string; dateRange?: string }): { category: string; quantity:
      number }[] => {
        const baseData = [
          { category: 'Electronics', quantity: 450 },
          { category: 'Furniture', quantity: 320 },
          { category: 'Clothing', quantity: 680 },
          { category: 'Food', quantity: 540 },
          { category: 'Automotive', quantity: 290 },
          { category: 'Books', quantity: 410 },
        ];

        if (!filters || (filters.status === 'all' && filters.location === 'all' && filters.dateRange === '30days')) {
          return baseData;
        }

        const multiplier = filters.status === 'Delivered' ? 0.8 : 
                           filters.status === 'In Transit' ? 1.2 : 
                           filters.status === 'Pending' ? 0.6 : 
                           filters.location !== 'all' ? 0.7 :
                           filters.dateRange === '7days' ? 0.5 :
                           filters.dateRange === '90days' ? 1.3 : 1;

        return baseData.map(item => ({
          ...item,
          quantity: Math.floor(item.quantity * multiplier),
        }));
      };


      export const generateKPIs = (): KPI[] => {
        return [
          {
            label: 'Total Shipments',
            value: 1247,
            change: 12.5,
            trend: 'up',
          },
          {
            label: 'Active Vehicles',
            value: 89,
            change: -3.2,
            trend: 'down',
          },
          {
            label: 'Inventory Items',
            value: '2.7K',
            change: 5.8,
            trend: 'up',
          },
          {
            label: 'On-Time Delivery',
            value: '94.3%',
            change: 2.1,
            trend: 'up',
          },
        ];
      };


      export const generateShipments = (): Shipment[] => {
        const statuses: Array<'In Transit' | 'Delivered' | 'Pending' | 'Delayed'> = ['In Transit', 'Delivered', 'Pending', 'Delayed'];
        const origins = ['New York', 'Los Angeles', 'Chicago', 'Houston', 'Phoenix'];
        const destinations = ['Miami', 'Seattle', 'Boston', 'Denver', 'Atlanta'];

        return Array.from({ length: 50 }, (_, i) => ({
          id: `SHP-${1000 + i}`,
          trackingNumber: `TRK${Math.random().toString(36).substr(2, 9).toUpperCase()}`,
          status: statuses[Math.floor(Math.random() * statuses.length)],
          origin: origins[Math.floor(Math.random() * origins.length)],
          destination: destinations[Math.floor(Math.random() * destinations.length)],
          departureDate: new Date(2025, 9, Math.floor(Math.random() * 10) + 1).toISOString().split('T')[0],
          estimatedDelivery: new Date(2025, 9, Math.floor(Math.random() * 10) + 11).toISOString().split('T')[0],
          actualDelivery: Math.random() > 0.5 ? new Date(2025, 9, Math.floor(Math.random() * 10) + 11).toISOString().split('T')[0] : undefined,
          progress: Math.floor(Math.random() * 100),
        }));
      };


      export const generateVehicles = (): Vehicle[] => {
        const statuses: Array<'Active' | 'Idle' | 'Maintenance'> = ['Active', 'Idle', 'Maintenance'];
        const drivers = ['John Doe', 'Jane Smith', 'Mike Johnson', 'Sarah Williams', 'Tom Brown', 'Lisa Davis', 'Chris Wilson', 'Emily Anderson', 'David Martinez', 'Jessica Taylor'];
        
        const baseLocations = [
          { lat: 40.7128, lng: -74.0060, address: 'New York, NY' },
          { lat: 34.0522, lng: -118.2437, address: 'Los Angeles, CA' },
          { lat: 41.8781, lng: -87.6298, address: 'Chicago, IL' },
          { lat: 29.7604, lng: -95.3698, address: 'Houston, TX' },
          { lat: 33.4484, lng: -112.0740, address: 'Phoenix, AZ' },
          { lat: 39.7392, lng: -104.9903, address: 'Denver, CO' },
          { lat: 47.6062, lng: -122.3321, address: 'Seattle, WA' },
          { lat: 25.7617, lng: -80.1918, address: 'Miami, FL' },
          { lat: 42.3601, lng: -71.0589, address: 'Boston, MA' },
          { lat: 33.7490, lng: -84.3880, address: 'Atlanta, GA' },
          { lat: 36.1627, lng: -86.7816, address: 'Nashville, TN' },
          { lat: 32.7767, lng: -96.7970, address: 'Dallas, TX' },
          { lat: 38.9072, lng: -77.0369, address: 'Washington, DC' },
          { lat: 37.7749, lng: -122.4194, address: 'San Francisco, CA' },
          { lat: 45.5152, lng: -122.6784, address: 'Portland, OR' },
        ];

        return Array.from({ length: 25 }, (_, i) => {
          const baseLocation = baseLocations[i % baseLocations.length];
          const location = {
            lat: baseLocation.lat + (Math.random() - 0.5) * 0.5,
            lng: baseLocation.lng + (Math.random() - 0.5) * 0.5,
            address: baseLocation.address,
          };

          return {
            id: `VEH-${2000 + i}`,
            vehicleNumber: `VN-${Math.random().toString(36).substr(2, 6).toUpperCase()}`,
            driver: drivers[Math.floor(Math.random() * drivers.length)],
            status: statuses[Math.floor(Math.random() * statuses.length)],
            location,
            currentLoad: Math.floor(Math.random() * 5000),
            maxCapacity: 5000,
          };
        });
      };


      export const generateInventoryItems = (): InventoryItem[] => {
        const categories = ['Electronics', 'Furniture', 'Clothing', 'Food', 'Automotive', 'Books'];
        const locations = ['Warehouse A', 'Warehouse B', 'Warehouse C', 'Distribution Center'];
        const statuses: Array<'In Stock' | 'Low Stock' | 'Out of Stock'> = ['In Stock', 'Low Stock', 'Out of Stock'];

        return Array.from({ length: 60 }, (_, i) => {
          const quantity = Math.floor(Math.random() * 1000);
          const reorderLevel = 100;
          let status: 'In Stock' | 'Low Stock' | 'Out of Stock' = 'In Stock';
          
          if (quantity === 0) {
            status = 'Out of Stock';
          } else if (quantity < reorderLevel) {
            status = 'Low Stock';
          }

          return {
            id: `INV-${3000 + i}`,
            productName: `Product ${i + 1}`,
            category: categories[Math.floor(Math.random() * categories.length)],
            quantity,
            location: locations[Math.floor(Math.random() * locations.length)],
            status,
            reorderLevel,
            lastRestocked: new Date(2025, 9, Math.floor(Math.random() * 30) + 1).toISOString().split('T')[0],
          };
        });
      };


      export const generatePerformanceMetrics = (): PerformanceMetric[] => {
        const months = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'];
        return months.map((month) => ({
          month,
          onTimeDelivery: Math.floor(Math.random() * 15) + 85,
          avgDeliveryTime: Math.floor(Math.random() * 3) + 2,
          fuelEfficiency: Math.floor(Math.random() * 4) + 8,
          cost: Math.floor(Math.random() * 20000) + 30000,
        }));
      };


      export const generateVehiclePerformance = (): VehiclePerformance[] => {
        return Array.from({ length: 10 }, (_, i) => ({
          vehicleId: `VEH-${2000 + i}`,
          deliveries: Math.floor(Math.random() * 50) + 20,
          avgSpeed: Math.floor(Math.random() * 20) + 60,
          fuelUsed: Math.floor(Math.random() * 500) + 300,
          efficiency: Math.floor(Math.random() * 30) + 70,
        }));
      };


      export const generateStatusDistribution = (filters?: { status?: string;
      location?: string; dateRange?: string }) => {
        const baseDelivered = 450;
        const baseInTransit = 320;
        const basePending = 180;
        const baseDelayed = 97;

        if (!filters || (filters.status === 'all' && filters.location === 'all' && filters.dateRange === '30days')) {
          return [
            { name: 'Delivered', value: baseDelivered, color: '#10B981' },
            { name: 'In Transit', value: baseInTransit, color: '#3B82F6' },
            { name: 'Pending', value: basePending, color: '#F59E0B' },
            { name: 'Delayed', value: baseDelayed, color: '#EF4444' },
          ];
        }

        let deliveredStatusMult = 1;
        let inTransitStatusMult = 1;
        let pendingStatusMult = 1;
        let delayedStatusMult = 1;

        let deliveredLocationMult = 1;
        let inTransitLocationMult = 1;
        let pendingLocationMult = 1;
        let delayedLocationMult = 1;

        if (filters.status && filters.status !== 'all') {
          if (filters.status === 'delivered') {
            deliveredStatusMult = 3.5;
            inTransitStatusMult = 0.2;
            pendingStatusMult = 0.15;
            delayedStatusMult = 0.1;
          } else if (filters.status === 'in-transit') {
            deliveredStatusMult = 0.4;
            inTransitStatusMult = 3.2;
            pendingStatusMult = 0.3;
            delayedStatusMult = 0.25;
          } else if (filters.status === 'pending') {
            deliveredStatusMult = 0.3;
            inTransitStatusMult = 0.35;
            pendingStatusMult = 4.0;
            delayedStatusMult = 0.4;
          } else if (filters.status === 'delayed') {
            deliveredStatusMult = 0.25;
            inTransitStatusMult = 0.3;
            pendingStatusMult = 0.35;
            delayedStatusMult = 5.5;
          }
        }

        if (filters.location && filters.location !== 'all') {
          if (filters.location === 'new-york') {
            deliveredLocationMult = 1.2;
            inTransitLocationMult = 0.7;
            pendingLocationMult = 0.5;
            delayedLocationMult = 0.3;
          } else if (filters.location === 'los-angeles') {
            deliveredLocationMult = 0.8;
            inTransitLocationMult = 1.4;
            pendingLocationMult = 0.6;
            delayedLocationMult = 0.9;
          } else if (filters.location === 'chicago') {
            deliveredLocationMult = 0.6;
            inTransitLocationMult = 0.6;
            pendingLocationMult = 1.3;
            delayedLocationMult = 0.6;
          } else if (filters.location === 'houston') {
            deliveredLocationMult = 0.5;
            inTransitLocationMult = 1.1;
            pendingLocationMult = 0.8;
            delayedLocationMult = 1.5;
          }
        }

        let dateMultiplier = 1;
        if (filters.dateRange && filters.dateRange !== '30days') {
          if (filters.dateRange === '7days') {
            dateMultiplier = 0.35;
          } else if (filters.dateRange === '90days') {
            dateMultiplier = 1.9;
          } else if (filters.dateRange === 'year') {
            dateMultiplier = 2.8;
          }
        }

        const delivered = Math.floor(baseDelivered * deliveredStatusMult * deliveredLocationMult * dateMultiplier);
        const inTransit = Math.floor(baseInTransit * inTransitStatusMult * inTransitLocationMult * dateMultiplier);
        const pending = Math.floor(basePending * pendingStatusMult * pendingLocationMult * dateMultiplier);
        const delayed = Math.floor(baseDelayed * delayedStatusMult * delayedLocationMult * dateMultiplier);

        return [
          { name: 'Delivered', value: delivered, color: '#10B981' },
          { name: 'In Transit', value: inTransit, color: '#3B82F6' },
          { name: 'Pending', value: pending, color: '#F59E0B' },
          { name: 'Delayed', value: delayed, color: '#EF4444' },
        ];
      };
    components/Navigation.tsx: >
      import { useState, useEffect } from 'react';

      import { Button } from '@/components/ui/button';

      import { Badge } from '@/components/ui/badge';

      import { LayoutDashboard, Package, Truck, Warehouse, TrendingUp, Menu, X,
      LogOut, Bell } from 'lucide-react';

      import { useLoadAction } from '@uibakery/data';

      import loadAlertsAction from '@/actions/loadAlerts';

      import type { Alert } from '@/lib/types';


      type Section = 'dashboard' | 'shipments' | 'vehicles' | 'inventory' |
      'performance';


      interface NavigationProps {
        activeSection: Section;
        onSectionChange: (section: Section) => void;
        onLogout: () => void;
        userName?: string;
      }


      export function Navigation({ activeSection, onSectionChange, onLogout,
      userName }: NavigationProps) {
        const [mobileMenuOpen, setMobileMenuOpen] = useState(false);
        const [alerts, , , refreshAlerts] = useLoadAction(loadAlertsAction, []);

        useEffect(() => {
          const interval = setInterval(() => {
            refreshAlerts();
          }, 60000);

          return () => clearInterval(interval);
        }, [refreshAlerts]);

        const unreadCount = alerts.filter((a: Alert) => !a.is_read).length;
        const criticalCount = alerts.filter((a: Alert) => a.severity === 'critical' && !a.is_read).length;

        const navItems = [
          { id: 'dashboard' as Section, label: 'Dashboard', icon: LayoutDashboard },
          { id: 'shipments' as Section, label: 'Shipments', icon: Package },
          { id: 'vehicles' as Section, label: 'Vehicles', icon: Truck },
          { id: 'inventory' as Section, label: 'Inventory', icon: Warehouse },
          { id: 'performance' as Section, label: 'Performance Metrics', icon: TrendingUp },
        ];

        return (
          <nav className="bg-[#1E293B] border-b border-[#334155] sticky top-0 z-50">
            <div className="px-4 sm:px-6 lg:px-8">
              <div className="flex justify-between items-center h-16">
                <div className="flex items-center">
                  <Truck className="h-8 w-8 text-[#3B82F6]" />
                  <div className="ml-2">
                    <span className="text-xl font-bold text-[#F1F5F9]">AFGHCO-SHIPPING</span>
                    {userName && <p className="text-xs text-[#94A3B8]">Welcome, {userName}</p>}
                  </div>
                </div>

                {/* Desktop Navigation */}
                <div className="hidden md:flex gap-4 items-center">
                  {navItems.map((item) => {
                    const Icon = item.icon;
                    return (
                      <Button
                        key={item.id}
                        variant={activeSection === item.id ? 'default' : 'ghost'}
                        onClick={() => onSectionChange(item.id)}
                        className="flex items-center gap-2"
                      >
                        <Icon className="h-4 w-4" />
                        {item.label}
                      </Button>
                    );
                  })}
                  
                  {/* Alert Notification Bell */}
                  <div className="relative">
                    <Button
                      variant="ghost"
                      size="icon"
                      onClick={() => onSectionChange('dashboard')}
                      className="relative"
                    >
                      <Bell className="h-5 w-5" />
                      {unreadCount > 0 && (
                        <Badge className={`absolute -top-1 -right-1 h-5 min-w-[20px] flex items-center justify-center text-xs ${
                          criticalCount > 0 ? 'bg-red-600 animate-pulse' : 'bg-blue-600'
                        }`}>
                          {unreadCount}
                        </Badge>
                      )}
                    </Button>
                  </div>

                  <Button
                    variant="ghost"
                    onClick={onLogout}
                    className="flex items-center gap-2 text-red-400 hover:text-red-300 hover:bg-red-950"
                  >
                    <LogOut className="h-4 w-4" />
                    Logout
                  </Button>
                </div>

                {/* Mobile Menu Button */}
                <div className="md:hidden flex items-center gap-2">
                  {unreadCount > 0 && (
                    <div className="relative">
                      <Bell className="h-5 w-5 text-[#F1F5F9]" />
                      <Badge className={`absolute -top-1 -right-1 h-4 min-w-[16px] flex items-center justify-center text-xs ${
                        criticalCount > 0 ? 'bg-red-600 animate-pulse' : 'bg-blue-600'
                      }`}>
                        {unreadCount}
                      </Badge>
                    </div>
                  )}
                  <Button
                    variant="ghost"
                    size="icon"
                    onClick={() => setMobileMenuOpen(!mobileMenuOpen)}
                  >
                    {mobileMenuOpen ? <X className="h-6 w-6" /> : <Menu className="h-6 w-6" />}
                  </Button>
                </div>
              </div>

              {/* Mobile Navigation */}
              {mobileMenuOpen && (
                <div className="md:hidden pb-4 space-y-2">
                  {navItems.map((item) => {
                    const Icon = item.icon;
                    return (
                      <Button
                        key={item.id}
                        variant={activeSection === item.id ? 'default' : 'ghost'}
                        onClick={() => {
                          onSectionChange(item.id);
                          setMobileMenuOpen(false);
                        }}
                        className="w-full justify-start flex items-center gap-2"
                      >
                        <Icon className="h-4 w-4" />
                        {item.label}
                      </Button>
                    );
                  })}
                  <Button
                    variant="ghost"
                    onClick={() => {
                      onLogout();
                      setMobileMenuOpen(false);
                    }}
                    className="w-full justify-start flex items-center gap-2 text-red-400 hover:text-red-300"
                  >
                    <LogOut className="h-4 w-4" />
                    Logout
                  </Button>
                </div>
              )}
            </div>
          </nav>
        );
      }
    components/KPICard.tsx: |
      import { Card, CardContent } from '@/components/ui/card';
      import { TrendingUp, TrendingDown, Minus } from 'lucide-react';
      import type { KPI } from '@/lib/types';
      import { ReactNode } from 'react';

      interface KPICardProps {
        kpi: KPI;
        icon?: ReactNode;
      }

      export function KPICard({ kpi, icon }: KPICardProps) {
        const getTrendIcon = () => {
          if (kpi.trend === 'up') return <TrendingUp className="h-4 w-4" />;
          if (kpi.trend === 'down') return <TrendingDown className="h-4 w-4" />;
          return <Minus className="h-4 w-4" />;
        };

        const getTrendColor = () => {
          if (kpi.trend === 'up') return 'text-[#10B981]';
          if (kpi.trend === 'down') return 'text-[#EF4444]';
          return 'text-[#94A3B8]';
        };

        const getTrendBgColor = () => {
          if (kpi.trend === 'up') return 'bg-[#10B981]/10';
          if (kpi.trend === 'down') return 'bg-[#EF4444]/10';
          return 'bg-[#94A3B8]/10';
        };

        return (
          <Card className="hover:shadow-lg transition-shadow bg-[#1E293B] border-[#334155]">
            <CardContent className="p-6">
              <div className="flex items-start justify-between gap-6">
                <div className="flex-1 min-w-0">
                  <p className="text-sm font-medium text-[#94A3B8] mb-1">{kpi.label}</p>
                  <div className="flex items-center justify-between gap-4">
                    <p className="text-3xl font-bold text-[#F1F5F9]">{kpi.value}</p>
                    <div className={`flex items-center gap-1 px-2 py-1 rounded-full ${getTrendBgColor()}`}>
                      <span className={getTrendColor()}>{getTrendIcon()}</span>
                      <span className={`text-sm font-semibold ${getTrendColor()}`}>
                        {Math.abs(kpi.change)}%
                      </span>
                    </div>
                  </div>
                </div>
                {icon && (
                  <div className="text-[#3B82F6] opacity-80 flex-shrink-0">
                    {icon}
                  </div>
                )}
              </div>
            </CardContent>
          </Card>
        );
      }
    components/ShipmentTrendChart.tsx: >
      import { Card, CardContent, CardHeader, CardTitle } from
      '@/components/ui/card';

      import { LineChart, Line, XAxis, YAxis, CartesianGrid, Tooltip, Legend,
      ResponsiveContainer } from 'recharts';


      interface ShipmentTrendChartProps {
        data: Array<{
          date: string;
          inTransit: number;
          delivered: number;
          pending: number;
          delayed: number;
        }>;
        onDataPointClick?: (data: any) => void;
      }


      export function ShipmentTrendChart({ data, onDataPointClick }:
      ShipmentTrendChartProps) {
        return (
          <Card className="bg-[#1E293B] border-[#334155]">
            <CardHeader>
              <CardTitle className="text-[#F1F5F9]">Shipment Status Trends</CardTitle>
            </CardHeader>
            <CardContent>
              <ResponsiveContainer width="100%" height={300}>
                <LineChart data={data} onClick={onDataPointClick}>
                  <CartesianGrid strokeDasharray="3 3" stroke="#334155" />
                  <XAxis dataKey="date" stroke="#94A3B8" />
                  <YAxis stroke="#94A3B8" />
                  <Tooltip 
                    contentStyle={{ backgroundColor: '#1E293B', border: '1px solid #334155', color: '#F1F5F9' }}
                    labelStyle={{ color: '#F1F5F9' }}
                    itemStyle={{ color: '#F1F5F9' }}
                  />
                  <Legend />
                  <Line type="monotone" dataKey="inTransit" stroke="#3B82F6" name="In Transit" strokeWidth={2} />
                  <Line type="monotone" dataKey="delivered" stroke="#10B981" name="Delivered" strokeWidth={2} />
                  <Line type="monotone" dataKey="pending" stroke="#F59E0B" name="Pending" strokeWidth={2} />
                  <Line type="monotone" dataKey="delayed" stroke="#EF4444" name="Delayed" strokeWidth={2} />
                </LineChart>
              </ResponsiveContainer>
            </CardContent>
          </Card>
        );
      }
    components/InventoryBarChart.tsx: >
      import { Card, CardContent, CardHeader, CardTitle } from
      '@/components/ui/card';

      import { BarChart, Bar, XAxis, YAxis, CartesianGrid, Tooltip, Legend,
      ResponsiveContainer } from 'recharts';


      interface InventoryBarChartProps {
        data: Array<{ category: string; quantity: number }>;
        onBarClick?: (data: any) => void;
      }


      export function InventoryBarChart({ data, onBarClick }:
      InventoryBarChartProps) {
        return (
          <Card className="bg-[#1E293B] border-[#334155]">
            <CardHeader>
              <CardTitle className="text-[#F1F5F9]">Inventory Levels by Category</CardTitle>
            </CardHeader>
            <CardContent>
              <ResponsiveContainer width="100%" height={300}>
                <BarChart data={data} onClick={onBarClick}>
                  <CartesianGrid strokeDasharray="3 3" stroke="#334155" />
                  <XAxis dataKey="category" stroke="#94A3B8" tick={{ fill: '#F1F5F9' }} />
                  <YAxis stroke="#94A3B8" />
                  <Tooltip 
                    contentStyle={{ backgroundColor: '#1E293B', border: '1px solid #334155', color: '#F1F5F9' }}
                    labelStyle={{ color: '#F1F5F9' }}
                    itemStyle={{ color: '#F1F5F9' }}
                  />
                  <Legend wrapperStyle={{ color: '#F1F5F9' }} />
                  <Bar dataKey="quantity" fill="#3B82F6" name="Quantity" />
                </BarChart>
              </ResponsiveContainer>
            </CardContent>
          </Card>
        );
      }
    components/FilterPanel.tsx: >+
      import { Card, CardContent } from '@/components/ui/card';

      import { Select, SelectContent, SelectItem, SelectTrigger, SelectValue }
      from '@/components/ui/select';

      import { Button } from '@/components/ui/button';

      import { Filter, RotateCcw } from 'lucide-react';


      export interface FilterState {
        status: string;
        location: string;
        dateRange: string;
      }


      interface FilterPanelProps {
        filters: FilterState;
        onFilterChange: (filters: FilterState) => void;
        onReset: () => void;
      }


      export function FilterPanel({ filters, onFilterChange, onReset }:
      FilterPanelProps) {
        return (
          <Card className="bg-[#1E293B] border-[#334155]">
            <CardContent className="p-6">
              <div className="flex flex-wrap items-center gap-4">
                <div className="flex items-center gap-2">
                  <Filter className="h-5 w-5 text-[#94A3B8]" />
                  <span className="font-medium text-[#F1F5F9]">Filters:</span>
                </div>

                <Select
                  value={filters.status}
                  onValueChange={(value) => onFilterChange({ ...filters, status: value })}
                >
                  <SelectTrigger className="w-[180px] bg-[#0F172A] border-[#334155]">
                    <SelectValue placeholder="Select Status" />
                  </SelectTrigger>
                  <SelectContent>
                    <SelectItem value="all">All Statuses</SelectItem>
                    <SelectItem value="in-transit">In Transit</SelectItem>
                    <SelectItem value="delivered">Delivered</SelectItem>
                    <SelectItem value="pending">Pending</SelectItem>
                    <SelectItem value="delayed">Delayed</SelectItem>
                  </SelectContent>
                </Select>

                <Select
                  value={filters.location}
                  onValueChange={(value) => onFilterChange({ ...filters, location: value })}
                >
                  <SelectTrigger className="w-[180px] bg-[#0F172A] border-[#334155]">
                    <SelectValue placeholder="Select Location" />
                  </SelectTrigger>
                  <SelectContent>
                    <SelectItem value="all">All Locations</SelectItem>
                    <SelectItem value="new-york">New York</SelectItem>
                    <SelectItem value="los-angeles">Los Angeles</SelectItem>
                    <SelectItem value="chicago">Chicago</SelectItem>
                    <SelectItem value="houston">Houston</SelectItem>
                  </SelectContent>
                </Select>

                <Select
                  value={filters.dateRange}
                  onValueChange={(value) => onFilterChange({ ...filters, dateRange: value })}
                >
                  <SelectTrigger className="w-[180px] bg-[#0F172A] border-[#334155]">
                    <SelectValue placeholder="Date Range" />
                  </SelectTrigger>
                  <SelectContent>
                    <SelectItem value="7days">Last 7 Days</SelectItem>
                    <SelectItem value="30days">Last 30 Days</SelectItem>
                    <SelectItem value="90days">Last 90 Days</SelectItem>
                    <SelectItem value="year">This Year</SelectItem>
                  </SelectContent>
                </Select>

                <Button variant="outline" onClick={onReset} className="ml-auto">
                  <RotateCcw className="h-4 w-4 mr-2" />
                  Reset
                </Button>
              </div>
            </CardContent>
          </Card>
        );
      }

    components/DashboardPage.tsx: >
      import { useState, useMemo } from 'react';

      import { KPICard } from '@/components/KPICard';

      import { ShipmentTrendChart } from '@/components/ShipmentTrendChart';

      import { StatusDistributionChart } from
      '@/components/StatusDistributionChart';

      import { FilterPanel, FilterState } from '@/components/FilterPanel';

      import { AlertsPanel } from '@/components/AlertsPanel';

      import { RealTimeGPSTracker } from '@/components/RealTimeGPSTracker';

      import { generateKPIs, generateShipmentTrendData,
      generateStatusDistribution } from '@/lib/mockData';

      import { Card, CardContent, CardHeader, CardTitle } from
      '@/components/ui/card';

      import { Badge } from '@/components/ui/badge';

      import { Package, Truck, Warehouse, TrendingUp } from 'lucide-react';


      export function DashboardPage() {
        const [filters, setFilters] = useState<FilterState>({
          status: 'all',
          location: 'all',
          dateRange: '30days',
        });

        const [selectedData, setSelectedData] = useState<string | null>(null);

        const kpis = useMemo(() => generateKPIs(), []);
        const shipmentTrendData = useMemo(() => generateShipmentTrendData(filters), [filters]);
        const statusDistributionData = useMemo(() => {
          const data = generateStatusDistribution(filters);
          return data;
        }, [filters]);

        const handleFilterChange = (newFilters: FilterState) => {
          setFilters(newFilters);
        };

        const handleResetFilters = () => {
          setFilters({
            status: 'all',
            location: 'all',
            dateRange: '30days',
          });
          setSelectedData(null);
        };

        const handleChartClick = (data: any) => {
          if (data && data.activePayload) {
            const payload = data.activePayload[0]?.payload;
            setSelectedData(JSON.stringify(payload, null, 2));
          }
        };

        return (
          <div className="min-h-screen bg-[#0F172A] p-4 sm:p-6 lg:p-8">
            <div className="max-w-[1800px] mx-auto space-y-6">
              {/* Filters */}
              <FilterPanel
                filters={filters}
                onFilterChange={handleFilterChange}
                onReset={handleResetFilters}
              />

              {/* Active Filters Display */}
              {(filters.status !== 'all' || filters.location !== 'all' || filters.dateRange !== '30days') && (
                <div className="flex flex-wrap gap-2">
                  <span className="text-sm font-medium text-[#F1F5F9]">Active Filters:</span>
                  {filters.status !== 'all' && (
                    <Badge variant="secondary">Status: {filters.status}</Badge>
                  )}
                  {filters.location !== 'all' && (
                    <Badge variant="secondary">Location: {filters.location}</Badge>
                  )}
                  {filters.dateRange !== '30days' && (
                    <Badge variant="secondary">Date: {filters.dateRange}</Badge>
                  )}
                </div>
              )}

              {/* KPI Cards */}
              <div className="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4">
                <KPICard kpi={kpis[0]} icon={<Package className="h-8 w-8" />} />
                <KPICard kpi={kpis[1]} icon={<Truck className="h-8 w-8" />} />
                <KPICard kpi={kpis[2]} icon={<Warehouse className="h-8 w-8" />} />
                <KPICard kpi={kpis[3]} icon={<TrendingUp className="h-8 w-8" />} />
              </div>

              {/* Real-Time GPS Tracking */}
              <RealTimeGPSTracker />

              {/* Alerts Panel */}
              <AlertsPanel />

              {/* Charts */}
              <div className="grid grid-cols-1 lg:grid-cols-2 gap-6">
                <ShipmentTrendChart data={shipmentTrendData} onDataPointClick={handleChartClick} />
                <StatusDistributionChart 
                  key={`${filters.status}-${filters.location}-${filters.dateRange}`}
                  data={statusDistributionData} 
                  onBarClick={handleChartClick} 
                />
              </div>

              {/* Drill-down Data Display */}
              {selectedData && (
                <Card className="bg-[#1E293B] border-[#334155]">
                  <CardHeader>
                    <CardTitle className="text-[#F1F5F9]">Selected Data Details</CardTitle>
                  </CardHeader>
                  <CardContent>
                    <pre className="bg-[#0F172A] text-[#F1F5F9] p-4 rounded-lg overflow-x-auto text-sm border border-[#334155]">
                      {selectedData}
                    </pre>
                  </CardContent>
                </Card>
              )}

              {/* Quick Stats */}
              <div className="grid grid-cols-1 md:grid-cols-3 gap-4">
                <Card className="bg-[#1E293B] border-[#334155]">
                  <CardHeader>
                    <CardTitle className="text-lg text-[#F1F5F9]">Recent Activity</CardTitle>
                  </CardHeader>
                  <CardContent>
                    <ul className="space-y-2 text-sm">
                      <li className="flex justify-between items-center min-h-[24px]">
                        <span className="text-[#94A3B8]">New Shipments Today:</span>
                        <span className="font-semibold text-[#F1F5F9]">127</span>
                      </li>
                      <li className="flex justify-between items-center min-h-[24px]">
                        <span className="text-[#94A3B8]">Deliveries Completed:</span>
                        <span className="font-semibold text-[#F1F5F9]">93</span>
                      </li>
                      <li className="flex justify-between items-center min-h-[24px]">
                        <span className="text-[#94A3B8]">Pending Pickups:</span>
                        <span className="font-semibold text-[#F1F5F9]">34</span>
                      </li>
                    </ul>
                  </CardContent>
                </Card>

                <Card className="bg-[#1E293B] border-[#334155]">
                  <CardHeader>
                    <CardTitle className="text-lg text-[#F1F5F9]">Vehicle Status</CardTitle>
                  </CardHeader>
                  <CardContent>
                    <ul className="space-y-2 text-sm">
                      <li className="flex justify-between items-center">
                        <span className="text-[#94A3B8]">Active:</span>
                        <Badge className="bg-[#10B981] text-white w-[40px] justify-center">67</Badge>
                      </li>
                      <li className="flex justify-between items-center">
                        <span className="text-[#94A3B8]">Idle:</span>
                        <Badge className="bg-[#F59E0B] text-white w-[40px] justify-center">18</Badge>
                      </li>
                      <li className="flex justify-between items-center">
                        <span className="text-[#94A3B8]">Maintenance:</span>
                        <Badge className="bg-[#EF4444] text-white w-[40px] justify-center">4</Badge>
                      </li>
                    </ul>
                  </CardContent>
                </Card>

                <Card className="bg-[#1E293B] border-[#334155]">
                  <CardHeader>
                    <CardTitle className="text-lg text-[#F1F5F9]">System Info</CardTitle>
                  </CardHeader>
                  <CardContent>
                    <ul className="space-y-2 text-sm">
                      <li className="flex items-center gap-2">
                        <Badge className="bg-[#10B981] text-white min-w-[24px] h-[24px] justify-center flex-shrink-0"></Badge>
                        <span className="text-[#94A3B8]">GPS Tracking Active</span>
                      </li>
                      <li className="flex items-center gap-2">
                        <Badge className="bg-[#10B981] text-white min-w-[24px] h-[24px] justify-center flex-shrink-0"></Badge>
                        <span className="text-[#94A3B8]">Alerts Monitoring</span>
                      </li>
                      <li className="flex items-center gap-2">
                        <Badge className="bg-[#3B82F6] text-white min-w-[24px] h-[24px] justify-center flex-shrink-0">i</Badge>
                        <span className="text-[#94A3B8]">Real-time Updates: 30s</span>
                      </li>
                    </ul>
                  </CardContent>
                </Card>
              </div>
            </div>
          </div>
        );
      }
    components/ui/table.tsx: |+
      import * as React from "react"

      import { cn } from "@/lib/utils"

      const Table = React.forwardRef<
        HTMLTableElement,
        React.HTMLAttributes<HTMLTableElement>
      >(({ className, ...props }, ref) => (
        <div className="relative w-full overflow-auto">
          <table
            ref={ref}
            className={cn("w-full caption-bottom text-sm", className)}
            {...props}
          />
        </div>
      ))
      Table.displayName = "Table"

      const TableHeader = React.forwardRef<
        HTMLTableSectionElement,
        React.HTMLAttributes<HTMLTableSectionElement>
      >(({ className, ...props }, ref) => (
        <thead ref={ref} className={cn("[&_tr]:border-b", className)} {...props} />
      ))
      TableHeader.displayName = "TableHeader"

      const TableBody = React.forwardRef<
        HTMLTableSectionElement,
        React.HTMLAttributes<HTMLTableSectionElement>
      >(({ className, ...props }, ref) => (
        <tbody
          ref={ref}
          className={cn("[&_tr:last-child]:border-0", className)}
          {...props}
        />
      ))
      TableBody.displayName = "TableBody"

      const TableFooter = React.forwardRef<
        HTMLTableSectionElement,
        React.HTMLAttributes<HTMLTableSectionElement>
      >(({ className, ...props }, ref) => (
        <tfoot
          ref={ref}
          className={cn(
            "border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",
            className
          )}
          {...props}
        />
      ))
      TableFooter.displayName = "TableFooter"

      const TableRow = React.forwardRef<
        HTMLTableRowElement,
        React.HTMLAttributes<HTMLTableRowElement>
      >(({ className, ...props }, ref) => (
        <tr
          ref={ref}
          className={cn(
            "border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",
            className
          )}
          {...props}
        />
      ))
      TableRow.displayName = "TableRow"

      const TableHead = React.forwardRef<
        HTMLTableCellElement,
        React.ThHTMLAttributes<HTMLTableCellElement>
      >(({ className, ...props }, ref) => (
        <th
          ref={ref}
          className={cn(
            "h-10 px-2 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",
            className
          )}
          {...props}
        />
      ))
      TableHead.displayName = "TableHead"

      const TableCell = React.forwardRef<
        HTMLTableCellElement,
        React.TdHTMLAttributes<HTMLTableCellElement>
      >(({ className, ...props }, ref) => (
        <td
          ref={ref}
          className={cn(
            "p-2 align-middle [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",
            className
          )}
          {...props}
        />
      ))
      TableCell.displayName = "TableCell"

      const TableCaption = React.forwardRef<
        HTMLTableCaptionElement,
        React.HTMLAttributes<HTMLTableCaptionElement>
      >(({ className, ...props }, ref) => (
        <caption
          ref={ref}
          className={cn("mt-4 text-sm text-muted-foreground", className)}
          {...props}
        />
      ))
      TableCaption.displayName = "TableCaption"

      export {
        Table,
        TableHeader,
        TableBody,
        TableFooter,
        TableHead,
        TableRow,
        TableCell,
        TableCaption,
      }

    components/ui/input.tsx: >+

      import * as React from "react"


      import { cn } from "@/lib/utils"


      const Input = React.forwardRef<HTMLInputElement,
      React.ComponentProps<"input">>(
        ({ className, type, ...props }, ref) => {
          return (
            <input
              type={type}
              className={cn(
                "flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-base shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",
                className
              )}
              ref={ref}
              {...props}
            />
          )
        }
      )

      Input.displayName = "Input"


      export { Input }

    components/ui/dialog.tsx: |+

      import * as React from "react"
      import * as DialogPrimitive from "@radix-ui/react-dialog"
      import { cn } from "@/lib/utils"
      import { Cross2Icon } from "@radix-ui/react-icons"

      const Dialog = DialogPrimitive.Root

      const DialogTrigger = DialogPrimitive.Trigger

      const DialogPortal = DialogPrimitive.Portal

      const DialogClose = DialogPrimitive.Close

      const DialogOverlay = React.forwardRef<
        React.ElementRef<typeof DialogPrimitive.Overlay>,
        React.ComponentPropsWithoutRef<typeof DialogPrimitive.Overlay>
      >(({ className, ...props }, ref) => (
        <DialogPrimitive.Overlay
          ref={ref}
          className={cn(
            "fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",
            className
          )}
          {...props}
        />
      ))
      DialogOverlay.displayName = DialogPrimitive.Overlay.displayName

      const DialogContent = React.forwardRef<
        React.ElementRef<typeof DialogPrimitive.Content>,
        React.ComponentPropsWithoutRef<typeof DialogPrimitive.Content>
      >(({ className, children, ...props }, ref) => (
        <DialogPortal>
          <DialogOverlay />
          <DialogPrimitive.Content
            ref={ref}
            className={cn(
              "fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",
              className
            )}
            {...props}
          >
            {children}
            <DialogPrimitive.Close className="absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground">
              <Cross2Icon className="h-4 w-4" />
              <span className="sr-only">Close</span>
            </DialogPrimitive.Close>
          </DialogPrimitive.Content>
        </DialogPortal>
      ))
      DialogContent.displayName = DialogPrimitive.Content.displayName

      const DialogHeader = ({
        className,
        ...props
      }: React.HTMLAttributes<HTMLDivElement>) => (
        <div
          className={cn(
            "flex flex-col space-y-1.5 text-center sm:text-left",
            className
          )}
          {...props}
        />
      )
      DialogHeader.displayName = "DialogHeader"

      const DialogFooter = ({
        className,
        ...props
      }: React.HTMLAttributes<HTMLDivElement>) => (
        <div
          className={cn(
            "flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",
            className
          )}
          {...props}
        />
      )
      DialogFooter.displayName = "DialogFooter"

      const DialogTitle = React.forwardRef<
        React.ElementRef<typeof DialogPrimitive.Title>,
        React.ComponentPropsWithoutRef<typeof DialogPrimitive.Title>
      >(({ className, ...props }, ref) => (
        <DialogPrimitive.Title
          ref={ref}
          className={cn(
            "text-lg font-semibold leading-none tracking-tight",
            className
          )}
          {...props}
        />
      ))
      DialogTitle.displayName = DialogPrimitive.Title.displayName

      const DialogDescription = React.forwardRef<
        React.ElementRef<typeof DialogPrimitive.Description>,
        React.ComponentPropsWithoutRef<typeof DialogPrimitive.Description>
      >(({ className, ...props }, ref) => (
        <DialogPrimitive.Description
          ref={ref}
          className={cn("text-sm text-muted-foreground", className)}
          {...props}
        />
      ))
      DialogDescription.displayName = DialogPrimitive.Description.displayName

      export {
        Dialog,
        DialogPortal,
        DialogOverlay,
        DialogTrigger,
        DialogClose,
        DialogContent,
        DialogHeader,
        DialogFooter,
        DialogTitle,
        DialogDescription,
      }

    components/ui/progress.tsx: |+

      "use client"

      import * as React from "react"
      import * as ProgressPrimitive from "@radix-ui/react-progress"

      import { cn } from "@/lib/utils"

      const Progress = React.forwardRef<
        React.ElementRef<typeof ProgressPrimitive.Root>,
        React.ComponentPropsWithoutRef<typeof ProgressPrimitive.Root>
      >(({ className, value, ...props }, ref) => (
        <ProgressPrimitive.Root
          ref={ref}
          className={cn(
            "relative h-2 w-full overflow-hidden rounded-full bg-primary/20",
            className
          )}
          {...props}
        >
          <ProgressPrimitive.Indicator
            className="h-full w-full flex-1 bg-primary transition-all"
            style={{ transform: `translateX(-${100 - (value || 0)}%)` }}
          />
        </ProgressPrimitive.Root>
      ))
      Progress.displayName = ProgressPrimitive.Root.displayName

      export { Progress }

    components/ShipmentTimeline.tsx: >
      import { Card, CardContent, CardHeader, CardTitle } from
      '@/components/ui/card';

      import { Badge } from '@/components/ui/badge';

      import { CheckCircle2, Circle, Clock, XCircle } from 'lucide-react';


      interface TimelineEvent {
        label: string;
        date: string;
        status: 'completed' | 'current' | 'pending' | 'delayed';
        description?: string;
      }


      interface ShipmentTimelineProps {
        trackingNumber: string;
        events: TimelineEvent[];
      }


      export function ShipmentTimeline({ trackingNumber, events }:
      ShipmentTimelineProps) {
        const getIcon = (status: TimelineEvent['status']) => {
          switch (status) {
            case 'completed':
              return <CheckCircle2 className="h-5 w-5 text-green-600" />;
            case 'current':
              return <Clock className="h-5 w-5 text-blue-600" />;
            case 'delayed':
              return <XCircle className="h-5 w-5 text-red-600" />;
            default:
              return <Circle className="h-5 w-5 text-gray-400" />;
          }
        };

        const getStatusBadge = (status: TimelineEvent['status']) => {
          switch (status) {
            case 'completed':
              return <Badge className="bg-green-600">Completed</Badge>;
            case 'current':
              return <Badge className="bg-blue-600">In Progress</Badge>;
            case 'delayed':
              return <Badge variant="destructive">Delayed</Badge>;
            default:
              return <Badge variant="secondary">Pending</Badge>;
          }
        };

        return (
          <Card>
            <CardHeader>
              <CardTitle className="flex items-center justify-between">
                <span>Shipment Timeline</span>
                <span className="text-sm font-normal text-gray-600">{trackingNumber}</span>
              </CardTitle>
            </CardHeader>
            <CardContent>
              <div className="space-y-6">
                {events.map((event, index) => (
                  <div key={index} className="flex gap-4">
                    <div className="flex flex-col items-center">
                      {getIcon(event.status)}
                      {index < events.length - 1 && (
                        <div className="w-0.5 h-full min-h-[40px] bg-gray-300 mt-2" />
                      )}
                    </div>
                    <div className="flex-1 pb-4">
                      <div className="flex items-center justify-between mb-1">
                        <p className="font-medium text-gray-900">{event.label}</p>
                        {getStatusBadge(event.status)}
                      </div>
                      <p className="text-sm text-gray-600">{event.date}</p>
                      {event.description && (
                        <p className="text-sm text-gray-500 mt-1">{event.description}</p>
                      )}
                    </div>
                  </div>
                ))}
              </div>
            </CardContent>
          </Card>
        );
      }
    components/ShipmentDetailDialog.tsx: >
      import { Dialog, DialogContent, DialogHeader, DialogTitle } from
      '@/components/ui/dialog';

      import { Badge } from '@/components/ui/badge';

      import { Progress } from '@/components/ui/progress';

      import { ShipmentTimeline } from '@/components/ShipmentTimeline';

      import type { Shipment, ShipmentStatus } from '@/lib/types';

      import { MapPin, Calendar, Package, Truck } from 'lucide-react';


      interface ShipmentDetailDialogProps {
        shipment: Shipment | null;
        open: boolean;
        onOpenChange: (open: boolean) => void;
      }


      export function ShipmentDetailDialog({ shipment, open, onOpenChange }:
      ShipmentDetailDialogProps) {
        if (!shipment) return null;

        const getStatusColor = (status: ShipmentStatus) => {
          switch (status) {
            case 'Delivered':
              return 'bg-green-600';
            case 'In Transit':
              return 'bg-blue-600';
            case 'Delayed':
              return 'bg-red-600';
            default:
              return 'bg-yellow-600';
          }
        };

        const timelineEvents = [
          {
            label: 'Order Placed',
            date: shipment.departureDate,
            status: 'completed' as const,
            description: `Origin: ${shipment.origin}`,
          },
          {
            label: 'Picked Up',
            date: shipment.departureDate,
            status: 'completed' as const,
            description: 'Package collected from warehouse',
          },
          {
            label: 'In Transit',
            date: new Date().toISOString().split('T')[0],
            status: shipment.status === 'In Transit' ? 'current' as const : shipment.status === 'Delivered' ? 'completed' as const : 'pending' as const,
            description: 'On the way to destination',
          },
          {
            label: 'Out for Delivery',
            date: shipment.estimatedDelivery,
            status: shipment.status === 'Delivered' ? 'completed' as const : shipment.progress > 80 ? 'current' as const : 'pending' as const,
            description: 'Package arriving soon',
          },
          {
            label: 'Delivered',
            date: shipment.actualDelivery || shipment.estimatedDelivery,
            status: shipment.status === 'Delivered' ? 'completed' as const : shipment.status === 'Delayed' ? 'delayed' as const : 'pending' as const,
            description: shipment.actualDelivery ? `Delivered to ${shipment.destination}` : `Expected at ${shipment.destination}`,
          },
        ];

        return (
          <Dialog open={open} onOpenChange={onOpenChange}>
            <DialogContent className="max-w-3xl max-h-[90vh] overflow-y-auto">
              <DialogHeader>
                <DialogTitle className="text-2xl">Shipment Details</DialogTitle>
              </DialogHeader>
              
              <div className="space-y-6">
                {/* Header Info */}
                <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
                  <div>
                    <p className="text-sm text-gray-600">Tracking Number</p>
                    <p className="font-semibold text-lg">{shipment.trackingNumber}</p>
                  </div>
                  <div className="flex items-center gap-2">
                    <p className="text-sm text-gray-600">Status:</p>
                    <Badge className={getStatusColor(shipment.status)}>{shipment.status}</Badge>
                  </div>
                </div>

                {/* Progress Bar */}
                <div>
                  <div className="flex justify-between mb-2">
                    <span className="text-sm font-medium">Delivery Progress</span>
                    <span className="text-sm font-medium">{shipment.progress}%</span>
                  </div>
                  <Progress value={shipment.progress} className="h-2" />
                </div>

                {/* Route Info */}
                <div className="grid grid-cols-1 md:grid-cols-2 gap-4 p-4 bg-gray-50 rounded-lg">
                  <div className="flex items-start gap-3">
                    <MapPin className="h-5 w-5 text-blue-600 mt-1" />
                    <div>
                      <p className="text-sm font-medium text-gray-600">Origin</p>
                      <p className="font-semibold">{shipment.origin}</p>
                    </div>
                  </div>
                  <div className="flex items-start gap-3">
                    <MapPin className="h-5 w-5 text-green-600 mt-1" />
                    <div>
                      <p className="text-sm font-medium text-gray-600">Destination</p>
                      <p className="font-semibold">{shipment.destination}</p>
                    </div>
                  </div>
                </div>

                {/* Dates */}
                <div className="grid grid-cols-1 md:grid-cols-3 gap-4">
                  <div className="flex items-start gap-2">
                    <Calendar className="h-5 w-5 text-gray-600 mt-0.5" />
                    <div>
                      <p className="text-sm text-gray-600">Departure</p>
                      <p className="font-medium">{shipment.departureDate}</p>
                    </div>
                  </div>
                  <div className="flex items-start gap-2">
                    <Calendar className="h-5 w-5 text-gray-600 mt-0.5" />
                    <div>
                      <p className="text-sm text-gray-600">Est. Delivery</p>
                      <p className="font-medium">{shipment.estimatedDelivery}</p>
                    </div>
                  </div>
                  {shipment.actualDelivery && (
                    <div className="flex items-start gap-2">
                      <Calendar className="h-5 w-5 text-green-600 mt-0.5" />
                      <div>
                        <p className="text-sm text-gray-600">Actual Delivery</p>
                        <p className="font-medium">{shipment.actualDelivery}</p>
                      </div>
                    </div>
                  )}
                </div>

                {/* Timeline */}
                <ShipmentTimeline trackingNumber={shipment.trackingNumber} events={timelineEvents} />
              </div>
            </DialogContent>
          </Dialog>
        );
      }
    components/ShipmentsPage.tsx: >+
      import { useState, useMemo } from 'react';

      import { Card, CardContent, CardHeader, CardTitle } from
      '@/components/ui/card';

      import { Input } from '@/components/ui/input';

      import { Select, SelectContent, SelectItem, SelectTrigger, SelectValue }
      from '@/components/ui/select';

      import { Table, TableBody, TableCell, TableHead, TableHeader, TableRow }
      from '@/components/ui/table';

      import { Badge } from '@/components/ui/badge';

      import { Button } from '@/components/ui/button';

      import { ShipmentDetailDialog } from '@/components/ShipmentDetailDialog';

      import { generateShipments } from '@/lib/mockData';

      import type { Shipment, ShipmentStatus } from '@/lib/types';

      import { Search, Filter, Package, ChevronLeft, ChevronRight, Truck,
      CheckCircle, Clock, AlertTriangle } from 'lucide-react';


      export function ShipmentsPage() {
        const [shipments] = useState<Shipment[]>(generateShipments());
        const [searchQuery, setSearchQuery] = useState('');
        const [statusFilter, setStatusFilter] = useState<string>('all');
        const [selectedShipment, setSelectedShipment] = useState<Shipment | null>(null);
        const [dialogOpen, setDialogOpen] = useState(false);
        const [currentPage, setCurrentPage] = useState(1);
        const [pageSize, setPageSize] = useState(10);

        const getStatusColor = (status: ShipmentStatus) => {
          switch (status) {
            case 'Delivered':
              return 'bg-[#10B981]';
            case 'In Transit':
              return 'bg-[#3B82F6]';
            case 'Delayed':
              return 'bg-[#EF4444]';
            default:
              return 'bg-[#F59E0B]';
          }
        };

        const filteredShipments = useMemo(() => {
          const filtered = shipments.filter((shipment) => {
            const matchesSearch = 
              shipment.trackingNumber.toLowerCase().includes(searchQuery.toLowerCase()) ||
              shipment.id.toLowerCase().includes(searchQuery.toLowerCase()) ||
              shipment.origin.toLowerCase().includes(searchQuery.toLowerCase()) ||
              shipment.destination.toLowerCase().includes(searchQuery.toLowerCase());

            const matchesStatus = statusFilter === 'all' || shipment.status === statusFilter;

            return matchesSearch && matchesStatus;
          });
          
          setCurrentPage(1);
          return filtered;
        }, [shipments, searchQuery, statusFilter]);

        const paginatedShipments = useMemo(() => {
          const startIndex = (currentPage - 1) * pageSize;
          const endIndex = startIndex + pageSize;
          return filteredShipments.slice(startIndex, endIndex);
        }, [filteredShipments, currentPage, pageSize]);

        const totalPages = Math.ceil(filteredShipments.length / pageSize);

        const handleRowClick = (shipment: Shipment) => {
          setSelectedShipment(shipment);
          setDialogOpen(true);
        };

        const statusCounts = useMemo(() => {
          return {
            all: shipments.length,
            'In Transit': shipments.filter(s => s.status === 'In Transit').length,
            'Delivered': shipments.filter(s => s.status === 'Delivered').length,
            'Pending': shipments.filter(s => s.status === 'Pending').length,
            'Delayed': shipments.filter(s => s.status === 'Delayed').length,
          };
        }, [shipments]);

        return (
          <div className="min-h-screen bg-[#0F172A] p-4 sm:p-6 lg:p-8">
            <div className="max-w-[1800px] mx-auto space-y-6">
              {/* Status Overview */}
              <div className="grid grid-cols-2 md:grid-cols-5 gap-4">
                <Card className="cursor-pointer hover:shadow-lg transition-shadow bg-[#1E293B] border-[#334155]" onClick={() => setStatusFilter('all')}>
                  <CardContent className="p-6">
                    <div className="flex items-start justify-between gap-4">
                      <div>
                        <p className="text-2xl font-bold text-[#F1F5F9]">{statusCounts.all}</p>
                        <p className="text-sm text-[#94A3B8]">Total</p>
                      </div>
                      <Package className="h-8 w-8 text-[#3B82F6] opacity-80 flex-shrink-0" />
                    </div>
                  </CardContent>
                </Card>
                <Card className="cursor-pointer hover:shadow-lg transition-shadow bg-[#1E293B] border-[#334155]" onClick={() => setStatusFilter('In Transit')}>
                  <CardContent className="p-6">
                    <div className="flex items-start justify-between gap-4">
                      <div>
                        <p className="text-2xl font-bold text-[#3B82F6]">{statusCounts['In Transit']}</p>
                        <p className="text-sm text-[#94A3B8]">In Transit</p>
                      </div>
                      <Truck className="h-8 w-8 text-[#3B82F6] opacity-80 flex-shrink-0" />
                    </div>
                  </CardContent>
                </Card>
                <Card className="cursor-pointer hover:shadow-lg transition-shadow bg-[#1E293B] border-[#334155]" onClick={() => setStatusFilter('Delivered')}>
                  <CardContent className="p-6">
                    <div className="flex items-start justify-between gap-4">
                      <div>
                        <p className="text-2xl font-bold text-[#10B981]">{statusCounts.Delivered}</p>
                        <p className="text-sm text-[#94A3B8]">Delivered</p>
                      </div>
                      <CheckCircle className="h-8 w-8 text-[#3B82F6] opacity-80 flex-shrink-0" />
                    </div>
                  </CardContent>
                </Card>
                <Card className="cursor-pointer hover:shadow-lg transition-shadow bg-[#1E293B] border-[#334155]" onClick={() => setStatusFilter('Pending')}>
                  <CardContent className="p-6">
                    <div className="flex items-start justify-between gap-4">
                      <div>
                        <p className="text-2xl font-bold text-[#F59E0B]">{statusCounts.Pending}</p>
                        <p className="text-sm text-[#94A3B8]">Pending</p>
                      </div>
                      <Clock className="h-8 w-8 text-[#3B82F6] opacity-80 flex-shrink-0" />
                    </div>
                  </CardContent>
                </Card>
                <Card className="cursor-pointer hover:shadow-lg transition-shadow bg-[#1E293B] border-[#334155]" onClick={() => setStatusFilter('Delayed')}>
                  <CardContent className="p-6">
                    <div className="flex items-start justify-between gap-4">
                      <div>
                        <p className="text-2xl font-bold text-[#EF4444]">{statusCounts.Delayed}</p>
                        <p className="text-sm text-[#94A3B8]">Delayed</p>
                      </div>
                      <AlertTriangle className="h-8 w-8 text-[#3B82F6] opacity-80 flex-shrink-0" />
                    </div>
                  </CardContent>
                </Card>
              </div>

              {/* Filters */}
              <Card className="bg-[#1E293B] border-[#334155]">
                <CardContent className="p-6">
                  <div className="flex flex-col sm:flex-row gap-4">
                    <div className="flex-1 relative">
                      <Search className="absolute left-3 top-3 h-4 w-4 text-[#94A3B8]" />
                      <Input
                        placeholder="Search by tracking number, ID, origin, or destination..."
                        value={searchQuery}
                        onChange={(e) => setSearchQuery(e.target.value)}
                        className="pl-10 bg-[#0F172A] border-[#334155] text-[#F1F5F9] placeholder:text-[#94A3B8]"
                      />
                    </div>
                    <div className="flex items-center gap-2">
                      <Filter className="h-5 w-5 text-[#94A3B8]" />
                      <Select value={statusFilter} onValueChange={setStatusFilter}>
                        <SelectTrigger className="w-[180px] bg-[#0F172A] border-[#334155]">
                          <SelectValue placeholder="Filter by status" />
                        </SelectTrigger>
                        <SelectContent>
                          <SelectItem value="all">All Statuses</SelectItem>
                          <SelectItem value="In Transit">In Transit</SelectItem>
                          <SelectItem value="Delivered">Delivered</SelectItem>
                          <SelectItem value="Pending">Pending</SelectItem>
                          <SelectItem value="Delayed">Delayed</SelectItem>
                        </SelectContent>
                      </Select>
                      {(searchQuery || statusFilter !== 'all') && (
                        <Button
                          variant="outline"
                          onClick={() => {
                            setSearchQuery('');
                            setStatusFilter('all');
                          }}
                        >
                          Clear
                        </Button>
                      )}
                    </div>
                  </div>
                </CardContent>
              </Card>

              {/* Shipments Table */}
              <Card className="bg-[#1E293B] border-[#334155]">
                <CardHeader>
                  <CardTitle className="text-[#F1F5F9]">
                    Shipments List
                  </CardTitle>
                </CardHeader>
                <CardContent>
                  <div className="overflow-x-auto">
                    <Table>
                      <TableHeader>
                        <TableRow className="border-[#334155]">
                          <TableHead className="text-[#94A3B8]">ID</TableHead>
                          <TableHead className="text-[#94A3B8]">Tracking Number</TableHead>
                          <TableHead className="text-[#94A3B8]">Status</TableHead>
                          <TableHead className="text-[#94A3B8]">Origin</TableHead>
                          <TableHead className="text-[#94A3B8]">Destination</TableHead>
                          <TableHead className="text-[#94A3B8]">Departure</TableHead>
                          <TableHead className="text-[#94A3B8]">Est. Delivery</TableHead>
                          <TableHead className="text-right text-[#94A3B8]">Progress</TableHead>
                        </TableRow>
                      </TableHeader>
                      <TableBody>
                        {filteredShipments.length === 0 ? (
                          <TableRow className="border-[#334155]">
                            <TableCell colSpan={8} className="text-center py-8 text-[#94A3B8]">
                              No shipments found matching your criteria
                            </TableCell>
                          </TableRow>
                        ) : (
                          paginatedShipments.map((shipment) => (
                            <TableRow
                              key={shipment.id}
                              className="cursor-pointer hover:bg-[#0F172A] border-[#334155]"
                              onClick={() => handleRowClick(shipment)}
                            >
                              <TableCell className="font-medium text-[#F1F5F9]">{shipment.id}</TableCell>
                              <TableCell className="font-mono text-sm text-[#F1F5F9]">{shipment.trackingNumber}</TableCell>
                              <TableCell>
                                <Badge className={`${getStatusColor(shipment.status)} text-white`}>{shipment.status}</Badge>
                              </TableCell>
                              <TableCell className="text-[#F1F5F9]">{shipment.origin}</TableCell>
                              <TableCell className="text-[#F1F5F9]">{shipment.destination}</TableCell>
                              <TableCell className="text-[#94A3B8]">{shipment.departureDate}</TableCell>
                              <TableCell className="text-[#94A3B8]">{shipment.estimatedDelivery}</TableCell>
                              <TableCell className="text-right">
                                <div className="flex items-center justify-end gap-2">
                                  <span className="text-sm font-medium text-[#F1F5F9]">{shipment.progress}%</span>
                                </div>
                              </TableCell>
                            </TableRow>
                          ))
                        )}
                      </TableBody>
                    </Table>
                  </div>
                  
                  {filteredShipments.length > 0 && (
                    <div className="flex items-center justify-between pt-4 border-t border-[#334155] mt-4">
                      <div className="flex items-center gap-2">
                        <span className="text-sm text-[#94A3B8]">Show</span>
                        <Select value={String(pageSize)} onValueChange={(value) => {
                          setPageSize(Number(value));
                          setCurrentPage(1);
                        }}>
                          <SelectTrigger className="w-[80px] bg-[#0F172A] border-[#334155]">
                            <SelectValue />
                          </SelectTrigger>
                          <SelectContent>
                            <SelectItem value="10">10</SelectItem>
                            <SelectItem value="20">20</SelectItem>
                            <SelectItem value="50">50</SelectItem>
                          </SelectContent>
                        </Select>
                        <span className="text-sm text-[#94A3B8]">per page</span>
                      </div>
                      
                      <div className="flex items-center gap-2">
                        <span className="text-sm text-[#94A3B8]">
                          Page {currentPage} of {totalPages} ({filteredShipments.length} total)
                        </span>
                        <div className="flex gap-1">
                          <Button
                            variant="outline"
                            size="sm"
                            onClick={() => setCurrentPage(prev => Math.max(1, prev - 1))}
                            disabled={currentPage === 1}
                            className="bg-[#0F172A] border-[#334155]"
                          >
                            <ChevronLeft className="h-4 w-4" />
                          </Button>
                          <Button
                            variant="outline"
                            size="sm"
                            onClick={() => setCurrentPage(prev => Math.min(totalPages, prev + 1))}
                            disabled={currentPage === totalPages}
                            className="bg-[#0F172A] border-[#334155]"
                          >
                            <ChevronRight className="h-4 w-4" />
                          </Button>
                        </div>
                      </div>
                    </div>
                  )}
                </CardContent>
              </Card>

              {/* Detail Dialog */}
              <ShipmentDetailDialog
                shipment={selectedShipment}
                open={dialogOpen}
                onOpenChange={setDialogOpen}
              />
            </div>
          </div>
        );
      }

    components/VehicleMap.tsx: >
      import { useEffect, Fragment } from 'react';

      import { MapContainer, TileLayer, Marker, Popup, Polyline, useMap } from
      'react-leaflet';

      import L from 'leaflet';

      import type { Vehicle } from '@/lib/types';


      interface VehicleMapProps {
        vehicles: Vehicle[];
        selectedVehicle: Vehicle | null;
        onVehicleClick: (vehicle: Vehicle) => void;
      }


      function MapController({ selectedVehicle }: { selectedVehicle: Vehicle |
      null }) {
        const map = useMap();

        useEffect(() => {
          if (selectedVehicle) {
            map.setView([selectedVehicle.location.lat, selectedVehicle.location.lng], 12, {
              animate: true,
              duration: 0.5,
            });
          }
        }, [selectedVehicle, map]);

        return null;
      }


      export function VehicleMap({ vehicles, selectedVehicle, onVehicleClick }:
      VehicleMapProps) {
        const createCustomIcon = (status: Vehicle['status'], isSelected: boolean) => {
          let color = '#3B82F6';
          if (status === 'Active') color = '#10B981';
          if (status === 'Idle') color = '#F59E0B';
          if (status === 'Maintenance') color = '#EF4444';

          const size = isSelected ? 40 : 32;
          const circleRadius = isSelected ? 14 : 12;
          const innerRadius = isSelected ? 7 : 6;

          const svgIcon = `
            <svg width="${size}" height="${size}" viewBox="0 0 ${size} ${size}" xmlns="http://www.w3.org/2000/svg">
              <circle cx="${size/2}" cy="${size/2}" r="${circleRadius}" fill="${color}" stroke="white" stroke-width="${isSelected ? 4 : 3}"/>
              <circle cx="${size/2}" cy="${size/2}" r="${innerRadius}" fill="white"/>
            </svg>
          `;

          return L.divIcon({
            html: svgIcon,
            className: 'custom-marker',
            iconSize: [size, size],
            iconAnchor: [size/2, size/2],
            popupAnchor: [0, -size/2],
          });
        };

        const defaultCenter: [number, number] = [39.8283, -98.5795];

        const generateRoute = (vehicle: Vehicle): [number, number][] => {
          const start = [vehicle.location.lat, vehicle.location.lng] as [number, number];
          const route: [number, number][] = [start];
          
          for (let i = 0; i < 3; i++) {
            const lastPoint = route[route.length - 1];
            route.push([
              lastPoint[0] + (Math.random() - 0.5) * 2,
              lastPoint[1] + (Math.random() - 0.5) * 2,
            ]);
          }
          
          return route;
        };

        return (
          <MapContainer
            center={defaultCenter}
            zoom={4}
            style={{ height: '100%', width: '100%', minHeight: '500px' }}
            scrollWheelZoom={true}
          >
            <TileLayer
              attribution='&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a>'
              url="https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"
            />
            <MapController selectedVehicle={selectedVehicle} />
            
            {vehicles.map((vehicle) => {
              const isSelected = selectedVehicle?.id === vehicle.id;
              const route = generateRoute(vehicle);
              
              return (
                <Fragment key={vehicle.id}>
                  <Marker
                    position={[vehicle.location.lat, vehicle.location.lng]}
                    icon={createCustomIcon(vehicle.status, isSelected)}
                    eventHandlers={{
                      click: () => onVehicleClick(vehicle),
                    }}
                  >
                    <Popup>
                      <div className="p-2">
                        <p className="font-bold">{vehicle.vehicleNumber}</p>
                        <p className="text-sm text-gray-600">Driver: {vehicle.driver}</p>
                        <p className="text-sm text-gray-600">Status: {vehicle.status}</p>
                        <p className="text-sm text-gray-600">{vehicle.location.address}</p>
                      </div>
                    </Popup>
                  </Marker>
                  
                  {isSelected && vehicle.status === 'Active' && (
                    <Polyline
                      positions={route}
                      pathOptions={{ color: '#3B82F6', weight: 3, opacity: 0.7, dashArray: '10, 10' }}
                    />
                  )}
                </Fragment>
              );
            })}
          </MapContainer>
        );
      }
    components/VehicleDetailPanel.tsx: >
      import { Card, CardContent, CardHeader, CardTitle } from
      '@/components/ui/card';

      import { Badge } from '@/components/ui/badge';

      import { Progress } from '@/components/ui/progress';

      import type { Vehicle, VehicleStatus } from '@/lib/types';

      import { Truck, User, MapPin, Package, Gauge } from 'lucide-react';


      interface VehicleDetailPanelProps {
        vehicle: Vehicle | null;
      }


      export function VehicleDetailPanel({ vehicle }: VehicleDetailPanelProps) {
        if (!vehicle) {
          return (
            <Card className="h-full bg-[#1E293B] border-[#334155]">
              <CardContent className="p-6 flex items-center justify-center h-full">
                <div className="text-center">
                  <Truck className="h-12 w-12 mx-auto mb-2 text-[#94A3B8]" />
                  <p className="text-[#F1F5F9]">Select a vehicle from the map or list to view details</p>
                </div>
              </CardContent>
            </Card>
          );
        }

        const getStatusColor = (status: VehicleStatus) => {
          switch (status) {
            case 'Active':
              return 'bg-[#10B981]';
            case 'Idle':
              return 'bg-[#F59E0B]';
            case 'Maintenance':
              return 'bg-[#EF4444]';
            default:
              return 'bg-[#94A3B8]';
          }
        };

        const loadPercentage = Math.round((vehicle.currentLoad / vehicle.maxCapacity) * 100);

        return (
          <Card className="h-full bg-[#1E293B] border-[#334155] flex flex-col">
            <CardHeader className="flex-shrink-0">
              <CardTitle className="flex items-center justify-between text-[#F1F5F9]">
                <span>Vehicle Details</span>
                <Badge className={`${getStatusColor(vehicle.status)} text-white`}>{vehicle.status}</Badge>
              </CardTitle>
            </CardHeader>
            <CardContent className="space-y-6 overflow-y-auto flex-1">
              <div className="space-y-4">
                <div className="flex items-start gap-3">
                  <Truck className="h-5 w-5 text-[#3B82F6] mt-1" />
                  <div className="flex-1">
                    <p className="text-sm text-[#94A3B8]">Vehicle Number</p>
                    <p className="font-semibold text-lg text-[#F1F5F9]">{vehicle.vehicleNumber}</p>
                    <p className="text-xs text-[#94A3B8]">ID: {vehicle.id}</p>
                  </div>
                </div>

                <div className="flex items-start gap-3">
                  <User className="h-5 w-5 text-[#3B82F6] mt-1" />
                  <div className="flex-1">
                    <p className="text-sm text-[#94A3B8]">Driver</p>
                    <p className="font-semibold text-[#F1F5F9]">{vehicle.driver}</p>
                  </div>
                </div>

                <div className="flex items-start gap-3">
                  <MapPin className="h-5 w-5 text-[#3B82F6] mt-1" />
                  <div className="flex-1">
                    <p className="text-sm text-[#94A3B8]">Current Location</p>
                    <p className="font-semibold text-[#F1F5F9]">{vehicle.location.address}</p>
                    <p className="text-xs text-[#94A3B8]">
                      Lat: {vehicle.location.lat.toFixed(4)}, Lng: {vehicle.location.lng.toFixed(4)}
                    </p>
                  </div>
                </div>
              </div>

              <div className="pt-4 border-t border-[#334155]">
                <div className="flex items-center gap-2 mb-2">
                  <Package className="h-5 w-5 text-[#3B82F6]" />
                  <p className="text-sm font-medium text-[#F1F5F9]">Cargo Load</p>
                </div>
                <div className="space-y-2">
                  <div className="flex justify-between text-sm">
                    <span className="text-[#94A3B8]">Current Load</span>
                    <span className="font-semibold text-[#F1F5F9]">{vehicle.currentLoad.toLocaleString()} kg</span>
                  </div>
                  <Progress value={loadPercentage} className="h-2" />
                  <div className="flex justify-between text-xs text-[#94A3B8]">
                    <span>{loadPercentage}% capacity</span>
                    <span>Max: {vehicle.maxCapacity.toLocaleString()} kg</span>
                  </div>
                </div>
              </div>

              {vehicle.status === 'Active' && (
                <div className="pt-4 border-t border-[#334155]">
                  <div className="flex items-center gap-2 mb-3">
                    <Gauge className="h-5 w-5 text-[#3B82F6]" />
                    <p className="text-sm font-medium text-[#F1F5F9]">Performance Metrics</p>
                  </div>
                  <div className="grid grid-cols-2 gap-4">
                    <div>
                      <p className="text-xs text-[#94A3B8]">Avg Speed</p>
                      <p className="text-lg font-semibold text-[#F1F5F9]">65 km/h</p>
                    </div>
                    <div>
                      <p className="text-xs text-[#94A3B8]">Distance Today</p>
                      <p className="text-lg font-semibold text-[#F1F5F9]">342 km</p>
                    </div>
                    <div>
                      <p className="text-xs text-[#94A3B8]">Fuel Level</p>
                      <p className="text-lg font-semibold text-[#F1F5F9]">78%</p>
                    </div>
                    <div>
                      <p className="text-xs text-[#94A3B8]">ETA</p>
                      <p className="text-lg font-semibold text-[#F1F5F9]">2.5 hrs</p>
                    </div>
                  </div>
                </div>
              )}

              {vehicle.status === 'Maintenance' && (
                <div className="pt-4 border-t border-[#334155]">
                  <Badge className="bg-[#EF4444] text-white w-full justify-center py-2">
                    Vehicle Under Maintenance
                  </Badge>
                  <p className="text-sm text-[#94A3B8] mt-2 text-center">
                    Scheduled service in progress
                  </p>
                </div>
              )}
            </CardContent>
          </Card>
        );
      }
    components/VehicleListSidebar.tsx: >
      import { Card, CardContent, CardHeader, CardTitle } from
      '@/components/ui/card';

      import { Badge } from '@/components/ui/badge';

      import { Button } from '@/components/ui/button';

      import { Input } from '@/components/ui/input';

      import { Select, SelectContent, SelectItem, SelectTrigger, SelectValue }
      from '@/components/ui/select';

      import type { Vehicle, VehicleStatus } from '@/lib/types';

      import { Search, Truck } from 'lucide-react';

      import { useState, useMemo, useEffect, useRef } from 'react';


      interface VehicleListSidebarProps {
        vehicles: Vehicle[];
        selectedVehicle: Vehicle | null;
        onVehicleSelect: (vehicle: Vehicle) => void;
      }


      export function VehicleListSidebar({ vehicles, selectedVehicle,
      onVehicleSelect }: VehicleListSidebarProps) {
        const [searchQuery, setSearchQuery] = useState('');
        const [statusFilter, setStatusFilter] = useState<string>('all');
        const vehicleRefs = useRef<{ [key: string]: HTMLDivElement | null }>({});

        const getStatusColor = (status: VehicleStatus) => {
          switch (status) {
            case 'Active':
              return 'bg-[#10B981]';
            case 'Idle':
              return 'bg-[#F59E0B]';
            case 'Maintenance':
              return 'bg-[#EF4444]';
            default:
              return 'bg-[#94A3B8]';
          }
        };

        const filteredVehicles = useMemo(() => {
          return vehicles.filter((vehicle) => {
            const matchesSearch = 
              vehicle.vehicleNumber.toLowerCase().includes(searchQuery.toLowerCase()) ||
              vehicle.driver.toLowerCase().includes(searchQuery.toLowerCase()) ||
              vehicle.id.toLowerCase().includes(searchQuery.toLowerCase());

            const matchesStatus = statusFilter === 'all' || vehicle.status === statusFilter;

            return matchesSearch && matchesStatus;
          });
        }, [vehicles, searchQuery, statusFilter]);

        useEffect(() => {
          if (selectedVehicle && vehicleRefs.current[selectedVehicle.id]) {
            vehicleRefs.current[selectedVehicle.id]?.scrollIntoView({
              behavior: 'smooth',
              block: 'nearest',
            });
          }
        }, [selectedVehicle]);

        return (
          <Card className="h-full flex flex-col bg-[#1E293B] border-[#334155]">
            <CardHeader>
              <CardTitle className="text-lg text-[#F1F5F9]">Vehicles ({filteredVehicles.length})</CardTitle>
            </CardHeader>
            <CardContent className="flex-1 overflow-hidden flex flex-col gap-4 p-4">
              <div className="space-y-2">
                <div className="relative">
                  <Search className="absolute left-3 top-3 h-4 w-4 text-[#94A3B8]" />
                  <Input
                    placeholder="Search vehicles..."
                    value={searchQuery}
                    onChange={(e) => setSearchQuery(e.target.value)}
                    className="pl-10 bg-[#0F172A] border-[#334155] text-[#F1F5F9] placeholder:text-[#94A3B8]"
                  />
                </div>
                <Select value={statusFilter} onValueChange={setStatusFilter}>
                  <SelectTrigger className="bg-[#0F172A] border-[#334155]">
                    <SelectValue placeholder="Filter by status" />
                  </SelectTrigger>
                  <SelectContent>
                    <SelectItem value="all">All Status</SelectItem>
                    <SelectItem value="Active">Active</SelectItem>
                    <SelectItem value="Idle">Idle</SelectItem>
                    <SelectItem value="Maintenance">Maintenance</SelectItem>
                  </SelectContent>
                </Select>
              </div>

              <div className="flex-1 overflow-y-auto space-y-2 pr-2">
                {filteredVehicles.map((vehicle) => (
                  <Card
                    key={vehicle.id}
                    ref={(el) => {
                      vehicleRefs.current[vehicle.id] = el;
                    }}
                    className={`cursor-pointer transition-all hover:shadow-md bg-[#0F172A] ${
                      selectedVehicle?.id === vehicle.id ? 'border-2 border-[#3B82F6]' : 'border border-[#334155]'
                    }`}
                    onClick={() => onVehicleSelect(vehicle)}
                  >
                    <CardContent className="p-3">
                      <div className="flex items-start justify-between mb-2">
                        <div className="flex items-center gap-2">
                          <Truck className="h-4 w-4 text-[#94A3B8]" />
                          <span className="font-semibold text-sm text-[#F1F5F9]">{vehicle.vehicleNumber}</span>
                        </div>
                        <Badge className={`${getStatusColor(vehicle.status)} text-white text-xs`}>
                          {vehicle.status}
                        </Badge>
                      </div>
                      <p className="text-xs text-[#94A3B8] mb-1">Driver: {vehicle.driver}</p>
                      <p className="text-xs text-[#94A3B8] truncate">{vehicle.location.address}</p>
                      <div className="mt-2 flex justify-between text-xs">
                        <span className="text-[#94A3B8]">Load: {Math.round((vehicle.currentLoad / vehicle.maxCapacity) * 100)}%</span>
                        <span className="text-[#94A3B8]">{vehicle.currentLoad.toLocaleString()} kg</span>
                      </div>
                    </CardContent>
                  </Card>
                ))}
                {filteredVehicles.length === 0 && (
                  <div className="text-center py-8 text-[#94A3B8]">
                    <p className="text-sm">No vehicles found</p>
                  </div>
                )}
              </div>
            </CardContent>
          </Card>
        );
      }
    components/VehiclesPage.tsx: >+
      import { useState, useMemo } from 'react';

      import { Card, CardContent, CardHeader, CardTitle } from
      '@/components/ui/card';

      import { Badge } from '@/components/ui/badge';

      import { VehicleMap } from '@/components/VehicleMap';

      import { VehicleDetailPanel } from '@/components/VehicleDetailPanel';

      import { VehicleListSidebar } from '@/components/VehicleListSidebar';

      import { generateVehicles } from '@/lib/mockData';

      import type { Vehicle } from '@/lib/types';

      import { Truck, Activity, Wrench, PauseCircle } from 'lucide-react';

      import 'leaflet/dist/leaflet.css';


      export function VehiclesPage() {
        const [vehicles] = useState<Vehicle[]>(() => generateVehicles());
        const [selectedVehicle, setSelectedVehicle] = useState<Vehicle | null>(null);

        const handleVehicleSelect = (vehicle: Vehicle) => {
          const actualVehicle = vehicles.find(v => v.id === vehicle.id);
          setSelectedVehicle(actualVehicle || vehicle);
        };

        const statusCounts = useMemo(() => {
          return {
            total: vehicles.length,
            active: vehicles.filter(v => v.status === 'Active').length,
            idle: vehicles.filter(v => v.status === 'Idle').length,
            maintenance: vehicles.filter(v => v.status === 'Maintenance').length,
          };
        }, [vehicles]);

        return (
          <div className="min-h-screen bg-[#0F172A] p-4 sm:p-6 lg:p-8">
            <div className="max-w-[1800px] mx-auto space-y-6">
              <div className="grid grid-cols-1 sm:grid-cols-4 gap-4">
                <Card className="hover:shadow-lg transition-shadow bg-[#1E293B] border-[#334155]">
                  <CardContent className="p-6">
                    <div className="flex items-start justify-between gap-6">
                      <div className="flex flex-col space-y-3 flex-1 min-w-0">
                        <p className="text-sm font-medium text-[#94A3B8]">Total Vehicles</p>
                        <p className="text-3xl font-bold text-[#F1F5F9]">{statusCounts.total}</p>
                      </div>
                      <div className="text-[#3B82F6] opacity-80 flex-shrink-0">
                        <Truck className="h-8 w-8" />
                      </div>
                    </div>
                  </CardContent>
                </Card>
                <Card className="hover:shadow-lg transition-shadow bg-[#1E293B] border-[#334155]">
                  <CardContent className="p-6">
                    <div className="flex items-start justify-between gap-6">
                      <div className="flex flex-col space-y-3 flex-1 min-w-0">
                        <p className="text-sm font-medium text-[#94A3B8]">Active</p>
                        <p className="text-3xl font-bold text-[#10B981]">{statusCounts.active}</p>
                      </div>
                      <div className="text-[#3B82F6] opacity-80 flex-shrink-0">
                        <Activity className="h-8 w-8" />
                      </div>
                    </div>
                  </CardContent>
                </Card>
                <Card className="hover:shadow-lg transition-shadow bg-[#1E293B] border-[#334155]">
                  <CardContent className="p-6">
                    <div className="flex items-start justify-between gap-6">
                      <div className="flex flex-col space-y-3 flex-1 min-w-0">
                        <p className="text-sm font-medium text-[#94A3B8]">Idle</p>
                        <p className="text-3xl font-bold text-[#F59E0B]">{statusCounts.idle}</p>
                      </div>
                      <div className="text-[#3B82F6] opacity-80 flex-shrink-0">
                        <PauseCircle className="h-8 w-8" />
                      </div>
                    </div>
                  </CardContent>
                </Card>
                <Card className="hover:shadow-lg transition-shadow bg-[#1E293B] border-[#334155]">
                  <CardContent className="p-6">
                    <div className="flex items-start justify-between gap-6">
                      <div className="flex flex-col space-y-3 flex-1 min-w-0">
                        <p className="text-sm font-medium text-[#94A3B8]">Maintenance</p>
                        <p className="text-3xl font-bold text-[#EF4444]">{statusCounts.maintenance}</p>
                      </div>
                      <div className="text-[#3B82F6] opacity-80 flex-shrink-0">
                        <Wrench className="h-8 w-8" />
                      </div>
                    </div>
                  </CardContent>
                </Card>
              </div>

              <div className="grid grid-cols-1 lg:grid-cols-12 gap-6">
                <div className="lg:col-span-3">
                  <div className="h-[600px]">
                    <VehicleListSidebar
                      vehicles={vehicles}
                      selectedVehicle={selectedVehicle}
                      onVehicleSelect={handleVehicleSelect}
                    />
                  </div>
                </div>

                <div className="lg:col-span-6">
                  <Card className="h-[600px] bg-[#1E293B] border-[#334155]">
                    <CardHeader>
                      <CardTitle className="flex items-center justify-between text-[#F1F5F9]">
                        <span>Vehicle Locations</span>
                        <div className="flex gap-2">
                          <Badge className="bg-[#10B981] text-white">Active</Badge>
                          <Badge className="bg-[#F59E0B] text-white">Idle</Badge>
                          <Badge className="bg-[#EF4444] text-white">Maintenance</Badge>
                        </div>
                      </CardTitle>
                    </CardHeader>
                    <CardContent className="p-0 h-[calc(100%-80px)]">
                      <VehicleMap
                        vehicles={vehicles}
                        selectedVehicle={selectedVehicle}
                        onVehicleClick={handleVehicleSelect}
                      />
                    </CardContent>
                  </Card>
                </div>

                <div className="lg:col-span-3">
                  <div className="h-[600px]">
                    <VehicleDetailPanel vehicle={selectedVehicle} />
                  </div>
                </div>
              </div>
            </div>
          </div>
        );
      }

    components/InventoryCategoryChart.tsx: >
      import { Card, CardContent, CardHeader, CardTitle } from
      '@/components/ui/card';

      import { BarChart, Bar, XAxis, YAxis, CartesianGrid, Tooltip, Legend,
      ResponsiveContainer, Cell } from 'recharts';


      interface InventoryCategoryChartProps {
        data: { category: string; quantity: number; inStock: number; lowStock: number; outOfStock: number }[];
      }


      export function InventoryCategoryChart({ data }:
      InventoryCategoryChartProps) {
        const COLORS = {
          inStock: '#10B981',
          lowStock: '#F59E0B',
          outOfStock: '#EF4444',
        };

        return (
          <Card className="bg-[#1E293B] border-[#334155]">
            <CardHeader>
              <CardTitle className="text-[#F1F5F9]">Inventory Levels by Category</CardTitle>
            </CardHeader>
            <CardContent>
              <ResponsiveContainer width="100%" height={300}>
                <BarChart data={data}>
                  <CartesianGrid strokeDasharray="3 3" stroke="#334155" />
                  <XAxis dataKey="category" stroke="#94A3B8" tick={{ fill: '#F1F5F9' }} />
                  <YAxis stroke="#94A3B8" />
                  <Tooltip 
                    contentStyle={{ backgroundColor: '#1E293B', border: '1px solid #334155', color: '#F1F5F9' }}
                    labelStyle={{ color: '#F1F5F9' }}
                    itemStyle={{ color: '#F1F5F9' }}
                  />
                  <Legend wrapperStyle={{ color: '#F1F5F9' }} />
                  <Bar dataKey="inStock" stackId="a" fill={COLORS.inStock} name="In Stock" />
                  <Bar dataKey="lowStock" stackId="a" fill={COLORS.lowStock} name="Low Stock" />
                  <Bar dataKey="outOfStock" stackId="a" fill={COLORS.outOfStock} name="Out of Stock" />
                </BarChart>
              </ResponsiveContainer>
            </CardContent>
          </Card>
        );
      }
    components/InventoryDetailDialog.tsx: >
      import { Dialog, DialogContent, DialogHeader, DialogTitle } from
      '@/components/ui/dialog';

      import { Badge } from '@/components/ui/badge';

      import { Card, CardContent } from '@/components/ui/card';

      import { Progress } from '@/components/ui/progress';

      import type { InventoryItem, InventoryStatus } from '@/lib/types';

      import { Package, MapPin, Calendar, TrendingDown, AlertTriangle } from
      'lucide-react';


      interface InventoryDetailDialogProps {
        item: InventoryItem | null;
        open: boolean;
        onOpenChange: (open: boolean) => void;
      }


      export function InventoryDetailDialog({ item, open, onOpenChange }:
      InventoryDetailDialogProps) {
        if (!item) return null;

        const getStatusColor = (status: InventoryStatus) => {
          switch (status) {
            case 'In Stock':
              return 'bg-green-600';
            case 'Low Stock':
              return 'bg-yellow-600';
            case 'Out of Stock':
              return 'bg-red-600';
            default:
              return 'bg-gray-600';
          }
        };

        const stockPercentage = Math.round((item.quantity / (item.reorderLevel * 10)) * 100);
        const needsReorder = item.quantity < item.reorderLevel;

        const mockHistory = [
          { date: '2025-10-05', action: 'Restocked', quantity: 150, location: item.location },
          { date: '2025-09-28', action: 'Shipped', quantity: -75, location: 'Distribution Center' },
          { date: '2025-09-20', action: 'Restocked', quantity: 200, location: item.location },
          { date: '2025-09-15', action: 'Transferred', quantity: -50, location: 'Warehouse B' },
        ];

        return (
          <Dialog open={open} onOpenChange={onOpenChange}>
            <DialogContent className="max-w-3xl max-h-[90vh] overflow-y-auto">
              <DialogHeader>
                <DialogTitle className="text-2xl">Inventory Item Details</DialogTitle>
              </DialogHeader>
              
              <div className="space-y-6">
                <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
                  <div>
                    <p className="text-sm text-gray-600">Product Name</p>
                    <p className="font-semibold text-lg">{item.productName}</p>
                    <p className="text-xs text-gray-500">ID: {item.id}</p>
                  </div>
                  <div className="flex items-center gap-2">
                    <p className="text-sm text-gray-600">Status:</p>
                    <Badge className={getStatusColor(item.status)}>{item.status}</Badge>
                  </div>
                </div>

                <div className="grid grid-cols-1 md:grid-cols-3 gap-4 p-4 bg-gray-50 rounded-lg">
                  <div className="flex items-start gap-3">
                    <Package className="h-5 w-5 text-blue-600 mt-1" />
                    <div>
                      <p className="text-sm font-medium text-gray-600">Category</p>
                      <p className="font-semibold">{item.category}</p>
                    </div>
                  </div>
                  <div className="flex items-start gap-3">
                    <MapPin className="h-5 w-5 text-blue-600 mt-1" />
                    <div>
                      <p className="text-sm font-medium text-gray-600">Location</p>
                      <p className="font-semibold">{item.location}</p>
                    </div>
                  </div>
                  <div className="flex items-start gap-3">
                    <Calendar className="h-5 w-5 text-blue-600 mt-1" />
                    <div>
                      <p className="text-sm font-medium text-gray-600">Last Restocked</p>
                      <p className="font-semibold">{item.lastRestocked}</p>
                    </div>
                  </div>
                </div>

                <Card>
                  <CardContent className="p-6">
                    <div className="space-y-4">
                      <div>
                        <div className="flex justify-between mb-2">
                          <span className="text-sm font-medium">Current Stock Level</span>
                          <span className="text-sm font-medium">{item.quantity} units</span>
                        </div>
                        <Progress value={stockPercentage} className="h-2" />
                        <div className="flex justify-between mt-1 text-xs text-gray-500">
                          <span>Reorder Level: {item.reorderLevel}</span>
                          <span>{stockPercentage}% of max capacity</span>
                        </div>
                      </div>

                      {needsReorder && (
                        <div className="flex items-center gap-2 p-3 bg-yellow-50 border border-yellow-200 rounded-lg">
                          <AlertTriangle className="h-5 w-5 text-yellow-600" />
                          <div>
                            <p className="text-sm font-medium text-yellow-800">Reorder Required</p>
                            <p className="text-xs text-yellow-700">Stock level is below minimum threshold</p>
                          </div>
                        </div>
                      )}

                      {item.status === 'Out of Stock' && (
                        <div className="flex items-center gap-2 p-3 bg-red-50 border border-red-200 rounded-lg">
                          <AlertTriangle className="h-5 w-5 text-red-600" />
                          <div>
                            <p className="text-sm font-medium text-red-800">Out of Stock</p>
                            <p className="text-xs text-red-700">Immediate restocking required</p>
                          </div>
                        </div>
                      )}
                    </div>
                  </CardContent>
                </Card>

                <Card>
                  <CardContent className="p-6">
                    <div className="flex items-center gap-2 mb-4">
                      <TrendingDown className="h-5 w-5 text-blue-600" />
                      <h3 className="font-semibold">Recent Activity</h3>
                    </div>
                    <div className="space-y-3">
                      {mockHistory.map((entry, index) => (
                        <div key={index} className="flex items-start gap-3 pb-3 border-b last:border-b-0">
                          <div className="flex-1">
                            <div className="flex items-center justify-between">
                              <p className="font-medium text-sm">{entry.action}</p>
                              <Badge variant={entry.quantity > 0 ? 'default' : 'secondary'} className="text-xs">
                                {entry.quantity > 0 ? '+' : ''}{entry.quantity} units
                              </Badge>
                            </div>
                            <p className="text-xs text-gray-600 mt-1">{entry.location}</p>
                            <p className="text-xs text-gray-500">{entry.date}</p>
                          </div>
                        </div>
                      ))}
                    </div>
                  </CardContent>
                </Card>
              </div>
            </DialogContent>
          </Dialog>
        );
      }
    components/InventoryPage.tsx: >+
      import { useState, useMemo } from 'react';

      import { Card, CardContent, CardHeader, CardTitle } from
      '@/components/ui/card';

      import { Input } from '@/components/ui/input';

      import { Select, SelectContent, SelectItem, SelectTrigger, SelectValue }
      from '@/components/ui/select';

      import { Table, TableBody, TableCell, TableHead, TableHeader, TableRow }
      from '@/components/ui/table';

      import { Badge } from '@/components/ui/badge';

      import { Button } from '@/components/ui/button';

      import { InventoryCategoryChart } from
      '@/components/InventoryCategoryChart';

      import { InventoryDetailDialog } from
      '@/components/InventoryDetailDialog';

      import { generateInventoryItems } from '@/lib/mockData';

      import type { InventoryItem, InventoryStatus } from '@/lib/types';

      import { Search, Filter, Warehouse, PackageCheck, AlertTriangle, PackageX,
      ChevronLeft, ChevronRight } from 'lucide-react';


      export function InventoryPage() {
        const [inventoryItems] = useState<InventoryItem[]>(generateInventoryItems());
        const [searchQuery, setSearchQuery] = useState('');
        const [categoryFilter, setCategoryFilter] = useState<string>('all');
        const [locationFilter, setLocationFilter] = useState<string>('all');
        const [statusFilter, setStatusFilter] = useState<string>('all');
        const [selectedItem, setSelectedItem] = useState<InventoryItem | null>(null);
        const [dialogOpen, setDialogOpen] = useState(false);
        const [currentPage, setCurrentPage] = useState(1);
        const [pageSize, setPageSize] = useState(10);

        const getStatusColor = (status: InventoryStatus) => {
          switch (status) {
            case 'In Stock':
              return 'bg-[#10B981]';
            case 'Low Stock':
              return 'bg-[#F59E0B]';
            case 'Out of Stock':
              return 'bg-[#EF4444]';
            default:
              return 'bg-gray-600';
          }
        };

        const categories = useMemo(() => {
          const uniqueCategories = Array.from(new Set(inventoryItems.map(item => item.category)));
          return ['all', ...uniqueCategories];
        }, [inventoryItems]);

        const locations = useMemo(() => {
          const uniqueLocations = Array.from(new Set(inventoryItems.map(item => item.location)));
          return ['all', ...uniqueLocations];
        }, [inventoryItems]);

        const filteredItems = useMemo(() => {
          const filtered = inventoryItems.filter((item) => {
            const matchesSearch = 
              item.productName.toLowerCase().includes(searchQuery.toLowerCase()) ||
              item.id.toLowerCase().includes(searchQuery.toLowerCase()) ||
              item.category.toLowerCase().includes(searchQuery.toLowerCase());

            const matchesCategory = categoryFilter === 'all' || item.category === categoryFilter;
            const matchesLocation = locationFilter === 'all' || item.location === locationFilter;
            const matchesStatus = statusFilter === 'all' || item.status === statusFilter;

            return matchesSearch && matchesCategory && matchesLocation && matchesStatus;
          });
          
          setCurrentPage(1);
          return filtered;
        }, [inventoryItems, searchQuery, categoryFilter, locationFilter, statusFilter]);

        const paginatedItems = useMemo(() => {
          const startIndex = (currentPage - 1) * pageSize;
          const endIndex = startIndex + pageSize;
          return filteredItems.slice(startIndex, endIndex);
        }, [filteredItems, currentPage, pageSize]);

        const totalPages = Math.ceil(filteredItems.length / pageSize);

        const statusCounts = useMemo(() => {
          return {
            total: inventoryItems.length,
            inStock: inventoryItems.filter(i => i.status === 'In Stock').length,
            lowStock: inventoryItems.filter(i => i.status === 'Low Stock').length,
            outOfStock: inventoryItems.filter(i => i.status === 'Out of Stock').length,
          };
        }, [inventoryItems]);

        const chartData = useMemo(() => {
          const categoryMap = new Map<string, { inStock: number; lowStock: number; outOfStock: number }>();
          
          inventoryItems.forEach(item => {
            if (!categoryMap.has(item.category)) {
              categoryMap.set(item.category, { inStock: 0, lowStock: 0, outOfStock: 0 });
            }
            const data = categoryMap.get(item.category)!;
            if (item.status === 'In Stock') data.inStock += item.quantity;
            else if (item.status === 'Low Stock') data.lowStock += item.quantity;
            else data.outOfStock += item.quantity;
          });

          return Array.from(categoryMap.entries()).map(([category, counts]) => ({
            category,
            quantity: counts.inStock + counts.lowStock + counts.outOfStock,
            ...counts,
          }));
        }, [inventoryItems]);

        const handleRowClick = (item: InventoryItem) => {
          setSelectedItem(item);
          setDialogOpen(true);
        };

        return (
          <div className="min-h-screen bg-[#0F172A] p-4 sm:p-6 lg:p-8">
            <div className="max-w-[1800px] mx-auto space-y-6">
              <div className="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4">
                <Card className="hover:shadow-lg transition-shadow bg-[#1E293B] border-[#334155]">
                  <CardContent className="p-6">
                    <div className="flex items-start justify-between gap-6">
                      <div className="flex flex-col space-y-3 flex-1 min-w-0">
                        <p className="text-sm font-medium text-[#94A3B8]">Total Items</p>
                        <p className="text-3xl font-bold text-[#F1F5F9]">{statusCounts.total}</p>
                      </div>
                      <div className="text-[#3B82F6] opacity-80 flex-shrink-0">
                        <Warehouse className="h-8 w-8" />
                      </div>
                    </div>
                  </CardContent>
                </Card>
                <Card className="hover:shadow-lg transition-shadow bg-[#1E293B] border-[#334155]">
                  <CardContent className="p-6">
                    <div className="flex items-start justify-between gap-6">
                      <div className="flex flex-col space-y-3 flex-1 min-w-0">
                        <p className="text-sm font-medium text-[#94A3B8]">In Stock</p>
                        <p className="text-3xl font-bold text-[#10B981]">{statusCounts.inStock}</p>
                      </div>
                      <div className="text-[#3B82F6] opacity-80 flex-shrink-0">
                        <PackageCheck className="h-8 w-8" />
                      </div>
                    </div>
                  </CardContent>
                </Card>
                <Card className="hover:shadow-lg transition-shadow bg-[#1E293B] border-[#334155]">
                  <CardContent className="p-6">
                    <div className="flex items-start justify-between gap-6">
                      <div className="flex flex-col space-y-3 flex-1 min-w-0">
                        <p className="text-sm font-medium text-[#94A3B8]">Low Stock</p>
                        <p className="text-3xl font-bold text-[#F59E0B]">{statusCounts.lowStock}</p>
                      </div>
                      <div className="text-[#3B82F6] opacity-80 flex-shrink-0">
                        <AlertTriangle className="h-8 w-8" />
                      </div>
                    </div>
                  </CardContent>
                </Card>
                <Card className="hover:shadow-lg transition-shadow bg-[#1E293B] border-[#334155]">
                  <CardContent className="p-6">
                    <div className="flex items-start justify-between gap-6">
                      <div className="flex flex-col space-y-3 flex-1 min-w-0">
                        <p className="text-sm font-medium text-[#94A3B8]">Out of Stock</p>
                        <p className="text-3xl font-bold text-[#EF4444]">{statusCounts.outOfStock}</p>
                      </div>
                      <div className="text-[#3B82F6] opacity-80 flex-shrink-0">
                        <PackageX className="h-8 w-8" />
                      </div>
                    </div>
                  </CardContent>
                </Card>
              </div>

              <InventoryCategoryChart data={chartData} />

              <Card className="bg-[#1E293B] border-[#334155]">
                <CardContent className="p-6">
                  <div className="flex flex-col sm:flex-row gap-4">
                    <div className="flex-1 relative">
                      <Search className="absolute left-3 top-3 h-4 w-4 text-[#94A3B8]" />
                      <Input
                        placeholder="Search by product name, ID, or category..."
                        value={searchQuery}
                        onChange={(e) => setSearchQuery(e.target.value)}
                        className="pl-10 bg-[#0F172A] border-[#334155] text-[#F1F5F9] placeholder:text-[#94A3B8]"
                      />
                    </div>
                    <div className="flex flex-wrap items-center gap-2">
                      <Filter className="h-5 w-5 text-[#94A3B8]" />
                      <Select value={categoryFilter} onValueChange={setCategoryFilter}>
                        <SelectTrigger className="w-[160px] bg-[#0F172A] border-[#334155]">
                          <SelectValue placeholder="Category" />
                        </SelectTrigger>
                        <SelectContent>
                          {categories.map(cat => (
                            <SelectItem key={cat} value={cat}>
                              {cat === 'all' ? 'All Categories' : cat}
                            </SelectItem>
                          ))}
                        </SelectContent>
                      </Select>
                      <Select value={locationFilter} onValueChange={setLocationFilter}>
                        <SelectTrigger className="w-[160px] bg-[#0F172A] border-[#334155]">
                          <SelectValue placeholder="Location" />
                        </SelectTrigger>
                        <SelectContent>
                          {locations.map(loc => (
                            <SelectItem key={loc} value={loc}>
                              {loc === 'all' ? 'All Locations' : loc}
                            </SelectItem>
                          ))}
                        </SelectContent>
                      </Select>
                      <Select value={statusFilter} onValueChange={setStatusFilter}>
                        <SelectTrigger className="w-[160px] bg-[#0F172A] border-[#334155]">
                          <SelectValue placeholder="Status" />
                        </SelectTrigger>
                        <SelectContent>
                          <SelectItem value="all">All Status</SelectItem>
                          <SelectItem value="In Stock">In Stock</SelectItem>
                          <SelectItem value="Low Stock">Low Stock</SelectItem>
                          <SelectItem value="Out of Stock">Out of Stock</SelectItem>
                        </SelectContent>
                      </Select>
                      {(searchQuery || categoryFilter !== 'all' || locationFilter !== 'all' || statusFilter !== 'all') && (
                        <Button
                          variant="outline"
                          onClick={() => {
                            setSearchQuery('');
                            setCategoryFilter('all');
                            setLocationFilter('all');
                            setStatusFilter('all');
                          }}
                        >
                          Clear
                        </Button>
                      )}
                    </div>
                  </div>
                </CardContent>
              </Card>

              <Card className="bg-[#1E293B] border-[#334155]">
                <CardHeader>
                  <CardTitle className="text-[#F1F5F9]">
                    Inventory Items ({filteredItems.length} {filteredItems.length === 1 ? 'item' : 'items'})
                  </CardTitle>
                </CardHeader>
                <CardContent>
                  <div className="overflow-x-auto">
                    <Table>
                      <TableHeader>
                        <TableRow className="border-[#334155]">
                          <TableHead className="text-[#94A3B8]">ID</TableHead>
                          <TableHead className="text-[#94A3B8]">Product Name</TableHead>
                          <TableHead className="text-[#94A3B8]">Category</TableHead>
                          <TableHead className="text-[#94A3B8]">Location</TableHead>
                          <TableHead className="text-[#94A3B8]">Status</TableHead>
                          <TableHead className="text-right text-[#94A3B8]">Quantity</TableHead>
                          <TableHead className="text-right text-[#94A3B8]">Reorder Level</TableHead>
                          <TableHead className="text-[#94A3B8]">Last Restocked</TableHead>
                        </TableRow>
                      </TableHeader>
                      <TableBody>
                        {filteredItems.length === 0 ? (
                          <TableRow className="border-[#334155]">
                            <TableCell colSpan={8} className="text-center py-8 text-[#94A3B8]">
                              No inventory items found matching your criteria
                            </TableCell>
                          </TableRow>
                        ) : (
                          paginatedItems.map((item) => (
                            <TableRow
                              key={item.id}
                              className="cursor-pointer hover:bg-[#0F172A] border-[#334155]"
                              onClick={() => handleRowClick(item)}
                            >
                              <TableCell className="font-medium text-[#F1F5F9]">{item.id}</TableCell>
                              <TableCell className="text-[#F1F5F9]">{item.productName}</TableCell>
                              <TableCell className="text-[#F1F5F9]">{item.category}</TableCell>
                              <TableCell className="text-[#F1F5F9]">{item.location}</TableCell>
                              <TableCell>
                                <Badge className={`${getStatusColor(item.status)} text-white`}>{item.status}</Badge>
                              </TableCell>
                              <TableCell className="text-right font-semibold text-[#F1F5F9]">
                                {item.quantity.toLocaleString()}
                              </TableCell>
                              <TableCell className="text-right text-[#94A3B8]">
                                {item.reorderLevel.toLocaleString()}
                              </TableCell>
                              <TableCell className="text-[#94A3B8]">{item.lastRestocked}</TableCell>
                            </TableRow>
                          ))
                        )}
                      </TableBody>
                    </Table>
                  </div>
                  
                  {filteredItems.length > 0 && (
                    <div className="flex items-center justify-between pt-4 border-t border-[#334155] mt-4">
                      <div className="flex items-center gap-2">
                        <span className="text-sm text-[#94A3B8]">Show</span>
                        <Select value={String(pageSize)} onValueChange={(value) => {
                          setPageSize(Number(value));
                          setCurrentPage(1);
                        }}>
                          <SelectTrigger className="w-[80px] bg-[#0F172A] border-[#334155]">
                            <SelectValue />
                          </SelectTrigger>
                          <SelectContent>
                            <SelectItem value="10">10</SelectItem>
                            <SelectItem value="20">20</SelectItem>
                            <SelectItem value="50">50</SelectItem>
                          </SelectContent>
                        </Select>
                        <span className="text-sm text-[#94A3B8]">per page</span>
                      </div>
                      
                      <div className="flex items-center gap-2">
                        <span className="text-sm text-[#94A3B8]">
                          Page {currentPage} of {totalPages} ({filteredItems.length} total)
                        </span>
                        <div className="flex gap-1">
                          <Button
                            variant="outline"
                            size="sm"
                            onClick={() => setCurrentPage(prev => Math.max(1, prev - 1))}
                            disabled={currentPage === 1}
                            className="bg-[#0F172A] border-[#334155]"
                          >
                            <ChevronLeft className="h-4 w-4" />
                          </Button>
                          <Button
                            variant="outline"
                            size="sm"
                            onClick={() => setCurrentPage(prev => Math.min(totalPages, prev + 1))}
                            disabled={currentPage === totalPages}
                            className="bg-[#0F172A] border-[#334155]"
                          >
                            <ChevronRight className="h-4 w-4" />
                          </Button>
                        </div>
                      </div>
                    </div>
                  )}
                </CardContent>
              </Card>

              <InventoryDetailDialog
                item={selectedItem}
                open={dialogOpen}
                onOpenChange={setDialogOpen}
              />
            </div>
          </div>
        );
      }

    components/PerformanceMetricCard.tsx: >
      import { Card, CardContent } from '@/components/ui/card';

      import { TrendingUp, TrendingDown } from 'lucide-react';


      interface PerformanceMetricCardProps {
        label: string;
        value: string | number;
        change: number;
        previousValue: string | number;
        icon: React.ReactNode;
        trend: 'up' | 'down';
      }


      export function PerformanceMetricCard({ label, value, change,
      previousValue, icon, trend }: PerformanceMetricCardProps) {
        const isPositive = change >= 0;
        const trendColor = trend === 'up' ? (isPositive ? 'text-[#10B981]' : 'text-[#EF4444]') : (isPositive ? 'text-[#EF4444]' : 'text-[#10B981]');
        const bgColor = trend === 'up' ? (isPositive ? 'bg-[#10B981]/10' : 'bg-[#EF4444]/10') : (isPositive ? 'bg-[#EF4444]/10' : 'bg-[#10B981]/10');

        return (
          <Card className="bg-[#1E293B] border-[#334155]">
            <CardContent className="p-6">
              <div className="flex items-start justify-between">
                <div className="flex-1">
                  <p className="text-sm text-[#94A3B8] mb-1">{label}</p>
                  <p className="text-3xl font-bold mb-2 text-[#F1F5F9]">{value}</p>
                  <div className="flex items-center gap-2">
                    <div className={`flex items-center gap-1 px-2 py-1 rounded-full ${bgColor}`}>
                      {isPositive ? (
                        <TrendingUp className={`h-4 w-4 ${trendColor}`} />
                      ) : (
                        <TrendingDown className={`h-4 w-4 ${trendColor}`} />
                      )}
                      <span className={`text-sm font-semibold ${trendColor}`}>
                        {Math.abs(change)}%
                      </span>
                    </div>
                    <span className="text-xs text-[#94A3B8]">vs previous period</span>
                  </div>
                  <p className="text-xs text-[#94A3B8] mt-1">Previous: {previousValue}</p>
                </div>
                <div className="text-[#3B82F6]">{icon}</div>
              </div>
            </CardContent>
          </Card>
        );
      }
    components/DeliveryTrendChart.tsx: >
      import { Card, CardContent, CardHeader, CardTitle } from
      '@/components/ui/card';

      import { LineChart, Line, XAxis, YAxis, CartesianGrid, Tooltip, Legend,
      ResponsiveContainer } from 'recharts';

      import type { PerformanceMetric } from '@/lib/types';


      interface DeliveryTrendChartProps {
        data: PerformanceMetric[];
      }


      export function DeliveryTrendChart({ data }: DeliveryTrendChartProps) {
        return (
          <Card className="bg-[#1E293B] border-[#334155]">
            <CardHeader>
              <CardTitle className="text-[#F1F5F9]">On-Time Delivery Trend</CardTitle>
            </CardHeader>
            <CardContent>
              <ResponsiveContainer width="100%" height={300}>
                <LineChart data={data}>
                  <CartesianGrid strokeDasharray="3 3" stroke="#334155" />
                  <XAxis dataKey="month" stroke="#94A3B8" />
                  <YAxis domain={[0, 100]} stroke="#94A3B8" />
                  <Tooltip 
                    contentStyle={{ backgroundColor: '#1E293B', border: '1px solid #334155', color: '#F1F5F9' }}
                    labelStyle={{ color: '#F1F5F9' }}
                    itemStyle={{ color: '#F1F5F9' }}
                  />
                  <Legend wrapperStyle={{ color: '#F1F5F9' }} />
                  <Line type="monotone" dataKey="onTimeDelivery" stroke="#10B981" strokeWidth={2} name="On-Time %" />
                </LineChart>
              </ResponsiveContainer>
            </CardContent>
          </Card>
        );
      }
    components/ShipmentDistributionChart.tsx: >
      import { Card, CardContent, CardHeader, CardTitle } from
      '@/components/ui/card';

      import { PieChart, Pie, Cell, ResponsiveContainer, Legend, Tooltip } from
      'recharts';


      interface ShipmentDistributionChartProps {
        data: { name: string; value: number }[];
      }


      const COLORS = ['#10B981', '#3B82F6', '#F59E0B', '#EF4444'];


      const renderLabel = ({ cx, cy, midAngle, innerRadius, outerRadius, percent
      }: any) => {
        const RADIAN = Math.PI / 180;
        const radius = innerRadius + (outerRadius - innerRadius) * 0.5;
        const x = cx + radius * Math.cos(-midAngle * RADIAN);
        const y = cy + radius * Math.sin(-midAngle * RADIAN);

        return (
          <text 
            x={x} 
            y={y} 
            fill="#F1F5F9" 
            textAnchor={x > cx ? 'start' : 'end'} 
            dominantBaseline="central"
            style={{ fontSize: '14px', fontWeight: 'bold' }}
          >
            {`${(percent * 100).toFixed(0)}%`}
          </text>
        );
      };


      export function ShipmentDistributionChart({ data }:
      ShipmentDistributionChartProps) {
        return (
          <Card className="bg-[#1E293B] border-[#334155]">
            <CardHeader>
              <CardTitle className="text-[#F1F5F9]">Shipment Status Distribution</CardTitle>
            </CardHeader>
            <CardContent>
              <ResponsiveContainer width="100%" height={300}>
                <PieChart>
                  <Pie
                    data={data}
                    cx="50%"
                    cy="50%"
                    labelLine={false}
                    label={renderLabel}
                    outerRadius={100}
                    fill="#8884d8"
                    dataKey="value"
                  >
                    {data.map((entry, index) => (
                      <Cell key={`cell-${index}`} fill={COLORS[index % COLORS.length]} />
                    ))}
                  </Pie>
                  <Tooltip 
                    contentStyle={{ backgroundColor: '#334155', border: '1px solid #475569', color: '#F1F5F9' }}
                    labelStyle={{ color: '#F1F5F9' }}
                    itemStyle={{ color: '#F1F5F9' }}
                  />
                  <Legend wrapperStyle={{ color: '#F1F5F9' }} />
                </PieChart>
              </ResponsiveContainer>
            </CardContent>
          </Card>
        );
      }
    components/VehiclePerformanceChart.tsx: >
      import { Card, CardContent, CardHeader, CardTitle } from
      '@/components/ui/card';

      import { BarChart, Bar, XAxis, YAxis, CartesianGrid, Tooltip, Legend,
      ResponsiveContainer } from 'recharts';

      import type { VehiclePerformance } from '@/lib/types';


      interface VehiclePerformanceChartProps {
        data: VehiclePerformance[];
      }


      export function VehiclePerformanceChart({ data }:
      VehiclePerformanceChartProps) {
        return (
          <Card className="bg-[#1E293B] border-[#334155]">
            <CardHeader>
              <CardTitle className="text-[#F1F5F9]">Top Vehicle Performance (Efficiency %)</CardTitle>
            </CardHeader>
            <CardContent>
              <ResponsiveContainer width="100%" height={300}>
                <BarChart data={data.slice(0, 8)}>
                  <CartesianGrid strokeDasharray="3 3" stroke="#334155" />
                  <XAxis dataKey="vehicleId" stroke="#94A3B8" tick={{ fill: '#F1F5F9' }} />
                  <YAxis stroke="#94A3B8" />
                  <Tooltip 
                    contentStyle={{ backgroundColor: '#1E293B', border: '1px solid #334155', color: '#F1F5F9' }}
                    labelStyle={{ color: '#F1F5F9' }}
                    itemStyle={{ color: '#F1F5F9' }}
                  />
                  <Legend wrapperStyle={{ color: '#F1F5F9' }} />
                  <Bar dataKey="efficiency" fill="#3B82F6" name="Efficiency %" />
                  <Bar dataKey="deliveries" fill="#10B981" name="Deliveries" />
                </BarChart>
              </ResponsiveContainer>
            </CardContent>
          </Card>
        );
      }
    components/PerformancePage.tsx: >+
      import { useState, useMemo } from 'react';

      import { Card, CardContent, CardHeader, CardTitle } from
      '@/components/ui/card';

      import { Select, SelectContent, SelectItem, SelectTrigger, SelectValue }
      from '@/components/ui/select';

      import { Button } from '@/components/ui/button';

      import { PerformanceMetricCard } from
      '@/components/PerformanceMetricCard';

      import { DeliveryTrendChart } from '@/components/DeliveryTrendChart';

      import { ShipmentDistributionChart } from
      '@/components/ShipmentDistributionChart';

      import { VehiclePerformanceChart } from
      '@/components/VehiclePerformanceChart';

      import { generatePerformanceMetrics, generateVehiclePerformance,
      generateShipments } from '@/lib/mockData';

      import { Clock, TrendingUp, Gauge, DollarSign, Download } from
      'lucide-react';


      type DateRange = '1m' | '3m' | '6m' | '1y';


      export function PerformancePage() {
        const [dateRange, setDateRange] = useState<DateRange>('6m');
        const [performanceData] = useState(() => generatePerformanceMetrics());
        const [vehiclePerformance] = useState(() => generateVehiclePerformance());
        const [shipments] = useState(() => generateShipments());

        const filteredData = useMemo(() => {
          const rangeMap: Record<DateRange, number> = {
            '1m': 1,
            '3m': 3,
            '6m': 6,
            '1y': 12,
          };
          const months = rangeMap[dateRange];
          return performanceData.slice(-months);
        }, [performanceData, dateRange]);

        const currentMetrics = useMemo(() => {
          const recent = filteredData.slice(-1)[0];
          const previous = filteredData.slice(-2)[0];
          
          if (!recent || !previous) return null;

          return {
            onTimeDelivery: {
              current: `${recent.onTimeDelivery}%`,
              previous: `${previous.onTimeDelivery}%`,
              change: ((recent.onTimeDelivery - previous.onTimeDelivery) / previous.onTimeDelivery * 100).toFixed(1),
            },
            avgDeliveryTime: {
              current: `${recent.avgDeliveryTime.toFixed(1)} days`,
              previous: `${previous.avgDeliveryTime.toFixed(1)} days`,
              change: ((recent.avgDeliveryTime - previous.avgDeliveryTime) / previous.avgDeliveryTime * 100).toFixed(1),
            },
            fuelEfficiency: {
              current: `${recent.fuelEfficiency.toFixed(1)} km/L`,
              previous: `${previous.fuelEfficiency.toFixed(1)} km/L`,
              change: ((recent.fuelEfficiency - previous.fuelEfficiency) / previous.fuelEfficiency * 100).toFixed(1),
            },
            cost: {
              current: `$${(recent.cost / 1000).toFixed(1)}K`,
              previous: `$${(previous.cost / 1000).toFixed(1)}K`,
              change: ((recent.cost - previous.cost) / previous.cost * 100).toFixed(1),
            },
          };
        }, [filteredData]);

        const shipmentDistribution = useMemo(() => {
          const statusCount = {
            'Delivered': shipments.filter(s => s.status === 'Delivered').length,
            'In Transit': shipments.filter(s => s.status === 'In Transit').length,
            'Pending': shipments.filter(s => s.status === 'Pending').length,
            'Delayed': shipments.filter(s => s.status === 'Delayed').length,
          };

          return Object.entries(statusCount).map(([name, value]) => ({ name, value }));
        }, [shipments]);

        const handleExport = () => {
          const csvContent = [
            ['Month', 'On-Time Delivery %', 'Avg Delivery Time (days)', 'Fuel Efficiency (km/L)', 'Cost ($)'],
            ...filteredData.map(d => [d.month, d.onTimeDelivery, d.avgDeliveryTime, d.fuelEfficiency, d.cost]),
          ]
            .map(row => row.join(','))
            .join('\n');

          const blob = new Blob([csvContent], { type: 'text/csv' });
          const url = window.URL.createObjectURL(blob);
          const a = document.createElement('a');
          a.href = url;
          a.download = `performance-report-${dateRange}.csv`;
          a.click();
          window.URL.revokeObjectURL(url);
        };

        return (
          <div className="min-h-screen bg-[#0F172A] p-4 sm:p-6 lg:p-8">
            <div className="max-w-[1800px] mx-auto space-y-6">
              <div className="flex justify-end items-center gap-3">
                  <Select value={dateRange} onValueChange={(value) => setDateRange(value as DateRange)}>
                    <SelectTrigger className="w-[140px] bg-[#0F172A] border-[#334155]">
                      <SelectValue />
                    </SelectTrigger>
                    <SelectContent>
                      <SelectItem value="1m">Last Month</SelectItem>
                      <SelectItem value="3m">Last 3 Months</SelectItem>
                      <SelectItem value="6m">Last 6 Months</SelectItem>
                      <SelectItem value="1y">Last Year</SelectItem>
                    </SelectContent>
                  </Select>
                <Button onClick={handleExport} variant="outline">
                  <Download className="h-4 w-4 mr-2" />
                  Export CSV
                </Button>
              </div>

              {currentMetrics && (
                <div className="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4">
                  <PerformanceMetricCard
                    label="On-Time Delivery Rate"
                    value={currentMetrics.onTimeDelivery.current}
                    change={parseFloat(currentMetrics.onTimeDelivery.change)}
                    previousValue={currentMetrics.onTimeDelivery.previous}
                    icon={<TrendingUp className="h-8 w-8" />}
                    trend="up"
                  />
                  <PerformanceMetricCard
                    label="Avg Delivery Time"
                    value={currentMetrics.avgDeliveryTime.current}
                    change={parseFloat(currentMetrics.avgDeliveryTime.change)}
                    previousValue={currentMetrics.avgDeliveryTime.previous}
                    icon={<Clock className="h-8 w-8" />}
                    trend="down"
                  />
                  <PerformanceMetricCard
                    label="Fuel Efficiency"
                    value={currentMetrics.fuelEfficiency.current}
                    change={parseFloat(currentMetrics.fuelEfficiency.change)}
                    previousValue={currentMetrics.fuelEfficiency.previous}
                    icon={<Gauge className="h-8 w-8" />}
                    trend="up"
                  />
                  <PerformanceMetricCard
                    label="Operating Cost"
                    value={currentMetrics.cost.current}
                    change={parseFloat(currentMetrics.cost.change)}
                    previousValue={currentMetrics.cost.previous}
                    icon={<DollarSign className="h-8 w-8" />}
                    trend="down"
                  />
                </div>
              )}

              <div className="grid grid-cols-1 lg:grid-cols-2 gap-6">
                <DeliveryTrendChart data={filteredData} />
                <ShipmentDistributionChart data={shipmentDistribution} />
              </div>

              <VehiclePerformanceChart data={vehiclePerformance} />

              <Card className="bg-[#1E293B] border-[#334155]">
                <CardHeader>
                  <CardTitle className="text-[#F1F5F9]">Summary Statistics</CardTitle>
                </CardHeader>
                <CardContent>
                  <div className="grid grid-cols-2 md:grid-cols-4 gap-6">
                    <div className="text-center">
                      <p className="text-sm text-[#94A3B8]">Total Deliveries</p>
                      <p className="text-2xl font-bold text-[#F1F5F9]">{shipments.length}</p>
                    </div>
                    <div className="text-center">
                      <p className="text-sm text-[#94A3B8]">Avg Fleet Efficiency</p>
                      <p className="text-2xl font-bold text-[#F1F5F9]">
                        {Math.round(vehiclePerformance.reduce((sum, v) => sum + v.efficiency, 0) / vehiclePerformance.length)}%
                      </p>
                    </div>
                    <div className="text-center">
                      <p className="text-sm text-[#94A3B8]">Total Distance</p>
                      <p className="text-2xl font-bold text-[#F1F5F9]">147K km</p>
                    </div>
                    <div className="text-center">
                      <p className="text-sm text-[#94A3B8]">Total Fuel Used</p>
                      <p className="text-2xl font-bold text-[#F1F5F9]">
                        {Math.round(vehiclePerformance.reduce((sum, v) => sum + v.fuelUsed, 0) / 1000)}K L
                      </p>
                    </div>
                  </div>
                </CardContent>
              </Card>
            </div>
          </div>
        );
      }

    components/StatusDistributionChart.tsx: >
      import { Card, CardContent, CardHeader, CardTitle } from
      '@/components/ui/card';

      import { BarChart, Bar, XAxis, YAxis, CartesianGrid, Tooltip, Legend,
      ResponsiveContainer, Cell } from 'recharts';


      interface StatusDistributionData {
        name: string;
        value: number;
        color: string;
      }


      interface StatusDistributionChartProps {
        data: StatusDistributionData[];
        onBarClick?: (data: any) => void;
      }


      const renderLegend = () => {
        return (
          <div style={{ display: 'flex', justifyContent: 'center', alignItems: 'center', gap: '8px' }}>
            <div style={{ display: 'flex', alignItems: 'center', gap: '4px' }}>
              <div style={{ width: '14px', height: '14px', backgroundColor: '#3B82F6' }} />
              <span style={{ color: '#3B82F6' }}>Shipment Count</span>
            </div>
          </div>
        );
      };


      export function StatusDistributionChart({ data, onBarClick }:
      StatusDistributionChartProps) {
        return (
          <Card className="bg-[#1E293B] border-[#334155]">
            <CardHeader>
              <CardTitle className="text-[#F1F5F9]">Shipment Status Comparison</CardTitle>
            </CardHeader>
            <CardContent>
              <ResponsiveContainer width="100%" height={300}>
                <BarChart 
                  data={data}
                  margin={{ top: 20, right: 30, left: 20, bottom: 5 }}
                >
                  <CartesianGrid strokeDasharray="3 3" stroke="#334155" />
                  <XAxis 
                    dataKey="name" 
                    stroke="#94A3B8"
                    tick={{ fill: '#94A3B8' }}
                  />
                  <YAxis 
                    stroke="#94A3B8"
                    tick={{ fill: '#94A3B8' }}
                  />
                  <Tooltip 
                    contentStyle={{ 
                      backgroundColor: '#1E293B', 
                      border: '1px solid #334155', 
                      color: '#F1F5F9',
                      borderRadius: '6px'
                    }}
                    itemStyle={{ color: '#F1F5F9' }}
                    cursor={{ fill: 'rgba(148, 163, 184, 0.1)' }}
                  />
                  <Legend content={renderLegend} />
                  <Bar 
                    dataKey="value" 
                    name="Shipment Count"
                    onClick={onBarClick}
                    radius={[8, 8, 0, 0]}
                  >
                    {data.map((entry, index) => (
                      <Cell 
                        key={`cell-${index}`} 
                        fill={entry.color}
                        style={{ cursor: 'pointer' }}
                      />
                    ))}
                  </Bar>
                </BarChart>
              </ResponsiveContainer>
            </CardContent>
          </Card>
        );
      }
    migrations/1735228462_create_logistics_tables.sql: >
      -- Migration to create all logistics tables for AFGHCO-SHIPPING


      -- Users table for authentication

      CREATE TABLE users (
        id BIGINT GENERATED ALWAYS AS IDENTITY PRIMARY KEY,
        email TEXT NOT NULL UNIQUE,
        name TEXT NOT NULL,
        password_hash TEXT NOT NULL,
        role TEXT NOT NULL DEFAULT 'user',
        created_at TIMESTAMPTZ NOT NULL DEFAULT NOW(),
        updated_at TIMESTAMPTZ NOT NULL DEFAULT NOW()
      );


      CREATE INDEX idx_users_email ON users(email);


      -- Shipments table

      CREATE TABLE shipments (
        id BIGINT GENERATED ALWAYS AS IDENTITY PRIMARY KEY,
        tracking_number TEXT NOT NULL UNIQUE,
        status TEXT NOT NULL CHECK (status IN ('In Transit', 'Delivered', 'Pending', 'Delayed')),
        origin TEXT NOT NULL,
        destination TEXT NOT NULL,
        departure_date DATE NOT NULL,
        estimated_delivery DATE NOT NULL,
        actual_delivery DATE,
        progress INT NOT NULL DEFAULT 0 CHECK (progress >= 0 AND progress <= 100),
        created_by BIGINT REFERENCES users(id),
        created_at TIMESTAMPTZ NOT NULL DEFAULT NOW(),
        updated_at TIMESTAMPTZ NOT NULL DEFAULT NOW()
      );


      CREATE INDEX idx_shipments_status ON shipments(status);

      CREATE INDEX idx_shipments_tracking ON shipments(tracking_number);

      CREATE INDEX idx_shipments_departure ON shipments(departure_date);


      -- Vehicles table

      CREATE TABLE vehicles (
        id BIGINT GENERATED ALWAYS AS IDENTITY PRIMARY KEY,
        vehicle_number TEXT NOT NULL UNIQUE,
        driver_name TEXT NOT NULL,
        status TEXT NOT NULL CHECK (status IN ('Active', 'Idle', 'Maintenance')),
        latitude NUMERIC(10, 8) NOT NULL,
        longitude NUMERIC(11, 8) NOT NULL,
        location_address TEXT NOT NULL,
        current_load INT NOT NULL DEFAULT 0,
        max_capacity INT NOT NULL DEFAULT 5000,
        created_at TIMESTAMPTZ NOT NULL DEFAULT NOW(),
        updated_at TIMESTAMPTZ NOT NULL DEFAULT NOW()
      );


      CREATE INDEX idx_vehicles_status ON vehicles(status);

      CREATE INDEX idx_vehicles_number ON vehicles(vehicle_number);


      -- Inventory items table

      CREATE TABLE inventory_items (
        id BIGINT GENERATED ALWAYS AS IDENTITY PRIMARY KEY,
        product_name TEXT NOT NULL,
        category TEXT NOT NULL,
        quantity INT NOT NULL DEFAULT 0,
        location TEXT NOT NULL,
        status TEXT NOT NULL CHECK (status IN ('In Stock', 'Low Stock', 'Out of Stock')),
        reorder_level INT NOT NULL DEFAULT 100,
        last_restocked DATE NOT NULL,
        created_at TIMESTAMPTZ NOT NULL DEFAULT NOW(),
        updated_at TIMESTAMPTZ NOT NULL DEFAULT NOW()
      );


      CREATE INDEX idx_inventory_category ON inventory_items(category);

      CREATE INDEX idx_inventory_status ON inventory_items(status);

      CREATE INDEX idx_inventory_location ON inventory_items(location);


      -- Performance metrics table

      CREATE TABLE performance_metrics (
        id BIGINT GENERATED ALWAYS AS IDENTITY PRIMARY KEY,
        month TEXT NOT NULL,
        year INT NOT NULL,
        on_time_delivery NUMERIC(5, 2) NOT NULL,
        avg_delivery_time NUMERIC(5, 2) NOT NULL,
        fuel_efficiency NUMERIC(5, 2) NOT NULL,
        cost NUMERIC(10, 2) NOT NULL,
        created_at TIMESTAMPTZ NOT NULL DEFAULT NOW()
      );


      CREATE INDEX idx_performance_month_year ON performance_metrics(year,
      month);


      -- Vehicle performance table

      CREATE TABLE vehicle_performance (
        id BIGINT GENERATED ALWAYS AS IDENTITY PRIMARY KEY,
        vehicle_id BIGINT NOT NULL REFERENCES vehicles(id),
        deliveries INT NOT NULL DEFAULT 0,
        avg_speed NUMERIC(5, 2) NOT NULL,
        fuel_used NUMERIC(10, 2) NOT NULL,
        efficiency NUMERIC(5, 2) NOT NULL,
        recorded_at TIMESTAMPTZ NOT NULL DEFAULT NOW()
      );


      CREATE INDEX idx_vehicle_performance_vehicle ON
      vehicle_performance(vehicle_id);


      -- Shipment history/timeline table

      CREATE TABLE shipment_timeline (
        id BIGINT GENERATED ALWAYS AS IDENTITY PRIMARY KEY,
        shipment_id BIGINT NOT NULL REFERENCES shipments(id) ON DELETE CASCADE,
        event_type TEXT NOT NULL,
        location TEXT NOT NULL,
        description TEXT,
        event_date TIMESTAMPTZ NOT NULL DEFAULT NOW()
      );


      CREATE INDEX idx_shipment_timeline_shipment ON
      shipment_timeline(shipment_id);


      -- Inventory history table

      CREATE TABLE inventory_history (
        id BIGINT GENERATED ALWAYS AS IDENTITY PRIMARY KEY,
        inventory_id BIGINT NOT NULL REFERENCES inventory_items(id) ON DELETE CASCADE,
        action TEXT NOT NULL,
        quantity_change INT NOT NULL,
        location TEXT NOT NULL,
        event_date DATE NOT NULL DEFAULT CURRENT_DATE,
        created_at TIMESTAMPTZ NOT NULL DEFAULT NOW()
      );


      CREATE INDEX idx_inventory_history_item ON
      inventory_history(inventory_id);
    actions/loginUser.ts: |
      import { action } from '@uibakery/data';

      function loginUser() {
        return action('loginUser', 'SQL', {
          datasourceName: 'afghco_shipping_logistics',
          query: `
            SELECT id, email, name, role, created_at
            FROM users
            WHERE email = {{params.email}}
              AND password_hash = {{params.passwordHash}};
          `,
        });
      }

      export default loginUser;
    actions/getCurrentUser.ts: |
      import { action } from '@uibakery/data';

      function getCurrentUser() {
        return action('getCurrentUser', 'SQL', {
          datasourceName: 'afghco_shipping_logistics',
          query: `
            SELECT id, email, name, role, created_at
            FROM users
            WHERE email = {{ user.email }};
          `,
        });
      }

      export default getCurrentUser;
    actions/createUser.ts: |
      import { action } from '@uibakery/data';

      function createUser() {
        return action('createUser', 'SQL', {
          datasourceName: 'afghco_shipping_logistics',
          query: `
            INSERT INTO users (email, name, password_hash, role)
            VALUES ({{params.email}}, {{params.name}}, {{params.passwordHash}}, {{params.role}})
            RETURNING id, email, name, role, created_at;
          `,
        });
      }

      export default createUser;
    actions/loadShipments.ts: |
      import { action } from '@uibakery/data';

      function loadShipments() {
        return action('loadShipments', 'SQL', {
          datasourceName: 'afghco_shipping_logistics',
          query: `
            SELECT 
              id,
              tracking_number,
              status,
              origin,
              destination,
              departure_date,
              estimated_delivery,
              actual_delivery,
              progress,
              created_at,
              updated_at
            FROM shipments
            WHERE
              (COALESCE({{params.status}}, '') = '' OR status = {{params.status}})
              AND (COALESCE({{params.search}}, '') = '' OR tracking_number LIKE {{ '%' + params.search + '%' }})
            ORDER BY created_at DESC;
          `,
        });
      }

      export default loadShipments;
    actions/loadShipmentById.ts: |
      import { action } from '@uibakery/data';

      function loadShipmentById() {
        return action('loadShipmentById', 'SQL', {
          datasourceName: 'afghco_shipping_logistics',
          query: `
            SELECT 
              id,
              tracking_number,
              status,
              origin,
              destination,
              departure_date,
              estimated_delivery,
              actual_delivery,
              progress,
              created_at,
              updated_at
            FROM shipments
            WHERE id = {{params.shipmentId}}::bigint;
          `,
        });
      }

      export default loadShipmentById;
    actions/createShipment.ts: |
      import { action } from '@uibakery/data';

      function createShipment() {
        return action('createShipment', 'SQL', {
          datasourceName: 'afghco_shipping_logistics',
          query: `
            INSERT INTO shipments (
              tracking_number,
              status,
              origin,
              destination,
              departure_date,
              estimated_delivery,
              progress,
              created_by
            )
            VALUES (
              {{params.trackingNumber}},
              {{params.status}},
              {{params.origin}},
              {{params.destination}},
              {{params.departureDate}}::date,
              {{params.estimatedDelivery}}::date,
              {{params.progress}}::int,
              {{params.userId}}::bigint
            )
            RETURNING id, tracking_number, status, origin, destination;
          `,
        });
      }

      export default createShipment;
    actions/updateShipment.ts: |
      import { action } from '@uibakery/data';

      function updateShipment() {
        return action('updateShipment', 'SQL', {
          datasourceName: 'afghco_shipping_logistics',
          query: `
            UPDATE shipments
            SET
              status = {{params.status}},
              progress = {{params.progress}}::int,
              actual_delivery = {{params.actualDelivery}}::date,
              updated_at = NOW()
            WHERE id = {{params.shipmentId}}::bigint
            RETURNING id, tracking_number, status, progress;
          `,
        });
      }

      export default updateShipment;
    actions/loadShipmentTimeline.ts: |
      import { action } from '@uibakery/data';

      function loadShipmentTimeline() {
        return action('loadShipmentTimeline', 'SQL', {
          datasourceName: 'afghco_shipping_logistics',
          query: `
            SELECT 
              id,
              event_type,
              location,
              description,
              event_date
            FROM shipment_timeline
            WHERE shipment_id = {{params.shipmentId}}::bigint
            ORDER BY event_date DESC;
          `,
        });
      }

      export default loadShipmentTimeline;
    actions/loadVehicles.ts: |
      import { action } from '@uibakery/data';

      function loadVehicles() {
        return action('loadVehicles', 'SQL', {
          datasourceName: 'afghco_shipping_logistics',
          query: `
            SELECT 
              id,
              vehicle_number,
              driver_name,
              status,
              latitude,
              longitude,
              location_address,
              current_load,
              max_capacity,
              created_at,
              updated_at
            FROM vehicles
            WHERE
              COALESCE({{params.status}}, '') = ''
              OR status = {{params.status}}
            ORDER BY updated_at DESC;
          `,
        });
      }

      export default loadVehicles;
    actions/updateVehicleLocation.ts: |
      import { action } from '@uibakery/data';

      function updateVehicleLocation() {
        return action('updateVehicleLocation', 'SQL', {
          datasourceName: 'afghco_shipping_logistics',
          query: `
            UPDATE vehicles
            SET
              latitude = {{params.latitude}}::numeric,
              longitude = {{params.longitude}}::numeric,
              location_address = {{params.address}},
              status = {{params.status}},
              updated_at = NOW()
            WHERE id = {{params.vehicleId}}::bigint
            RETURNING id, vehicle_number, status, latitude, longitude;
          `,
        });
      }

      export default updateVehicleLocation;
    actions/createVehicle.ts: |
      import { action } from '@uibakery/data';

      function createVehicle() {
        return action('createVehicle', 'SQL', {
          datasourceName: 'afghco_shipping_logistics',
          query: `
            INSERT INTO vehicles (
              vehicle_number,
              driver_name,
              status,
              latitude,
              longitude,
              location_address,
              current_load,
              max_capacity
            )
            VALUES (
              {{params.vehicleNumber}},
              {{params.driverName}},
              {{params.status}},
              {{params.latitude}}::numeric,
              {{params.longitude}}::numeric,
              {{params.address}},
              {{params.currentLoad}}::int,
              {{params.maxCapacity}}::int
            )
            RETURNING id, vehicle_number, driver_name, status;
          `,
        });
      }

      export default createVehicle;
    actions/loadInventory.ts: |
      import { action } from '@uibakery/data';

      function loadInventory() {
        return action('loadInventory', 'SQL', {
          datasourceName: 'afghco_shipping_logistics',
          query: `
            SELECT 
              id,
              product_name,
              category,
              quantity,
              location,
              status,
              reorder_level,
              last_restocked,
              created_at,
              updated_at
            FROM inventory_items
            WHERE
              (COALESCE({{params.status}}, '') = '' OR status = {{params.status}})
              AND (COALESCE({{params.category}}, '') = '' OR category = {{params.category}})
              AND (COALESCE({{params.location}}, '') = '' OR location = {{params.location}})
            ORDER BY created_at DESC;
          `,
        });
      }

      export default loadInventory;
    actions/updateInventoryQuantity.ts: |
      import { action } from '@uibakery/data';

      function updateInventoryQuantity() {
        return action('updateInventoryQuantity', 'SQL', {
          datasourceName: 'afghco_shipping_logistics',
          query: `
            UPDATE inventory_items
            SET
              quantity = {{params.quantity}}::int,
              status = CASE
                WHEN {{params.quantity}}::int = 0 THEN 'Out of Stock'
                WHEN {{params.quantity}}::int < reorder_level THEN 'Low Stock'
                ELSE 'In Stock'
              END,
              updated_at = NOW()
            WHERE id = {{params.inventoryId}}::bigint
            RETURNING id, product_name, quantity, status;
          `,
        });
      }

      export default updateInventoryQuantity;
    actions/createInventoryItem.ts: |
      import { action } from '@uibakery/data';

      function createInventoryItem() {
        return action('createInventoryItem', 'SQL', {
          datasourceName: 'afghco_shipping_logistics',
          query: `
            INSERT INTO inventory_items (
              product_name,
              category,
              quantity,
              location,
              status,
              reorder_level,
              last_restocked
            )
            VALUES (
              {{params.productName}},
              {{params.category}},
              {{params.quantity}}::int,
              {{params.location}},
              {{params.status}},
              {{params.reorderLevel}}::int,
              {{params.lastRestocked}}::date
            )
            RETURNING id, product_name, category, quantity, status;
          `,
        });
      }

      export default createInventoryItem;
    actions/loadInventoryHistory.ts: |
      import { action } from '@uibakery/data';

      function loadInventoryHistory() {
        return action('loadInventoryHistory', 'SQL', {
          datasourceName: 'afghco_shipping_logistics',
          query: `
            SELECT 
              id,
              action,
              quantity_change,
              location,
              event_date,
              created_at
            FROM inventory_history
            WHERE inventory_id = {{params.inventoryId}}::bigint
            ORDER BY event_date DESC
            LIMIT 20;
          `,
        });
      }

      export default loadInventoryHistory;
    actions/loadKPIs.ts: |
      import { action } from '@uibakery/data';

      function loadKPIs() {
        return action('loadKPIs', 'SQL', {
          datasourceName: 'afghco_shipping_logistics',
          query: `
            SELECT
              (SELECT COUNT(*) FROM shipments) as total_shipments,
              (SELECT COUNT(*) FROM vehicles WHERE status = 'Active') as active_vehicles,
              (SELECT COUNT(*) FROM inventory_items) as inventory_items,
              (SELECT ROUND(AVG(on_time_delivery), 2) FROM performance_metrics WHERE year = EXTRACT(YEAR FROM NOW())) as on_time_delivery;
          `,
        });
      }

      export default loadKPIs;
    actions/loadShipmentTrends.ts: |
      import { action } from '@uibakery/data';

      function loadShipmentTrends() {
        return action('loadShipmentTrends', 'SQL', {
          datasourceName: 'afghco_shipping_logistics',
          query: `
            SELECT
              TO_CHAR(created_at, 'Mon') as month,
              COUNT(*) FILTER (WHERE status = 'In Transit') as in_transit,
              COUNT(*) FILTER (WHERE status = 'Delivered') as delivered,
              COUNT(*) FILTER (WHERE status = 'Pending') as pending,
              COUNT(*) FILTER (WHERE status = 'Delayed') as delayed
            FROM shipments
            WHERE created_at >= NOW() - INTERVAL '10 months'
            GROUP BY TO_CHAR(created_at, 'Mon'), EXTRACT(MONTH FROM created_at)
            ORDER BY EXTRACT(MONTH FROM created_at);
          `,
        });
      }

      export default loadShipmentTrends;
    actions/loadInventoryByCategory.ts: |
      import { action } from '@uibakery/data';

      function loadInventoryByCategory() {
        return action('loadInventoryByCategory', 'SQL', {
          datasourceName: 'afghco_shipping_logistics',
          query: `
            SELECT
              category,
              SUM(quantity) as quantity
            FROM inventory_items
            GROUP BY category
            ORDER BY quantity DESC;
          `,
        });
      }

      export default loadInventoryByCategory;
    actions/loadPerformanceMetrics.ts: |
      import { action } from '@uibakery/data';

      function loadPerformanceMetrics() {
        return action('loadPerformanceMetrics', 'SQL', {
          datasourceName: 'afghco_shipping_logistics',
          query: `
            SELECT
              month,
              year,
              on_time_delivery,
              avg_delivery_time,
              fuel_efficiency,
              cost,
              created_at
            FROM performance_metrics
            WHERE year >= EXTRACT(YEAR FROM NOW()) - 1
            ORDER BY year DESC, id DESC;
          `,
        });
      }

      export default loadPerformanceMetrics;
    actions/loadVehiclePerformance.ts: |
      import { action } from '@uibakery/data';

      function loadVehiclePerformance() {
        return action('loadVehiclePerformance', 'SQL', {
          datasourceName: 'afghco_shipping_logistics',
          query: `
            SELECT
              vp.vehicle_id,
              v.vehicle_number,
              vp.deliveries,
              vp.avg_speed,
              vp.fuel_used,
              vp.efficiency,
              vp.recorded_at
            FROM vehicle_performance vp
            JOIN vehicles v ON v.id = vp.vehicle_id
            ORDER BY vp.recorded_at DESC
            LIMIT 10;
          `,
        });
      }

      export default loadVehiclePerformance;
    components/LoginPage.tsx: >
      import { useState } from 'react';

      import { Card, CardContent, CardHeader, CardTitle } from
      '@/components/ui/card';

      import { Input } from '@/components/ui/input';

      import { Button } from '@/components/ui/button';

      import { Truck, Lock, Mail } from 'lucide-react';

      import { useMutateAction } from '@uibakery/data';

      import loginUserAction from '@/actions/loginUser';


      interface LoginPageProps {
        onLoginSuccess: (user: any) => void;
      }


      export function LoginPage({ onLoginSuccess }: LoginPageProps) {
        const [email, setEmail] = useState('');
        const [password, setPassword] = useState('');
        const [error, setError] = useState('');
        const [login, isLoading] = useMutateAction(loginUserAction);

        const hashPassword = (pwd: string): string => {
          let hash = 0;
          for (let i = 0; i < pwd.length; i++) {
            const char = pwd.charCodeAt(i);
            hash = ((hash << 5) - hash) + char;
            hash = hash & hash;
          }
          return hash.toString();
        };

        const handleLogin = async (e: React.FormEvent) => {
          e.preventDefault();
          setError('');

          if (!email || !password) {
            setError('Please enter both email and password');
            return;
          }

          try {
            const passwordHash = hashPassword(password);
            const result = await login({ email, passwordHash });

            if (result && result.length > 0) {
              onLoginSuccess(result[0]);
            } else {
              setError('Invalid email or password');
            }
          } catch (err) {
            console.error('Login error:', err);
            setError('Login failed. Please try again.');
          }
        };

        return (
          <div className="min-h-screen bg-[#0F172A] flex items-center justify-center p-4">
            <Card className="w-full max-w-md bg-[#1E293B] border-[#334155]">
              <CardHeader className="space-y-4 text-center">
                <div className="flex justify-center">
                  <div className="bg-[#3B82F6] p-4 rounded-full">
                    <Truck className="h-12 w-12 text-white" />
                  </div>
                </div>
                <CardTitle className="text-3xl font-bold text-[#F1F5F9]">
                  AFGHCO-SHIPPING
                </CardTitle>
                <p className="text-[#94A3B8]">Logistics Management System</p>
              </CardHeader>
              <CardContent>
                <form onSubmit={handleLogin} className="space-y-4">
                  <div className="space-y-2">
                    <label className="text-sm font-medium text-[#F1F5F9]">Email</label>
                    <div className="relative">
                      <Mail className="absolute left-3 top-3 h-4 w-4 text-[#94A3B8]" />
                      <Input
                        type="email"
                        placeholder="your.email@afghco.af"
                        value={email}
                        onChange={(e) => setEmail(e.target.value)}
                        className="pl-10 bg-[#0F172A] border-[#334155] text-[#F1F5F9]"
                        disabled={isLoading}
                      />
                    </div>
                  </div>

                  <div className="space-y-2">
                    <label className="text-sm font-medium text-[#F1F5F9]">Password</label>
                    <div className="relative">
                      <Lock className="absolute left-3 top-3 h-4 w-4 text-[#94A3B8]" />
                      <Input
                        type="password"
                        placeholder="Enter your password"
                        value={password}
                        onChange={(e) => setPassword(e.target.value)}
                        className="pl-10 bg-[#0F172A] border-[#334155] text-[#F1F5F9]"
                        disabled={isLoading}
                      />
                    </div>
                  </div>

                  {error && (
                    <div className="bg-red-900/20 border border-red-500 text-red-400 px-4 py-2 rounded text-sm">
                      {error}
                    </div>
                  )}

                  <Button
                    type="submit"
                    className="w-full bg-[#3B82F6] hover:bg-[#2563EB]"
                    disabled={isLoading}
                  >
                    {isLoading ? 'Signing in...' : 'Sign In'}
                  </Button>
                </form>

                <div className="mt-6 text-center text-sm text-[#94A3B8]">
                  <p>Afghanistan  Secure Logistics Dashboard</p>
                </div>
              </CardContent>
            </Card>
          </div>
        );
      }
    lib/dataAdapters.ts: >
      // Data adapters to transform database snake_case to component-friendly
      formats


      import type { Shipment, Vehicle, InventoryItem, PerformanceMetric,
      VehiclePerformance } from './types';


      export function adaptShipment(dbShipment: any): any {
        return {
          id: dbShipment.id,
          trackingNumber: dbShipment.tracking_number,
          status: dbShipment.status,
          origin: dbShipment.origin,
          destination: dbShipment.destination,
          departureDate: dbShipment.departure_date,
          estimatedDelivery: dbShipment.estimated_delivery,
          actualDelivery: dbShipment.actual_delivery,
          progress: dbShipment.progress,
        };
      }


      export function adaptVehicle(dbVehicle: any): any {
        return {
          id: dbVehicle.id,
          vehicleNumber: dbVehicle.vehicle_number,
          driver: dbVehicle.driver_name,
          status: dbVehicle.status,
          location: {
            lat: parseFloat(dbVehicle.latitude),
            lng: parseFloat(dbVehicle.longitude),
            address: dbVehicle.location_address,
          },
          currentLoad: dbVehicle.current_load,
          maxCapacity: dbVehicle.max_capacity,
        };
      }


      export function adaptInventoryItem(dbItem: any): any {
        return {
          id: dbItem.id,
          productName: dbItem.product_name,
          category: dbItem.category,
          quantity: dbItem.quantity,
          location: dbItem.location,
          status: dbItem.status,
          reorderLevel: dbItem.reorder_level,
          lastRestocked: dbItem.last_restocked,
        };
      }


      export function adaptPerformanceMetric(dbMetric: any): any {
        return {
          month: dbMetric.month,
          onTimeDelivery: dbMetric.on_time_delivery,
          avgDeliveryTime: dbMetric.avg_delivery_time,
          fuelEfficiency: dbMetric.fuel_efficiency,
          cost: dbMetric.cost,
        };
      }


      export function adaptVehiclePerformance(dbPerf: any): any {
        return {
          vehicleId: dbPerf.vehicle_id?.toString() || dbPerf.vehicle_number,
          deliveries: dbPerf.deliveries,
          avgSpeed: dbPerf.avg_speed,
          fuelUsed: dbPerf.fuel_used,
          efficiency: dbPerf.efficiency,
        };
      }


      export function adaptShipmentTrend(dbTrend: any): any {
        return {
          date: dbTrend.month,
          inTransit: dbTrend.in_transit || 0,
          delivered: dbTrend.delivered || 0,
          pending: dbTrend.pending || 0,
          delayed: dbTrend.delayed || 0,
        };
      }
    task.md: >
      # AFGHCO-SHIPPING Functional Dashboard Implementation


      ## Database & Authentication

      - [x] Create database migrations for all tables

      - [x] Create authentication actions (login, getCurrentUser, createUser)  

      - [x] Create database actions for shipments, vehicles, inventory,
      performance

      - [x] Create LoginPage component

      - [x] Update App.tsx with authentication flow

      - [x] Update Navigation with logout and user info

      - [x] Fix type definitions (dual interface approach)


      ## Real-Time Features

      - [x] Create alerts database table and notification system

      - [x] Create GPS tracking history table

      - [x] Implement automated alert generation functions

      - [x] Create alert management actions (load, mark read, dismiss)

      - [x] Create GPS tracking actions

      - [x] Build AlertsPanel component with auto-refresh

      - [x] Build RealTimeGPSTracker component with live updates

      - [x] Integrate real-time features into dashboard


      ## Alert Types Implemented

      - [x] Shipment delayed alerts

      - [x] Low stock/out of stock alerts

      - [x] Vehicle maintenance alerts

      - [x] Idle vehicle alerts

      - [x] Delivery completion notifications


      ## Real-Time Tracking Features

      - [x] 30-second GPS update interval

      - [x] Vehicle location history tracking

      - [x] Speed and heading tracking

      - [x] Live status indicators

      - [x] Auto-refresh for active vehicles


      ## Next Steps

      - [ ] Add test data for alerts

      - [ ] Test GPS tracking with real vehicles

      - [ ] Add notification sounds/browser notifications

      - [ ] Implement alert filtering and search

      - [ ] Add GPS route playback feature

      - [ ] Create alert statistics dashboard
    README.md: >
      # AFGHCO-SHIPPING Logistics Dashboard


      A comprehensive real-time logistics management system for AFGHCO-SHIPPING
      company in Afghanistan with GPS tracking and automated alerts.


      ## Features


      ###  Core Features

      - **Secure Authentication**: Login/logout system with session management

      - **Dashboard Overview**: Real-time KPIs and analytics

      - **Shipments Management**: Track shipments with status, origin,
      destination

      - **Vehicle Tracking**: Monitor fleet with GPS locations on interactive
      maps

      - **Inventory Management**: Track stock levels, categories, and warehouse
      locations

      - **Performance Metrics**: Analyze delivery times, fuel efficiency, and
      costs

      - **Responsive Design**: Works on desktop, tablet, and mobile devices

      - **Dark Theme**: Professional dark theme optimized for logistics
      operations


      ###  Real-Time Features

      - **Live GPS Tracking**: 30-second update interval for active vehicles

      - **GPS History**: Complete tracking history with speed and heading data

      - **Automated Alerts**: Smart monitoring system that generates alerts for:
        - Delayed shipments
        - Low stock and out-of-stock items
        - Vehicles requiring maintenance
        - Idle vehicles (inactive for 6+ hours)
        - Delivery completions
      - **Alert Management**: Mark alerts as read, dismiss, filter by severity

      - **Live Status Indicators**: Real-time vehicle and shipment status
      updates

      - **Notification Badge**: Unread alert count in navigation bar with
      critical alerts highlighted


      ###  Alert System

      - **Severity Levels**: Critical, Warning, Info

      - **Auto-Generation**: Runs every minute to check system conditions

      - **Smart Filtering**: Prevents duplicate alerts within 24 hours

      - **Entity Linking**: Direct links to related shipments, vehicles, or
      inventory

      - **Historical Tracking**: Complete alert history with timestamps


      ###  Database Schema

      - **users**: User authentication and roles

      - **shipments**: Shipment tracking and status

      - **vehicles**: Fleet management and GPS tracking

      - **inventory_items**: Stock management

      - **performance_metrics**: Analytics and KPIs

      - **vehicle_performance**: Vehicle-specific metrics

      - **shipment_timeline**: Historical shipment events

      - **inventory_history**: Stock movement history

      - **alerts**: System notifications and warnings

      - **vehicle_gps_history**: Complete GPS tracking history


      ## Getting Started


      ### 1. Database Setup

      The database migrations will run automatically when the app loads,
      including:

      - All core tables

      - Alert generation functions

      - GPS tracking history

      - Automated monitoring triggers


      ### 2. Create First User

      Insert a test user into the database:


      ```sql

      INSERT INTO users (email, name, password_hash, role)

      VALUES ('admin@afghco.af', 'Admin User', '193460827', 'admin');
    migrations/applied.txt: |
      Applied migrations:
      1735228462_create_logistics_tables at 2025-12-26T15:59:44.711Z
      1735232501_create_alerts_system at 2025-12-26T16:45:37.990Z
    migrations/1735232501_create_alerts_system.sql: |
      -- Migration to create alerts and notifications system

      -- Alerts table for system notifications
      CREATE TABLE alerts (
        id BIGINT GENERATED ALWAYS AS IDENTITY PRIMARY KEY,
        alert_type TEXT NOT NULL CHECK (alert_type IN ('shipment_delayed', 'vehicle_maintenance', 'low_stock', 'delivery_completed', 'vehicle_idle', 'high_priority')),
        severity TEXT NOT NULL CHECK (severity IN ('critical', 'warning', 'info')),
        title TEXT NOT NULL,
        message TEXT NOT NULL,
        entity_type TEXT CHECK (entity_type IN ('shipment', 'vehicle', 'inventory', 'general')),
        entity_id BIGINT,
        is_read BOOLEAN NOT NULL DEFAULT FALSE,
        is_dismissed BOOLEAN NOT NULL DEFAULT FALSE,
        created_at TIMESTAMPTZ NOT NULL DEFAULT NOW(),
        read_at TIMESTAMPTZ,
        dismissed_at TIMESTAMPTZ
      );

      CREATE INDEX idx_alerts_type ON alerts(alert_type);
      CREATE INDEX idx_alerts_severity ON alerts(severity);
      CREATE INDEX idx_alerts_read ON alerts(is_read);
      CREATE INDEX idx_alerts_created ON alerts(created_at);

      -- Vehicle GPS tracking history
      CREATE TABLE vehicle_gps_history (
        id BIGINT GENERATED ALWAYS AS IDENTITY PRIMARY KEY,
        vehicle_id BIGINT NOT NULL REFERENCES vehicles(id) ON DELETE CASCADE,
        latitude NUMERIC(10, 8) NOT NULL,
        longitude NUMERIC(11, 8) NOT NULL,
        location_address TEXT NOT NULL,
        speed NUMERIC(5, 2),
        heading NUMERIC(5, 2),
        recorded_at TIMESTAMPTZ NOT NULL DEFAULT NOW()
      );

      CREATE INDEX idx_gps_vehicle ON vehicle_gps_history(vehicle_id);
      CREATE INDEX idx_gps_recorded ON vehicle_gps_history(recorded_at);

      -- Function to auto-create alerts for delayed shipments
      CREATE OR REPLACE FUNCTION check_delayed_shipments()
      RETURNS void AS $$
      BEGIN
        INSERT INTO alerts (alert_type, severity, title, message, entity_type, entity_id)
        SELECT 
          'shipment_delayed',
          'warning',
          'Shipment Delayed: ' || tracking_number,
          'Shipment ' || tracking_number || ' from ' || origin || ' to ' || destination || ' is delayed.',
          'shipment',
          id
        FROM shipments
        WHERE status = 'Delayed'
          AND id NOT IN (
            SELECT entity_id FROM alerts 
            WHERE alert_type = 'shipment_delayed' 
              AND entity_id = shipments.id
              AND created_at > NOW() - INTERVAL '24 hours'
          );
      END;
      $$ LANGUAGE plpgsql;

      -- Function to auto-create alerts for low stock
      CREATE OR REPLACE FUNCTION check_low_stock()
      RETURNS void AS $$
      BEGIN
        INSERT INTO alerts (alert_type, severity, title, message, entity_type, entity_id)
        SELECT 
          'low_stock',
          CASE 
            WHEN status = 'Out of Stock' THEN 'critical'
            ELSE 'warning'
          END,
          'Stock Alert: ' || product_name,
          'Product "' || product_name || '" in ' || location || ' is ' || LOWER(status) || '. Current quantity: ' || quantity,
          'inventory',
          id
        FROM inventory_items
        WHERE (status = 'Low Stock' OR status = 'Out of Stock')
          AND id NOT IN (
            SELECT entity_id FROM alerts 
            WHERE alert_type = 'low_stock' 
              AND entity_id = inventory_items.id
              AND created_at > NOW() - INTERVAL '24 hours'
          );
      END;
      $$ LANGUAGE plpgsql;

      -- Function to auto-create alerts for vehicles needing maintenance
      CREATE OR REPLACE FUNCTION check_vehicle_maintenance()
      RETURNS void AS $$
      BEGIN
        INSERT INTO alerts (alert_type, severity, title, message, entity_type, entity_id)
        SELECT 
          'vehicle_maintenance',
          'warning',
          'Maintenance Required: ' || vehicle_number,
          'Vehicle ' || vehicle_number || ' (Driver: ' || driver_name || ') requires maintenance.',
          'vehicle',
          id
        FROM vehicles
        WHERE status = 'Maintenance'
          AND id NOT IN (
            SELECT entity_id FROM alerts 
            WHERE alert_type = 'vehicle_maintenance' 
              AND entity_id = vehicles.id
              AND created_at > NOW() - INTERVAL '24 hours'
          );
      END;
      $$ LANGUAGE plpgsql;

      -- Function to check idle vehicles (not moved in 6 hours)
      CREATE OR REPLACE FUNCTION check_idle_vehicles()
      RETURNS void AS $$
      BEGIN
        INSERT INTO alerts (alert_type, severity, title, message, entity_type, entity_id)
        SELECT 
          'vehicle_idle',
          'info',
          'Vehicle Idle: ' || vehicle_number,
          'Vehicle ' || vehicle_number || ' has been idle at ' || location_address || ' for extended period.',
          'vehicle',
          id
        FROM vehicles
        WHERE status = 'Idle'
          AND updated_at < NOW() - INTERVAL '6 hours'
          AND id NOT IN (
            SELECT entity_id FROM alerts 
            WHERE alert_type = 'vehicle_idle' 
              AND entity_id = vehicles.id
              AND created_at > NOW() - INTERVAL '24 hours'
          );
      END;
      $$ LANGUAGE plpgsql;
    actions/loadAlerts.ts: |
      import { action } from '@uibakery/data';

      function loadAlerts() {
        return action('loadAlerts', 'SQL', {
          datasourceName: 'afghco_shipping_logistics',
          query: `
            SELECT 
              id,
              alert_type,
              severity,
              title,
              message,
              entity_type,
              entity_id,
              is_read,
              is_dismissed,
              created_at,
              read_at,
              dismissed_at
            FROM alerts
            WHERE is_dismissed = FALSE
            ORDER BY 
              CASE severity
                WHEN 'critical' THEN 1
                WHEN 'warning' THEN 2
                WHEN 'info' THEN 3
              END,
              created_at DESC
            LIMIT 50;
          `,
        });
      }

      export default loadAlerts;
    actions/markAlertRead.ts: |
      import { action } from '@uibakery/data';

      function markAlertRead() {
        return action('markAlertRead', 'SQL', {
          datasourceName: 'afghco_shipping_logistics',
          query: `
            UPDATE alerts
            SET is_read = TRUE, read_at = NOW()
            WHERE id = {{params.alertId}}::bigint
            RETURNING id, is_read;
          `,
        });
      }

      export default markAlertRead;
    actions/dismissAlert.ts: |
      import { action } from '@uibakery/data';

      function dismissAlert() {
        return action('dismissAlert', 'SQL', {
          datasourceName: 'afghco_shipping_logistics',
          query: `
            UPDATE alerts
            SET is_dismissed = TRUE, dismissed_at = NOW()
            WHERE id = {{params.alertId}}::bigint
            RETURNING id, is_dismissed;
          `,
        });
      }

      export default dismissAlert;
    actions/generateAlerts.ts: |
      import { action } from '@uibakery/data';

      function generateAlerts() {
        return action('generateAlerts', 'SQL', {
          datasourceName: 'afghco_shipping_logistics',
          query: `
            -- Run all alert checking functions
            SELECT check_delayed_shipments();
            SELECT check_low_stock();
            SELECT check_vehicle_maintenance();
            SELECT check_idle_vehicles();
            
            -- Return count of new alerts
            SELECT COUNT(*) as new_alerts
            FROM alerts
            WHERE created_at > NOW() - INTERVAL '5 minutes';
          `,
        });
      }

      export default generateAlerts;
    actions/trackVehicleGPS.ts: |
      import { action } from '@uibakery/data';

      function trackVehicleGPS() {
        return action('trackVehicleGPS', 'SQL', {
          datasourceName: 'afghco_shipping_logistics',
          query: `
            INSERT INTO vehicle_gps_history (
              vehicle_id,
              latitude,
              longitude,
              location_address,
              speed,
              heading
            )
            VALUES (
              {{params.vehicleId}}::bigint,
              {{params.latitude}}::numeric,
              {{params.longitude}}::numeric,
              {{params.address}},
              {{params.speed}}::numeric,
              {{params.heading}}::numeric
            )
            RETURNING id, vehicle_id, latitude, longitude, recorded_at;
          `,
        });
      }

      export default trackVehicleGPS;
    actions/loadVehicleGPSHistory.ts: |
      import { action } from '@uibakery/data';

      function loadVehicleGPSHistory() {
        return action('loadVehicleGPSHistory', 'SQL', {
          datasourceName: 'afghco_shipping_logistics',
          query: `
            SELECT 
              id,
              vehicle_id,
              latitude,
              longitude,
              location_address,
              speed,
              heading,
              recorded_at
            FROM vehicle_gps_history
            WHERE vehicle_id = {{params.vehicleId}}::bigint
            ORDER BY recorded_at DESC
            LIMIT {{params.limit}}::int;
          `,
        });
      }

      export default loadVehicleGPSHistory;
    components/AlertsPanel.tsx: >
      import { useEffect } from 'react';

      import { Card, CardContent, CardHeader, CardTitle } from
      '@/components/ui/card';

      import { Badge } from '@/components/ui/badge';

      import { Button } from '@/components/ui/button';

      import { useLoadAction, useMutateAction } from '@uibakery/data';

      import loadAlertsAction from '@/actions/loadAlerts';

      import markAlertReadAction from '@/actions/markAlertRead';

      import dismissAlertAction from '@/actions/dismissAlert';

      import generateAlertsAction from '@/actions/generateAlerts';

      import type { Alert, AlertSeverity } from '@/lib/types';

      import { AlertTriangle, AlertCircle, Info, X, Check, RefreshCw } from
      'lucide-react';


      export function AlertsPanel() {
        const [alerts, loading, error, refresh] = useLoadAction(loadAlertsAction, []);
        const [markRead] = useMutateAction(markAlertReadAction);
        const [dismiss] = useMutateAction(dismissAlertAction);
        const [generate] = useMutateAction(generateAlertsAction);

        useEffect(() => {
          const interval = setInterval(() => {
            generate({}).then(() => refresh());
          }, 60000);

          return () => clearInterval(interval);
        }, [generate, refresh]);

        const getSeverityIcon = (severity: AlertSeverity) => {
          switch (severity) {
            case 'critical':
              return <AlertTriangle className="h-5 w-5 text-red-500" />;
            case 'warning':
              return <AlertCircle className="h-5 w-5 text-yellow-500" />;
            case 'info':
              return <Info className="h-5 w-5 text-blue-500" />;
          }
        };

        const getSeverityColor = (severity: AlertSeverity) => {
          switch (severity) {
            case 'critical':
              return 'bg-red-600';
            case 'warning':
              return 'bg-yellow-600';
            case 'info':
              return 'bg-blue-600';
          }
        };

        const handleMarkRead = async (alertId: number) => {
          await markRead({ alertId });
          refresh();
        };

        const handleDismiss = async (alertId: number) => {
          await dismiss({ alertId });
          refresh();
        };

        const handleGenerateAlerts = async () => {
          await generate({});
          refresh();
        };

        const unreadCount = alerts.filter((a: Alert) => !a.is_read).length;
        const criticalCount = alerts.filter((a: Alert) => a.severity === 'critical').length;

        return (
          <Card className="bg-[#1E293B] border-[#334155]">
            <CardHeader>
              <div className="flex items-center justify-between">
                <CardTitle className="flex items-center gap-2 text-[#F1F5F9]">
                  <AlertTriangle className="h-6 w-6" />
                  Alerts & Notifications
                  {unreadCount > 0 && (
                    <Badge className="bg-red-600 text-white">{unreadCount} New</Badge>
                  )}
                  {criticalCount > 0 && (
                    <Badge className="bg-red-700 text-white animate-pulse">{criticalCount} Critical</Badge>
                  )}
                </CardTitle>
                <Button
                  variant="outline"
                  size="sm"
                  onClick={handleGenerateAlerts}
                  disabled={loading}
                  className="flex items-center gap-2"
                >
                  <RefreshCw className={`h-4 w-4 ${loading ? 'animate-spin' : ''}`} />
                  Check Alerts
                </Button>
              </div>
            </CardHeader>
            <CardContent>
              {loading && alerts.length === 0 ? (
                <div className="text-center text-[#94A3B8] py-8">Loading alerts...</div>
              ) : error ? (
                <div className="text-center text-red-400 py-8">Failed to load alerts</div>
              ) : alerts.length === 0 ? (
                <div className="text-center text-[#94A3B8] py-8">
                  <Check className="h-12 w-12 mx-auto mb-2 text-green-500" />
                  No active alerts. All systems operational.
                </div>
              ) : (
                <div className="space-y-3 max-h-[600px] overflow-y-auto">
                  {alerts.map((alert: Alert) => (
                    <div
                      key={alert.id}
                      className={`border rounded-lg p-4 ${
                        alert.is_read ? 'bg-[#0F172A]/50 border-[#334155]' : 'bg-[#0F172A] border-[#475569]'
                      }`}
                    >
                      <div className="flex items-start gap-3">
                        <div className="flex-shrink-0 mt-1">
                          {getSeverityIcon(alert.severity)}
                        </div>
                        <div className="flex-1 min-w-0">
                          <div className="flex items-start justify-between gap-2 mb-1">
                            <div className="flex items-center gap-2 flex-wrap">
                              <h4 className="font-semibold text-[#F1F5F9] text-sm">{alert.title}</h4>
                              <Badge className={`${getSeverityColor(alert.severity)} text-white text-xs`}>
                                {alert.severity}
                              </Badge>
                              {alert.entity_type && (
                                <Badge variant="outline" className="text-xs">
                                  {alert.entity_type}
                                </Badge>
                              )}
                            </div>
                          </div>
                          <p className="text-[#94A3B8] text-sm mb-2">{alert.message}</p>
                          <div className="flex items-center justify-between gap-2">
                            <span className="text-xs text-[#64748B]">
                              {new Date(alert.created_at).toLocaleString()}
                            </span>
                            <div className="flex gap-2">
                              {!alert.is_read && (
                                <Button
                                  variant="ghost"
                                  size="sm"
                                  onClick={() => handleMarkRead(alert.id)}
                                  className="text-xs h-7 px-2"
                                >
                                  <Check className="h-3 w-3 mr-1" />
                                  Mark Read
                                </Button>
                              )}
                              <Button
                                variant="ghost"
                                size="sm"
                                onClick={() => handleDismiss(alert.id)}
                                className="text-xs h-7 px-2 text-red-400 hover:text-red-300"
                              >
                                <X className="h-3 w-3 mr-1" />
                                Dismiss
                              </Button>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  ))}
                </div>
              )}
            </CardContent>
          </Card>
        );
      }
    components/RealTimeGPSTracker.tsx: >
      import { useEffect, useState } from 'react';

      import { Card, CardContent, CardHeader, CardTitle } from
      '@/components/ui/card';

      import { Badge } from '@/components/ui/badge';

      import { Button } from '@/components/ui/button';

      import { useLoadAction, useMutateAction } from '@uibakery/data';

      import loadVehiclesAction from '@/actions/loadVehicles';

      import updateVehicleLocationAction from '@/actions/updateVehicleLocation';

      import trackVehicleGPSAction from '@/actions/trackVehicleGPS';

      import type { VehicleDB } from '@/lib/types';

      import { MapPin, Navigation, Activity, Clock } from 'lucide-react';


      export function RealTimeGPSTracker() {
        const [vehicles, loading, error, refresh] = useLoadAction(loadVehiclesAction, [], { status: null });
        const [updateLocation] = useMutateAction(updateVehicleLocationAction);
        const [trackGPS] = useMutateAction(trackVehicleGPSAction);
        const [lastUpdate, setLastUpdate] = useState<Date>(new Date());
        const [isTracking, setIsTracking] = useState(true);

        useEffect(() => {
          if (!isTracking) return;

          const simulateGPSUpdate = async () => {
            const activeVehicles = vehicles.filter((v: VehicleDB) => v.status === 'Active');
            
            for (const vehicle of activeVehicles) {
              const latDelta = (Math.random() - 0.5) * 0.01;
              const lngDelta = (Math.random() - 0.5) * 0.01;
              const newLat = parseFloat(vehicle.latitude.toString()) + latDelta;
              const newLng = parseFloat(vehicle.longitude.toString()) + lngDelta;
              const speed = 40 + Math.random() * 40;
              const heading = Math.random() * 360;

              try {
                await trackGPS({
                  vehicleId: vehicle.id,
                  latitude: newLat,
                  longitude: newLng,
                  address: vehicle.location_address,
                  speed: speed.toFixed(2),
                  heading: heading.toFixed(2),
                });

                await updateLocation({
                  vehicleId: vehicle.id,
                  latitude: newLat,
                  longitude: newLng,
                  address: vehicle.location_address,
                  status: vehicle.status,
                });
              } catch (err) {
                console.error('GPS update failed:', err);
              }
            }
            
            setLastUpdate(new Date());
            refresh();
          };

          const interval = setInterval(simulateGPSUpdate, 30000);

          return () => clearInterval(interval);
        }, [isTracking, vehicles, trackGPS, updateLocation, refresh]);

        const activeCount = vehicles.filter((v: VehicleDB) => v.status === 'Active').length;
        const trackingCount = isTracking ? activeCount : 0;

        return (
          <Card className="bg-[#1E293B] border-[#334155]">
            <CardHeader>
              <div className="flex items-center justify-between">
                <CardTitle className="flex items-center gap-2 text-[#F1F5F9]">
                  <MapPin className="h-6 w-6" />
                  Real-Time GPS Tracking
                  {isTracking && (
                    <Badge className="bg-green-600 text-white animate-pulse">
                      <Activity className="h-3 w-3 mr-1" />
                      Live
                    </Badge>
                  )}
                </CardTitle>
                <Button
                  variant={isTracking ? 'destructive' : 'default'}
                  size="sm"
                  onClick={() => setIsTracking(!isTracking)}
                >
                  {isTracking ? 'Stop Tracking' : 'Start Tracking'}
                </Button>
              </div>
            </CardHeader>
            <CardContent>
              <div className="space-y-4">
                <div className="grid grid-cols-2 md:grid-cols-4 gap-4">
                  <div className="bg-[#0F172A] rounded-lg p-4 border border-[#334155]">
                    <div className="flex items-center gap-2 mb-2">
                      <Navigation className="h-5 w-5 text-blue-500" />
                      <span className="text-sm text-[#94A3B8]">Tracking</span>
                    </div>
                    <p className="text-2xl font-bold text-[#F1F5F9]">{trackingCount}</p>
                    <p className="text-xs text-[#64748B]">Active Vehicles</p>
                  </div>

                  <div className="bg-[#0F172A] rounded-lg p-4 border border-[#334155]">
                    <div className="flex items-center gap-2 mb-2">
                      <MapPin className="h-5 w-5 text-green-500" />
                      <span className="text-sm text-[#94A3B8]">Total Fleet</span>
                    </div>
                    <p className="text-2xl font-bold text-[#F1F5F9]">{vehicles.length}</p>
                    <p className="text-xs text-[#64748B]">Vehicles</p>
                  </div>

                  <div className="bg-[#0F172A] rounded-lg p-4 border border-[#334155]">
                    <div className="flex items-center gap-2 mb-2">
                      <Activity className="h-5 w-5 text-purple-500" />
                      <span className="text-sm text-[#94A3B8]">Update Rate</span>
                    </div>
                    <p className="text-2xl font-bold text-[#F1F5F9]">30s</p>
                    <p className="text-xs text-[#64748B]">Interval</p>
                  </div>

                  <div className="bg-[#0F172A] rounded-lg p-4 border border-[#334155]">
                    <div className="flex items-center gap-2 mb-2">
                      <Clock className="h-5 w-5 text-yellow-500" />
                      <span className="text-sm text-[#94A3B8]">Last Update</span>
                    </div>
                    <p className="text-lg font-bold text-[#F1F5F9]">
                      {lastUpdate.toLocaleTimeString()}
                    </p>
                    <p className="text-xs text-[#64748B]">
                      {Math.floor((Date.now() - lastUpdate.getTime()) / 1000)}s ago
                    </p>
                  </div>
                </div>

                {loading ? (
                  <div className="text-center text-[#94A3B8] py-4">Loading vehicles...</div>
                ) : error ? (
                  <div className="text-center text-red-400 py-4">Failed to load vehicles</div>
                ) : (
                  <div className="bg-[#0F172A] rounded-lg p-4 border border-[#334155]">
                    <h4 className="text-sm font-semibold text-[#F1F5F9] mb-3">Active Vehicle Status</h4>
                    <div className="space-y-2 max-h-[200px] overflow-y-auto">
                      {vehicles
                        .filter((v: VehicleDB) => v.status === 'Active')
                        .slice(0, 5)
                        .map((vehicle: VehicleDB) => (
                          <div
                            key={vehicle.id}
                            className="flex items-center justify-between p-2 bg-[#1E293B] rounded border border-[#334155]"
                          >
                            <div className="flex items-center gap-2">
                              <div className={`w-2 h-2 rounded-full ${isTracking ? 'bg-green-500 animate-pulse' : 'bg-gray-500'}`} />
                              <div>
                                <p className="text-sm font-medium text-[#F1F5F9]">{vehicle.vehicle_number}</p>
                                <p className="text-xs text-[#94A3B8]">{vehicle.driver_name}</p>
                              </div>
                            </div>
                            <div className="text-right">
                              <p className="text-xs text-[#94A3B8]">{vehicle.location_address}</p>
                              <p className="text-xs text-[#64748B]">
                                {vehicle.latitude.toFixed(4)}, {vehicle.longitude.toFixed(4)}
                              </p>
                            </div>
                          </div>
                        ))}
                    </div>
                  </div>
                )}
              </div>
            </CardContent>
          </Card>
        );
      }
  data: '{{ module.data }}'
  __UIBAKERY__RESPONSIVE__SHOW__CONDITION__CODE__:
    - xl
    - xs
actions: {}
slots:
  - id: moduleContainerSlot
    name: content
    children: []
